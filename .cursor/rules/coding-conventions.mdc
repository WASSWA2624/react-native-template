---
alwaysApply: true
---

# Coding Conventions, Enforcement & Change Policy

## Purpose
Centralize **global coding conventions** and **governance** that apply across all layers and platforms.

## Mandatory conventions (global)
### File naming
- `camelCase` → hooks, utils, functions
- `PascalCase` → components, screens, layouts
- `kebab-case` → routes when applicable

### Exports
- **ES Modules (ESM) are mandatory** - use `export` statements exclusively
- Prefer **named exports**: `export { name }` or `export const name = ...`
- Use `index.js` / `index.jsx` as **barrel files only**

**Index File Extensions** (Single Source of Truth):
- **Barrel files** (export-only files): MUST use `index.js` (NOT `index.jsx`)
  - Barrel files contain only exports: `export * from './module'` or `export { name } from './module'`
  - No JSX allowed in barrel files
  - Applies to: platform components, screens, layouts, features, services, hooks, utils, etc.
  - See `component-structure.mdc` for platform component barrel file rules
- **Route pages/layouts** (Expo App Router): Use `index.jsx` for pages/layouts that render JSX
  - These are NOT barrel files; they are actual route pages/layouts
  - Must use default exports: `export default Component` (see `app-router.mdc`)
  - Barrel files in route folders are optional (see `app-router.mdc`)

### Module System
- **ES Modules (ESM) are mandatory** for all source code
- Use `import` and `export` statements exclusively
- **CommonJS (`require`, `module.exports`) is forbidden** in source code (`src/**`)
- **Configuration files at project root** (e.g., `babel.config.js`, `metro.config.js`, `jest.config.js`) may use **CommonJS** when required by tooling; prefer ES modules only when the toolchain supports it reliably
- **Expo entrypoint exception**: the repository root `index.js` may use `require('expo-router/entry')` (tooling requirement). Do not use CommonJS elsewhere.

### Imports
- Use **absolute imports** via aliases
- Never import across layers incorrectly (see `project-structure.mdc` for layer boundaries)
- Always use ES module `import` syntax: `import { name } from './module'`

**Available Aliases** (configured in `babel.config.js`):
- `@` → `./src`
- `@app` → `./src/app`
- `@platform` → `./src/platform`
- `@theme` → `./src/theme`
- `@store` → `./src/store`
- `@features` → `./src/features`
- `@services` → `./src/services`
- `@offline` → `./src/offline`
- `@security` → `./src/security`
- `@hooks` → `./src/hooks`
- `@utils` → `./src/utils`
- `@config` → `./src/config`
- `@i18n` → `./src/i18n`
- `@errors` → `./src/errors`
- `@logging` → `./src/logging`
- `@bootstrap` → `./src/bootstrap`
- `@navigation` → `./src/navigation`

**Alias Usage Rules**:
- Prefer specific aliases (`@services`, `@hooks`) over generic `@/` when possible
- Use `@/` only for root-level imports when no specific alias exists
- Example: `import { api } from '@services/api'` not `import { api } from '@/services/api'`

### Side effects
**Single Source of Truth**: This section defines where side effects are allowed.

Side effects belong in:
- Redux middleware / thunks (see `state-management.mdc`)
- Services (see `services-integration.mdc`)
- Workers
- Bootstrap

Hooks may coordinate UI-adjacent side effects (focus, lifecycle, subscriptions) but must delegate irreversible work to the above (see `hooks-utils.mdc`).

UI must not perform side effects directly (see `platform-ui.mdc`).

## Enforcement
- All PRs **must comply** with the linked rule documents in `index.mdc`
- Violations are considered **architectural defects**
- Rule documents override ad-hoc decisions
- Testing standards are defined in `testing.mdc`

## Internationalization (i18n) Enforcement
- **100% internationalization is mandatory** — see `i18n.mdc` (single source of truth). Do not restate i18n rules here.

## Change policy
- Architectural changes require updating the relevant `.mdc`
- `index.mdc` must be updated when new rule files are added

