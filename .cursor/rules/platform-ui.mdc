---
alwaysApply: true
---
# Platform UI Layer Standards

## Purpose
Define rules and best practices for the `src/platform` layer, including components, screens, and layouts for Android, iOS, and Web. The default layout and app look and feel are **Word-like** (document-style UI, toolbar/ribbon, clear typography); see `theme-design.mdc`.

## Layer Principles
1. **Presentation-only**: Layer boundary rules are defined in `project-structure.mdc`.
2. **Platform separation**: Components/screens/layouts must explicitly separate Android, iOS, and Web implementations.
3. **100% Reusability**: Components must be composable and generic (see `core-principles.mdc`).
4. **Consistency**: All files must follow naming conventions and folder structure.
5. **Performance**: Structure enables lazy loading, code splitting, and optimal bundle sizes.

## Folder Structure Rules
**Note**: Complete folder structure, grouping rules, and file organization are defined in `component-structure.mdc` (**single source of truth**). This section provides platform-specific examples only.

**Key Platform UI Rules**:
* **MANDATORY**: Related UIs must be grouped in category folders (see `component-structure.mdc` for details)
* Platform separation via file-level separation (`.android.jsx`, `.ios.jsx`, `.web.jsx`)
* Each platform has its own `.styles.jsx` file

## Platform-correct style wiring (MANDATORY)
To prevent accidental cross-platform styling and enforce correctness:

### UI → Styles import mapping (MANDATORY)
- `*.android.jsx` must import styles **only** from the matching `*.android.styles.jsx`
- `*.ios.jsx` must import styles **only** from the matching `*.ios.styles.jsx`
- `*.web.jsx` must import styles **only** from the matching `*.web.styles.jsx`

Forbidden:
- Importing `*.ios.styles.jsx` from Android files (and vice-versa)
- Importing `*.web.styles.jsx` from native files (and vice-versa)
- “Shared styles” implemented by importing another platform’s style file

### styled-components entrypoint per platform (MANDATORY)
- **Single Source of Truth**: See `theme-design.mdc`.

## Maximum reusability without duplication (MANDATORY)
- Reuse via **composition**, shared hooks, and shared tokens:
  - Shared component/screen logic must live in `useComponentName.js` / `useScreenName.js`
  - Shared constants/variants must live in `types.js`
  - Shared visual primitives must come from `theme` tokens (see `theme-design.mdc`)
- If multiple platforms need the same layout primitive (e.g., spacing rows/columns), create a reusable platform component/pattern and consume it, instead of duplicating style blocks across screens.

## Naming Conventions
**Single Source of Truth**: See `coding-conventions.mdc` for global naming rules, `component-structure.mdc` for platform UI specifics.

## Composition Rules
* Prefer **hooks and composition** over class components.
* Any state or side-effect must delegate to hooks, features, or Redux (see `coding-conventions.mdc` for complete side effects rules - single source of truth).
* Screens should be lightweight and delegate logic to features/hooks.

## Import Rules
* Absolute imports via aliases.
* Components/screens/layouts **cannot import domain logic directly**.
* UI components can import other UI components, hooks, and utilities.

## Responsiveness (Mandatory)
* UI must be **responsive across mobile, tablet, and web**
* Avoid fixed dimensions; prefer theme spacing + responsive helpers (see `theme-design.mdc`)
* Lists must use virtualization (`FlatList` / `SectionList`) for large datasets

## Resilience (Fail-safe UI)
* Every screen must handle: **loading**, **empty**, **error**, and **offline** states without crashing

## Related `.mdc` files
* `component-structure.mdc` - Component organization (single source of truth)
* `app-router.mdc` - Routing (single source of truth)
* `features-domain.mdc` - State/logic delegation
* `testing.mdc` - Testing requirements (single source of truth)
* `theme-design.mdc` - Theming (single source of truth)
* `coding-conventions.mdc` - Side effects rules