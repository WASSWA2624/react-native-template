{"version":3,"names":["z","phoneSchema","cov_16jrvvg2m2","s","string","min","regex","credentialsSchema","object","email","optional","phone","password","tenant_id","uuid","facility_id","refine","value","f","Boolean","b","message","path","passthrough","authPayloadSchema","parseCredentials","_ref","parse","parseAuthPayload","_ref2"],"sources":["auth.rules.js"],"sourcesContent":["/**\r\n * Auth Rules\r\n * Validation for auth payloads\r\n * File: auth.rules.js\r\n */\r\nimport { z } from 'zod';\r\n\r\nconst phoneSchema = z.string().min(10).regex(/^[0-9]+$/);\r\n\r\nconst credentialsSchema = z\r\n  .object({\r\n    email: z.string().email().optional(),\r\n    phone: phoneSchema.optional(),\r\n    password: z.string().min(1),\r\n    tenant_id: z.string().uuid().optional(),\r\n    facility_id: z.string().uuid().optional(),\r\n  })\r\n  .refine((value) => Boolean(value.email || value.phone), {\r\n    message: 'identifier_required',\r\n    path: ['email'],\r\n  })\r\n  .passthrough();\r\n\r\nconst authPayloadSchema = z.object({}).passthrough();\r\n\r\nconst parseCredentials = (value) => credentialsSchema.parse(value ?? {});\r\nconst parseAuthPayload = (value) => authPayloadSchema.parse(value ?? {});\r\n\r\nexport { parseCredentials, parseAuthPayload };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,SAASA,CAAC,QAAQ,KAAK;AAEvB,IAAMC,WAAW,IAAAC,cAAA,GAAAC,CAAA,OAAGH,CAAC,CAACI,MAAM,CAAC,CAAC,CAACC,GAAG,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC;AAExD,IAAMC,iBAAiB,IAAAL,cAAA,GAAAC,CAAA,OAAGH,CAAC,CACxBQ,MAAM,CAAC;EACNC,KAAK,EAAET,CAAC,CAACI,MAAM,CAAC,CAAC,CAACK,KAAK,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EACpCC,KAAK,EAAEV,WAAW,CAACS,QAAQ,CAAC,CAAC;EAC7BE,QAAQ,EAAEZ,CAAC,CAACI,MAAM,CAAC,CAAC,CAACC,GAAG,CAAC,CAAC,CAAC;EAC3BQ,SAAS,EAAEb,CAAC,CAACI,MAAM,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC,CAACJ,QAAQ,CAAC,CAAC;EACvCK,WAAW,EAAEf,CAAC,CAACI,MAAM,CAAC,CAAC,CAACU,IAAI,CAAC,CAAC,CAACJ,QAAQ,CAAC;AAC1C,CAAC,CAAC,CACDM,MAAM,CAAC,UAACC,KAAK,EAAK;EAAAf,cAAA,GAAAgB,CAAA;EAAAhB,cAAA,GAAAC,CAAA;EAAA,OAAAgB,OAAO,CAAC,CAAAjB,cAAA,GAAAkB,CAAA,UAAAH,KAAK,CAACR,KAAK,MAAAP,cAAA,GAAAkB,CAAA,UAAIH,KAAK,CAACN,KAAK,EAAC;AAAD,CAAC,EAAE;EACtDU,OAAO,EAAE,qBAAqB;EAC9BC,IAAI,EAAE,CAAC,OAAO;AAChB,CAAC,CAAC,CACDC,WAAW,CAAC,CAAC;AAEhB,IAAMC,iBAAiB,IAAAtB,cAAA,GAAAC,CAAA,OAAGH,CAAC,CAACQ,MAAM,CAAC,CAAC,CAAC,CAAC,CAACe,WAAW,CAAC,CAAC;AAACrB,cAAA,GAAAC,CAAA;AAErD,IAAMsB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIR,KAAK,EAAK;EAAA,IAAAS,IAAA;EAAAxB,cAAA,GAAAgB,CAAA;EAAAhB,cAAA,GAAAC,CAAA;EAAA,OAAAI,iBAAiB,CAACoB,KAAK,EAAAD,IAAA,IAAAxB,cAAA,GAAAkB,CAAA,UAACH,KAAK,aAAAS,IAAA,IAAAxB,cAAA,GAAAkB,CAAA,UAAI,CAAC,CAAC,EAAC;AAAD,CAAC;AAAClB,cAAA,GAAAC,CAAA;AACzE,IAAMyB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIX,KAAK,EAAK;EAAA,IAAAY,KAAA;EAAA3B,cAAA,GAAAgB,CAAA;EAAAhB,cAAA,GAAAC,CAAA;EAAA,OAAAqB,iBAAiB,CAACG,KAAK,EAAAE,KAAA,IAAA3B,cAAA,GAAAkB,CAAA,UAACH,KAAK,aAAAY,KAAA,IAAA3B,cAAA,GAAAkB,CAAA,UAAI,CAAC,CAAC,EAAC;AAAD,CAAC;AAExE,SAASK,gBAAgB,EAAEG,gBAAgB","ignoreList":[]}