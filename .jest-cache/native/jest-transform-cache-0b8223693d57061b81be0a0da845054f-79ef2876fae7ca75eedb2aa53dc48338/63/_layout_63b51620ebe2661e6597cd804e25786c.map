{"version":3,"names":["_react","_interopRequireWildcard","require","_reactRedux","_react2","_reactNative","_expoRouter","_errors","_i18n","_bootstrap","_logging","_store","_interopRequireDefault","_RootLayoutStyles","_ThemeProviderWrapper","_jsxRuntime","cov_287irkw6dz","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","RootLayout","_ref","useState","_ref2","_slicedToArray2","default","isBootstrapReady","setIsBootstrapReady","_ref3","_ref4","bootstrapError","setBootstrapError","useEffect","initializeApp","_ref5","_asyncToGenerator2","bootstrapApp","error","logger","message","stack","apply","arguments","jsx","ErrorBoundary","children","StyledLoadingContainer","StyledActivityIndicator","size","Provider","store","PersistGate","loading","persistor","I18nProvider","Slot","_default","exports"],"sources":["_layout.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport { ActivityIndicator } from 'react-native';\r\nimport { Slot } from 'expo-router';\r\nimport { ErrorBoundary } from '@errors';\r\nimport { I18nProvider } from '@i18n';\r\nimport { bootstrapApp } from '@bootstrap';\r\nimport { logger } from '@logging';\r\nimport store from '@store';\r\nimport { StyledLoadingContainer, StyledActivityIndicator } from '@platform/layouts/common/RootLayoutStyles';\r\nimport ThemeProviderWrapper from '@platform/layouts/common/ThemeProviderWrapper';\r\n\r\n/**\r\n * Root Layout Component\r\n * \r\n * This is the root layout for Expo App Router.\r\n * All providers will be added here in subsequent steps.\r\n * \r\n * Per app-router.mdc: Root layout responsibilities (providers/startup wiring)\r\n * are defined in bootstrap-config.mdc.\r\n * \r\n * Per bootstrap-config.mdc: ErrorBoundary is mounted only in root layout.\r\n * Per errors-logging.mdc: ErrorBoundary catches render/runtime errors and displays fallback UI.\r\n * \r\n * Per bootstrap-config.mdc: Redux Provider mounted only in root layout.\r\n * Per state-management.mdc: Store access patterns via Provider.\r\n * \r\n * Per bootstrap-config.mdc: ThemeProvider mounted only in root layout.\r\n * Per theme-design.mdc: Theme consumption via styled-components.\r\n * \r\n * Per bootstrap-config.mdc: Localization Provider mounted only in root layout.\r\n * Per i18n.mdc: i18n provider/registry, locale handling.\r\n * \r\n * Per bootstrap-config.mdc: Bootstrap runs in correct order (security → store → theme → offline)\r\n * before rendering providers. Bootstrap errors are handled gracefully per bootstrap-config.mdc.\r\n * \r\n * Note: Expo Router root layout uses <Slot /> to render child routes, not {children}\r\n */\r\nconst RootLayout = () => {\r\n  const [isBootstrapReady, setIsBootstrapReady] = useState(false);\r\n  const [bootstrapError, setBootstrapError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    /**\r\n     * Initialize app systems in correct order per bootstrap-config.mdc:\r\n     * 1. Security (protects everything)\r\n     * 2. Store (required by most layers)\r\n     * 3. Theme (required by UI)\r\n     * 4. Offline (depends on store and services)\r\n     */\r\n    const initializeApp = async () => {\r\n      try {\r\n        await bootstrapApp();\r\n        setIsBootstrapReady(true);\r\n      } catch (error) {\r\n        // Per bootstrap-config.mdc: Fatal errors must block rendering\r\n        // Non-fatal errors must be logged\r\n        // Per errors-logging.mdc: Log errors via logger\r\n        logger.error('Bootstrap initialization failed', {\r\n          error: error.message,\r\n          stack: error.stack,\r\n        });\r\n        \r\n        // Store error to block rendering (fatal error)\r\n        setBootstrapError(error);\r\n        \r\n        // Note: ErrorBoundary will catch if this causes a render error\r\n        // For now, we'll log and set error state to prevent rendering\r\n      }\r\n    };\r\n\r\n    initializeApp();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Per bootstrap-config.mdc: Fatal errors must block rendering\r\n  if (bootstrapError) {\r\n    // ErrorBoundary will handle this, but we prevent rendering providers\r\n    // until bootstrap succeeds\r\n    return (\r\n      <ErrorBoundary>\r\n        <StyledLoadingContainer>\r\n          <StyledActivityIndicator size=\"large\" />\r\n        </StyledLoadingContainer>\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n\r\n  // Per bootstrap-config.mdc: Add loading state while bootstrap completes\r\n  if (!isBootstrapReady) {\r\n    return (\r\n      <ErrorBoundary>\r\n        <StyledLoadingContainer>\r\n          <StyledActivityIndicator size=\"large\" />\r\n        </StyledLoadingContainer>\r\n      </ErrorBoundary>\r\n    );\r\n  }\r\n\r\n  // Bootstrap completed successfully, render providers\r\n  return (\r\n    <ErrorBoundary>\r\n      <Provider store={store}>\r\n        <PersistGate\r\n          loading={\r\n            <StyledLoadingContainer>\r\n              <StyledActivityIndicator size=\"large\" />\r\n            </StyledLoadingContainer>\r\n          }\r\n          persistor={store.persistor}\r\n        >\r\n          <ThemeProviderWrapper>\r\n            <I18nProvider>\r\n              <Slot />\r\n            </I18nProvider>\r\n          </ThemeProviderWrapper>\r\n        </PersistGate>\r\n      </Provider>\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default RootLayout;\r\n\r\n"],"mappings":"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","ignoreList":[]}