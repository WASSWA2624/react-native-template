ff8a6d994acda88275521879e6cde366
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = _interopRequireWildcard(require("react"));
var _expoRouter = require("expo-router");
var _hooks = require("../../hooks");
var _guards = require("../../navigation/guards");
var _layouts = require("../../platform/layouts");
var _components = require("../../platform/components");
var _GlobalFooter = _interopRequireWildcard(require("../../platform/components/navigation/GlobalFooter"));
var _jsxRuntime = require("react/jsx-runtime");
var AuthLayout = function AuthLayout() {
  var router = (0, _expoRouter.useRouter)();
  var _useAuthGuard = (0, _guards.useAuthGuard)({
      skipRedirect: true
    }),
    authenticated = _useAuthGuard.authenticated;
  var _useUiState = (0, _hooks.useUiState)(),
    isLoading = _useUiState.isLoading;
  var banners = (0, _hooks.useShellBanners)();
  var hasRedirected = (0, _react.useRef)(false);
  (0, _react.useEffect)(function () {
    if (authenticated && !hasRedirected.current) {
      hasRedirected.current = true;
      router.replace('/home');
    } else if (!authenticated) {
      hasRedirected.current = false;
    }
  }, [authenticated, router]);
  var bannerSlot = banners.length ? (0, _jsxRuntime.jsx)(_components.ShellBanners, {
    banners: banners,
    testID: "auth-shell-banners"
  }) : null;
  var overlaySlot = isLoading ? (0, _jsxRuntime.jsx)(_components.LoadingOverlay, {
    visible: true,
    testID: "auth-loading-overlay"
  }) : null;
  return (0, _jsxRuntime.jsx)(_layouts.AuthFrame, {
    testID: "auth-route-layout",
    banner: bannerSlot,
    overlay: overlaySlot,
    notices: (0, _jsxRuntime.jsx)(_components.NoticeSurface, {
      testID: "auth-notice-surface"
    }),
    footer: (0, _jsxRuntime.jsx)(_GlobalFooter.default, {
      variant: _GlobalFooter.FOOTER_VARIANTS.AUTH,
      testID: "auth-footer"
    }),
    children: (0, _jsxRuntime.jsx)(_expoRouter.Slot, {})
  });
};
var _default = exports.default = AuthLayout;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZXhwb1JvdXRlciIsIl9ob29rcyIsIl9ndWFyZHMiLCJfbGF5b3V0cyIsIl9jb21wb25lbnRzIiwiX0dsb2JhbEZvb3RlciIsIl9qc3hSdW50aW1lIiwiQXV0aExheW91dCIsInJvdXRlciIsInVzZVJvdXRlciIsIl91c2VBdXRoR3VhcmQiLCJ1c2VBdXRoR3VhcmQiLCJza2lwUmVkaXJlY3QiLCJhdXRoZW50aWNhdGVkIiwiX3VzZVVpU3RhdGUiLCJ1c2VVaVN0YXRlIiwiaXNMb2FkaW5nIiwiYmFubmVycyIsInVzZVNoZWxsQmFubmVycyIsImhhc1JlZGlyZWN0ZWQiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwicmVwbGFjZSIsImJhbm5lclNsb3QiLCJsZW5ndGgiLCJqc3giLCJTaGVsbEJhbm5lcnMiLCJ0ZXN0SUQiLCJvdmVybGF5U2xvdCIsIkxvYWRpbmdPdmVybGF5IiwidmlzaWJsZSIsIkF1dGhGcmFtZSIsImJhbm5lciIsIm92ZXJsYXkiLCJub3RpY2VzIiwiTm90aWNlU3VyZmFjZSIsImZvb3RlciIsImRlZmF1bHQiLCJ2YXJpYW50IiwiRk9PVEVSX1ZBUklBTlRTIiwiQVVUSCIsImNoaWxkcmVuIiwiU2xvdCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIl9sYXlvdXQuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgU2xvdCwgdXNlUm91dGVyIH0gZnJvbSAnZXhwby1yb3V0ZXInO1xyXG5pbXBvcnQgeyB1c2VTaGVsbEJhbm5lcnMsIHVzZVVpU3RhdGUgfSBmcm9tICdAaG9va3MnO1xyXG5pbXBvcnQgeyB1c2VBdXRoR3VhcmQgfSBmcm9tICdAbmF2aWdhdGlvbi9ndWFyZHMnO1xyXG5pbXBvcnQgeyBBdXRoRnJhbWUgfSBmcm9tICdAcGxhdGZvcm0vbGF5b3V0cyc7XHJcbmltcG9ydCB7IExvYWRpbmdPdmVybGF5LCBOb3RpY2VTdXJmYWNlLCBTaGVsbEJhbm5lcnMgfSBmcm9tICdAcGxhdGZvcm0vY29tcG9uZW50cyc7XHJcbmltcG9ydCBHbG9iYWxGb290ZXIsIHsgRk9PVEVSX1ZBUklBTlRTIH0gZnJvbSAnQHBsYXRmb3JtL2NvbXBvbmVudHMvbmF2aWdhdGlvbi9HbG9iYWxGb290ZXInO1xyXG5cclxuLyoqXHJcbiAqIEF1dGggR3JvdXAgTGF5b3V0XHJcbiAqIFxyXG4gKiBMYXlvdXQgd3JhcHBlciBmb3IgYXV0aGVudGljYXRpb24gcm91dGVzIChsb2dpbiwgcmVnaXN0ZXIsIGV0Yy4pLlxyXG4gKiBcclxuICogUGVyIGFwcC1yb3V0ZXIubWRjOlxyXG4gKiAtIExheW91dHMgdXNlIGBfbGF5b3V0LmpzeGAsIGRlZmF1bHQgZXhwb3J0cywgYDxTbG90IC8+YCBmb3IgY2hpbGQgcm91dGVzXHJcbiAqIC0gR3VhcmQgcGxhY2VtZW50OiBndWFyZHMgaW4gbGF5b3V0cywgbm90IHNjcmVlbnNcclxuICogXHJcbiAqIFRoaXMgbGF5b3V0IHJlZGlyZWN0cyBhdXRoZW50aWNhdGVkIHVzZXJzIGF3YXkgZnJvbSBhdXRoIHJvdXRlcyAoZS5nLiwgbG9naW4gd2hlbiBhbHJlYWR5IGxvZ2dlZCBpbikuXHJcbiAqIFBlciBTdGVwIDcuMTQ6IFVzZXMgdXNlQXV0aEd1YXJkIGhvb2sgd2l0aCBza2lwUmVkaXJlY3Qgb3B0aW9uIHRvIGdldCBhdXRoIHN0YXRlLFxyXG4gKiB0aGVuIGhhbmRsZXMgcmVkaXJlY3Qgb2YgYXV0aGVudGljYXRlZCB1c2VycyB0byBob21lIHJvdXRlLlxyXG4gKi9cclxuY29uc3QgQXV0aExheW91dCA9ICgpID0+IHtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCB7IGF1dGhlbnRpY2F0ZWQgfSA9IHVzZUF1dGhHdWFyZCh7IHNraXBSZWRpcmVjdDogdHJ1ZSB9KTtcclxuICBjb25zdCB7IGlzTG9hZGluZyB9ID0gdXNlVWlTdGF0ZSgpO1xyXG4gIGNvbnN0IGJhbm5lcnMgPSB1c2VTaGVsbEJhbm5lcnMoKTtcclxuICBcclxuICAvLyBVc2UgcmVmIHRvIHRyYWNrIGlmIHJlZGlyZWN0IGhhcyBiZWVuIHBlcmZvcm1lZCB0byBwcmV2ZW50IG11bHRpcGxlIHJlZGlyZWN0c1xyXG4gIGNvbnN0IGhhc1JlZGlyZWN0ZWQgPSB1c2VSZWYoZmFsc2UpO1xyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBSZWRpcmVjdCBhdXRoZW50aWNhdGVkIHVzZXJzIHRvIGhvbWUgcm91dGVcclxuICAgIGlmIChhdXRoZW50aWNhdGVkICYmICFoYXNSZWRpcmVjdGVkLmN1cnJlbnQpIHtcclxuICAgICAgaGFzUmVkaXJlY3RlZC5jdXJyZW50ID0gdHJ1ZTtcclxuICAgICAgcm91dGVyLnJlcGxhY2UoJy9ob21lJyk7XHJcbiAgICB9IGVsc2UgaWYgKCFhdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgIC8vIFJlc2V0IHJlZGlyZWN0IGZsYWcgd2hlbiB1bmF1dGhlbnRpY2F0ZWRcclxuICAgICAgaGFzUmVkaXJlY3RlZC5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSwgW2F1dGhlbnRpY2F0ZWQsIHJvdXRlcl0pO1xyXG4gIFxyXG4gIGNvbnN0IGJhbm5lclNsb3QgPSBiYW5uZXJzLmxlbmd0aCA/IDxTaGVsbEJhbm5lcnMgYmFubmVycz17YmFubmVyc30gdGVzdElEPVwiYXV0aC1zaGVsbC1iYW5uZXJzXCIgLz4gOiBudWxsO1xyXG4gIGNvbnN0IG92ZXJsYXlTbG90ID0gaXNMb2FkaW5nID8gPExvYWRpbmdPdmVybGF5IHZpc2libGUgdGVzdElEPVwiYXV0aC1sb2FkaW5nLW92ZXJsYXlcIiAvPiA6IG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8QXV0aEZyYW1lXHJcbiAgICAgIHRlc3RJRD1cImF1dGgtcm91dGUtbGF5b3V0XCJcclxuICAgICAgYmFubmVyPXtiYW5uZXJTbG90fVxyXG4gICAgICBvdmVybGF5PXtvdmVybGF5U2xvdH1cclxuICAgICAgbm90aWNlcz17PE5vdGljZVN1cmZhY2UgdGVzdElEPVwiYXV0aC1ub3RpY2Utc3VyZmFjZVwiIC8+fVxyXG4gICAgICBmb290ZXI9eyhcclxuICAgICAgICA8R2xvYmFsRm9vdGVyXHJcbiAgICAgICAgICB2YXJpYW50PXtGT09URVJfVkFSSUFOVFMuQVVUSH1cclxuICAgICAgICAgIHRlc3RJRD1cImF1dGgtZm9vdGVyXCJcclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgPlxyXG4gICAgICA8U2xvdCAvPlxyXG4gICAgPC9BdXRoRnJhbWU+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEF1dGhMYXlvdXQ7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsTUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksUUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sYUFBQSxHQUFBUCx1QkFBQSxDQUFBQyxPQUFBO0FBQTZGLElBQUFPLFdBQUEsR0FBQVAsT0FBQTtBQWU3RixJQUFNUSxVQUFVLEdBQUcsU0FBYkEsVUFBVUEsQ0FBQSxFQUFTO0VBQ3ZCLElBQU1DLE1BQU0sR0FBRyxJQUFBQyxxQkFBUyxFQUFDLENBQUM7RUFDMUIsSUFBQUMsYUFBQSxHQUEwQixJQUFBQyxvQkFBWSxFQUFDO01BQUVDLFlBQVksRUFBRTtJQUFLLENBQUMsQ0FBQztJQUF0REMsYUFBYSxHQUFBSCxhQUFBLENBQWJHLGFBQWE7RUFDckIsSUFBQUMsV0FBQSxHQUFzQixJQUFBQyxpQkFBVSxFQUFDLENBQUM7SUFBMUJDLFNBQVMsR0FBQUYsV0FBQSxDQUFURSxTQUFTO0VBQ2pCLElBQU1DLE9BQU8sR0FBRyxJQUFBQyxzQkFBZSxFQUFDLENBQUM7RUFHakMsSUFBTUMsYUFBYSxHQUFHLElBQUFDLGFBQU0sRUFBQyxLQUFLLENBQUM7RUFFbkMsSUFBQUMsZ0JBQVMsRUFBQyxZQUFNO0lBRWQsSUFBSVIsYUFBYSxJQUFJLENBQUNNLGFBQWEsQ0FBQ0csT0FBTyxFQUFFO01BQzNDSCxhQUFhLENBQUNHLE9BQU8sR0FBRyxJQUFJO01BQzVCZCxNQUFNLENBQUNlLE9BQU8sQ0FBQyxPQUFPLENBQUM7SUFDekIsQ0FBQyxNQUFNLElBQUksQ0FBQ1YsYUFBYSxFQUFFO01BRXpCTSxhQUFhLENBQUNHLE9BQU8sR0FBRyxLQUFLO0lBQy9CO0VBQ0YsQ0FBQyxFQUFFLENBQUNULGFBQWEsRUFBRUwsTUFBTSxDQUFDLENBQUM7RUFFM0IsSUFBTWdCLFVBQVUsR0FBR1AsT0FBTyxDQUFDUSxNQUFNLEdBQUcsSUFBQW5CLFdBQUEsQ0FBQW9CLEdBQUEsRUFBQ3RCLFdBQUEsQ0FBQXVCLFlBQVk7SUFBQ1YsT0FBTyxFQUFFQSxPQUFRO0lBQUNXLE1BQU0sRUFBQztFQUFvQixDQUFFLENBQUMsR0FBRyxJQUFJO0VBQ3pHLElBQU1DLFdBQVcsR0FBR2IsU0FBUyxHQUFHLElBQUFWLFdBQUEsQ0FBQW9CLEdBQUEsRUFBQ3RCLFdBQUEsQ0FBQTBCLGNBQWM7SUFBQ0MsT0FBTztJQUFDSCxNQUFNLEVBQUM7RUFBc0IsQ0FBRSxDQUFDLEdBQUcsSUFBSTtFQUUvRixPQUNFLElBQUF0QixXQUFBLENBQUFvQixHQUFBLEVBQUN2QixRQUFBLENBQUE2QixTQUFTO0lBQ1JKLE1BQU0sRUFBQyxtQkFBbUI7SUFDMUJLLE1BQU0sRUFBRVQsVUFBVztJQUNuQlUsT0FBTyxFQUFFTCxXQUFZO0lBQ3JCTSxPQUFPLEVBQUUsSUFBQTdCLFdBQUEsQ0FBQW9CLEdBQUEsRUFBQ3RCLFdBQUEsQ0FBQWdDLGFBQWE7TUFBQ1IsTUFBTSxFQUFDO0lBQXFCLENBQUUsQ0FBRTtJQUN4RFMsTUFBTSxFQUNKLElBQUEvQixXQUFBLENBQUFvQixHQUFBLEVBQUNyQixhQUFBLENBQUFpQyxPQUFZO01BQ1hDLE9BQU8sRUFBRUMsNkJBQWUsQ0FBQ0MsSUFBSztNQUM5QmIsTUFBTSxFQUFDO0lBQWEsQ0FDckIsQ0FDRDtJQUFBYyxRQUFBLEVBRUYsSUFBQXBDLFdBQUEsQ0FBQW9CLEdBQUEsRUFBQzFCLFdBQUEsQ0FBQTJDLElBQUksSUFBRTtFQUFDLENBQ0MsQ0FBQztBQUVoQixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFQLE9BQUEsR0FFYS9CLFVBQVUiLCJpZ25vcmVMaXN0IjpbXX0=