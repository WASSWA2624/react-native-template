{"version":3,"names":["useCallback","useMemo","useState","useRouter","useAuth","useI18n","useNetwork","cov_2f7rygsman","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","useForgotPasswordScreen","_ref","router","_ref2","isOffline","_ref3","forgotPassword","clearError","isLoading","_ref4","_ref5","_slicedToArray","email","setEmail","_ref6","_ref7","tenantId","setTenantId","_ref8","_ref9","isSubmitted","setIsSubmitted","errorMessage","canSubmit","Boolean","handleSubmit","_asyncToGenerator","result","trim","tenant_id","succeeded","error","handleChangeEmail","value","handleChangeTenantId","handleGoToLogin","push"],"sources":["useForgotPasswordScreen.js"],"sourcesContent":["/**\r\n * useForgotPasswordScreen Hook\r\n * Shared behavior/logic for ForgotPasswordScreen across all platforms.\r\n * File: useForgotPasswordScreen.js\r\n */\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useAuth, useI18n, useNetwork } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useForgotPasswordScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const { forgotPassword, clearError, isLoading, errorCode } = useAuth();\r\n  const [email, setEmail] = useState('');\r\n  const [tenantId, setTenantId] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [errorCode, t]\r\n  );\r\n\r\n  const canSubmit = useMemo(\r\n    () => Boolean(email && tenantId) && !isLoading && !isOffline,\r\n    [email, isLoading, isOffline, tenantId]\r\n  );\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    if (!canSubmit) return false;\r\n    clearError();\r\n    const result = await forgotPassword({\r\n      email: email.trim(),\r\n      tenant_id: tenantId.trim(),\r\n    });\r\n    const succeeded = !result?.error;\r\n    if (succeeded) {\r\n      setIsSubmitted(true);\r\n    }\r\n    return succeeded;\r\n  }, [canSubmit, clearError, email, forgotPassword, tenantId]);\r\n\r\n  const handleChangeEmail = useCallback((value) => {\r\n    setEmail(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleChangeTenantId = useCallback((value) => {\r\n    setTenantId(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleGoToLogin = useCallback(() => {\r\n    router.push('/login');\r\n  }, [router]);\r\n\r\n  return {\r\n    email,\r\n    tenantId,\r\n    isSubmitted,\r\n    errorMessage,\r\n    isLoading,\r\n    isOffline,\r\n    canSubmit,\r\n    handleSubmit,\r\n    handleChangeEmail,\r\n    handleChangeTenantId,\r\n    handleGoToLogin,\r\n  };\r\n};\r\n\r\nexport default useForgotPasswordScreen;\r\n\r\n"],"mappings":"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","ignoreList":[]}