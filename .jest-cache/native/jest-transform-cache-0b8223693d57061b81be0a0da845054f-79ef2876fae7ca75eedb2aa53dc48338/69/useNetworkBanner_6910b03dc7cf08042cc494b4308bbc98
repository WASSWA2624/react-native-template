c639a0b3f8dfd1615b112171d4ed145d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _useNetwork2 = _interopRequireDefault(require("./useNetwork"));
var DEFAULT_ONLINE_DURATION = 4000;
var useNetworkBanner = function useNetworkBanner() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$duration = _ref.duration,
    duration = _ref$duration === void 0 ? DEFAULT_ONLINE_DURATION : _ref$duration;
  var _useNetwork = (0, _useNetwork2.default)(),
    isOnline = _useNetwork.isOnline,
    isOffline = _useNetwork.isOffline,
    isLowQuality = _useNetwork.isLowQuality,
    networkQuality = _useNetwork.networkQuality;
  var _useState = (0, _react.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    showOnlineBanner = _useState2[0],
    setShowOnlineBanner = _useState2[1];
  var timeoutRef = (0, _react.useRef)(null);
  var wasOnlineRef = (0, _react.useRef)(isOnline);
  (0, _react.useEffect)(function () {
    if (isOnline && !wasOnlineRef.current) {
      setShowOnlineBanner(true);
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
      timeoutRef.current = setTimeout(function () {
        setShowOnlineBanner(false);
        timeoutRef.current = null;
      }, duration);
    }
    if (!isOnline) {
      setShowOnlineBanner(false);
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
        timeoutRef.current = null;
      }
    }
    wasOnlineRef.current = isOnline;
  }, [duration, isOnline]);
  (0, _react.useEffect)(function () {
    return function () {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  return {
    isOnline: isOnline,
    isOffline: isOffline,
    isLowQuality: isLowQuality,
    networkQuality: networkQuality,
    showOnlineBanner: showOnlineBanner
  };
};
var _default = exports.default = useNetworkBanner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3VzZU5ldHdvcmsyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIkRFRkFVTFRfT05MSU5FX0RVUkFUSU9OIiwidXNlTmV0d29ya0Jhbm5lciIsIl9yZWYiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfcmVmJGR1cmF0aW9uIiwiZHVyYXRpb24iLCJfdXNlTmV0d29yayIsInVzZU5ldHdvcmsiLCJpc09ubGluZSIsImlzT2ZmbGluZSIsImlzTG93UXVhbGl0eSIsIm5ldHdvcmtRdWFsaXR5IiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsInNob3dPbmxpbmVCYW5uZXIiLCJzZXRTaG93T25saW5lQmFubmVyIiwidGltZW91dFJlZiIsInVzZVJlZiIsIndhc09ubGluZVJlZiIsInVzZUVmZmVjdCIsImN1cnJlbnQiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlTmV0d29ya0Jhbm5lci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogdXNlTmV0d29ya0Jhbm5lciBIb29rXHJcbiAqIFByb3ZpZGVzIHRyYW5zaWVudCBvbmxpbmUgYmFubmVyIHZpc2liaWxpdHkgb24gcmVjb25uZWN0LlxyXG4gKiBGaWxlOiB1c2VOZXR3b3JrQmFubmVyLmpzXHJcbiAqL1xyXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB1c2VOZXR3b3JrIGZyb20gJy4vdXNlTmV0d29yayc7XHJcblxyXG5jb25zdCBERUZBVUxUX09OTElORV9EVVJBVElPTiA9IDQwMDA7XHJcblxyXG5jb25zdCB1c2VOZXR3b3JrQmFubmVyID0gKHsgZHVyYXRpb24gPSBERUZBVUxUX09OTElORV9EVVJBVElPTiB9ID0ge30pID0+IHtcclxuICBjb25zdCB7IGlzT25saW5lLCBpc09mZmxpbmUsIGlzTG93UXVhbGl0eSwgbmV0d29ya1F1YWxpdHkgfSA9IHVzZU5ldHdvcmsoKTtcclxuICBjb25zdCBbc2hvd09ubGluZUJhbm5lciwgc2V0U2hvd09ubGluZUJhbm5lcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgdGltZW91dFJlZiA9IHVzZVJlZihudWxsKTtcclxuICBjb25zdCB3YXNPbmxpbmVSZWYgPSB1c2VSZWYoaXNPbmxpbmUpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGlzT25saW5lICYmICF3YXNPbmxpbmVSZWYuY3VycmVudCkge1xyXG4gICAgICBzZXRTaG93T25saW5lQmFubmVyKHRydWUpO1xyXG4gICAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XHJcbiAgICAgIH1cclxuICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgc2V0U2hvd09ubGluZUJhbm5lcihmYWxzZSk7XHJcbiAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfSwgZHVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNPbmxpbmUpIHtcclxuICAgICAgc2V0U2hvd09ubGluZUJhbm5lcihmYWxzZSk7XHJcbiAgICAgIGlmICh0aW1lb3V0UmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dFJlZi5jdXJyZW50KTtcclxuICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2FzT25saW5lUmVmLmN1cnJlbnQgPSBpc09ubGluZTtcclxuICB9LCBbZHVyYXRpb24sIGlzT25saW5lXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaXNPbmxpbmUsXHJcbiAgICBpc09mZmxpbmUsXHJcbiAgICBpc0xvd1F1YWxpdHksXHJcbiAgICBuZXR3b3JrUXVhbGl0eSxcclxuICAgIHNob3dPbmxpbmVCYW5uZXIsXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZU5ldHdvcmtCYW5uZXI7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRUEsSUFBTUcsdUJBQXVCLEdBQUcsSUFBSTtBQUVwQyxJQUFNQyxnQkFBZ0IsR0FBRyxTQUFuQkEsZ0JBQWdCQSxDQUFBLEVBQW9EO0VBQUEsSUFBQUMsSUFBQSxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBUCxDQUFDLENBQUM7SUFBQUcsYUFBQSxHQUFBSixJQUFBLENBQXpDSyxRQUFRO0lBQVJBLFFBQVEsR0FBQUQsYUFBQSxjQUFHTix1QkFBdUIsR0FBQU0sYUFBQTtFQUM1RCxJQUFBRSxXQUFBLEdBQThELElBQUFDLG9CQUFVLEVBQUMsQ0FBQztJQUFsRUMsUUFBUSxHQUFBRixXQUFBLENBQVJFLFFBQVE7SUFBRUMsU0FBUyxHQUFBSCxXQUFBLENBQVRHLFNBQVM7SUFBRUMsWUFBWSxHQUFBSixXQUFBLENBQVpJLFlBQVk7SUFBRUMsY0FBYyxHQUFBTCxXQUFBLENBQWRLLGNBQWM7RUFDekQsSUFBQUMsU0FBQSxHQUFnRCxJQUFBQyxlQUFRLEVBQUMsS0FBSyxDQUFDO0lBQUFDLFVBQUEsT0FBQUMsZUFBQSxDQUFBQyxPQUFBLEVBQUFKLFNBQUE7SUFBeERLLGdCQUFnQixHQUFBSCxVQUFBO0lBQUVJLG1CQUFtQixHQUFBSixVQUFBO0VBQzVDLElBQU1LLFVBQVUsR0FBRyxJQUFBQyxhQUFNLEVBQUMsSUFBSSxDQUFDO0VBQy9CLElBQU1DLFlBQVksR0FBRyxJQUFBRCxhQUFNLEVBQUNaLFFBQVEsQ0FBQztFQUVyQyxJQUFBYyxnQkFBUyxFQUFDLFlBQU07SUFDZCxJQUFJZCxRQUFRLElBQUksQ0FBQ2EsWUFBWSxDQUFDRSxPQUFPLEVBQUU7TUFDckNMLG1CQUFtQixDQUFDLElBQUksQ0FBQztNQUN6QixJQUFJQyxVQUFVLENBQUNJLE9BQU8sRUFBRTtRQUN0QkMsWUFBWSxDQUFDTCxVQUFVLENBQUNJLE9BQU8sQ0FBQztNQUNsQztNQUNBSixVQUFVLENBQUNJLE9BQU8sR0FBR0UsVUFBVSxDQUFDLFlBQU07UUFDcENQLG1CQUFtQixDQUFDLEtBQUssQ0FBQztRQUMxQkMsVUFBVSxDQUFDSSxPQUFPLEdBQUcsSUFBSTtNQUMzQixDQUFDLEVBQUVsQixRQUFRLENBQUM7SUFDZDtJQUVBLElBQUksQ0FBQ0csUUFBUSxFQUFFO01BQ2JVLG1CQUFtQixDQUFDLEtBQUssQ0FBQztNQUMxQixJQUFJQyxVQUFVLENBQUNJLE9BQU8sRUFBRTtRQUN0QkMsWUFBWSxDQUFDTCxVQUFVLENBQUNJLE9BQU8sQ0FBQztRQUNoQ0osVUFBVSxDQUFDSSxPQUFPLEdBQUcsSUFBSTtNQUMzQjtJQUNGO0lBRUFGLFlBQVksQ0FBQ0UsT0FBTyxHQUFHZixRQUFRO0VBQ2pDLENBQUMsRUFBRSxDQUFDSCxRQUFRLEVBQUVHLFFBQVEsQ0FBQyxDQUFDO0VBRXhCLElBQUFjLGdCQUFTLEVBQUMsWUFBTTtJQUNkLE9BQU8sWUFBTTtNQUNYLElBQUlILFVBQVUsQ0FBQ0ksT0FBTyxFQUFFO1FBQ3RCQyxZQUFZLENBQUNMLFVBQVUsQ0FBQ0ksT0FBTyxDQUFDO01BQ2xDO0lBQ0YsQ0FBQztFQUNILENBQUMsRUFBRSxFQUFFLENBQUM7RUFFTixPQUFPO0lBQ0xmLFFBQVEsRUFBUkEsUUFBUTtJQUNSQyxTQUFTLEVBQVRBLFNBQVM7SUFDVEMsWUFBWSxFQUFaQSxZQUFZO0lBQ1pDLGNBQWMsRUFBZEEsY0FBYztJQUNkTSxnQkFBZ0IsRUFBaEJBO0VBQ0YsQ0FBQztBQUNILENBQUM7QUFBQyxJQUFBUyxRQUFBLEdBQUFDLE9BQUEsQ0FBQVgsT0FBQSxHQUVhakIsZ0JBQWdCIiwiaWdub3JlTGlzdCI6W119