750e63eb1052c04ae6f0ea22a2c4d663
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _callSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/callSuper"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _VirtualizedListContext = require("./VirtualizedListContext.js");
var _invariant = _interopRequireDefault(require("invariant"));
var _react = _interopRequireWildcard(require("react"));
var React = _react;
var _reactNative = require("react-native");
var _jsxRuntime = require("react/jsx-runtime");
var CellRenderer = exports.default = function (_React$PureComponent) {
  function CellRenderer() {
    var _this;
    (0, _classCallCheck2.default)(this, CellRenderer);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = (0, _callSuper2.default)(this, CellRenderer, [].concat(args));
    _this.state = {
      separatorProps: {
        highlighted: false,
        leadingItem: _this.props.item
      }
    };
    _this._separators = {
      highlight: function highlight() {
        var _this$props = _this.props,
          cellKey = _this$props.cellKey,
          prevCellKey = _this$props.prevCellKey;
        _this.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: true
        });
      },
      unhighlight: function unhighlight() {
        var _this$props2 = _this.props,
          cellKey = _this$props2.cellKey,
          prevCellKey = _this$props2.prevCellKey;
        _this.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: false
        });
      },
      updateProps: function updateProps(select, newProps) {
        var _this$props3 = _this.props,
          cellKey = _this$props3.cellKey,
          prevCellKey = _this$props3.prevCellKey;
        _this.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);
      }
    };
    _this._onLayout = function (nativeEvent) {
      _this.props.onCellLayout == null || _this.props.onCellLayout(nativeEvent, _this.props.cellKey, _this.props.index);
    };
    _this._onCellFocusCapture = function (e) {
      _this.props.onCellFocusCapture == null || _this.props.onCellFocusCapture(_this.props.cellKey);
    };
    return _this;
  }
  (0, _inherits2.default)(CellRenderer, _React$PureComponent);
  return (0, _createClass2.default)(CellRenderer, [{
    key: "updateSeparatorProps",
    value: function updateSeparatorProps(newProps) {
      this.setState(function (state) {
        return {
          separatorProps: Object.assign({}, state.separatorProps, newProps)
        };
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.props.onUnmount(this.props.cellKey);
    }
  }, {
    key: "_renderElement",
    value: function _renderElement(renderItem, ListItemComponent, item, index) {
      if (renderItem && ListItemComponent) {
        console.warn('VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take' + ' precedence over renderItem.');
      }
      if (ListItemComponent) {
        return (0, _jsxRuntime.jsx)(ListItemComponent, {
          item: item,
          index: index,
          separators: this._separators
        });
      }
      if (renderItem) {
        return renderItem({
          item: item,
          index: index,
          separators: this._separators
        });
      }
      (0, _invariant.default)(false, 'VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.');
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props4 = this.props,
        CellRendererComponent = _this$props4.CellRendererComponent,
        ItemSeparatorComponent = _this$props4.ItemSeparatorComponent,
        ListItemComponent = _this$props4.ListItemComponent,
        cellKey = _this$props4.cellKey,
        horizontal = _this$props4.horizontal,
        item = _this$props4.item,
        index = _this$props4.index,
        inversionStyle = _this$props4.inversionStyle,
        onCellLayout = _this$props4.onCellLayout,
        renderItem = _this$props4.renderItem;
      var element = this._renderElement(renderItem, ListItemComponent, item, index);
      var itemSeparator = (0, _react.isValidElement)(ItemSeparatorComponent) ? ItemSeparatorComponent : ItemSeparatorComponent && (0, _jsxRuntime.jsx)(ItemSeparatorComponent, Object.assign({}, this.state.separatorProps));
      var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;
      var result = !CellRendererComponent ? (0, _jsxRuntime.jsxs)(_reactNative.View, Object.assign({
        style: cellStyle,
        onFocusCapture: this._onCellFocusCapture
      }, onCellLayout && {
        onLayout: this._onLayout
      }, {
        children: [element, itemSeparator]
      })) : (0, _jsxRuntime.jsxs)(CellRendererComponent, Object.assign({
        cellKey: cellKey,
        index: index,
        item: item,
        style: cellStyle,
        onFocusCapture: this._onCellFocusCapture
      }, onCellLayout && {
        onLayout: this._onLayout
      }, {
        children: [element, itemSeparator]
      }));
      return (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
        cellKey: this.props.cellKey,
        children: result
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, prevState) {
      if (props.item !== prevState.separatorProps.leadingItem) {
        return {
          separatorProps: Object.assign({}, prevState.separatorProps, {
            leadingItem: props.item
          })
        };
      }
      return null;
    }
  }]);
}(React.PureComponent);
var styles = _reactNative.StyleSheet.create({
  row: {
    flexDirection: 'row'
  },
  rowReverse: {
    flexDirection: 'row-reverse'
  },
  columnReverse: {
    flexDirection: 'column-reverse'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVmlydHVhbGl6ZWRMaXN0Q29udGV4dCIsInJlcXVpcmUiLCJfaW52YXJpYW50IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiUmVhY3QiLCJfcmVhY3ROYXRpdmUiLCJfanN4UnVudGltZSIsIkNlbGxSZW5kZXJlciIsImV4cG9ydHMiLCJkZWZhdWx0IiwiX1JlYWN0JFB1cmVDb21wb25lbnQiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjazIiLCJfbGVuIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXJncyIsIkFycmF5IiwiX2tleSIsIl9jYWxsU3VwZXIyIiwiY29uY2F0Iiwic3RhdGUiLCJzZXBhcmF0b3JQcm9wcyIsImhpZ2hsaWdodGVkIiwibGVhZGluZ0l0ZW0iLCJwcm9wcyIsIml0ZW0iLCJfc2VwYXJhdG9ycyIsImhpZ2hsaWdodCIsIl90aGlzJHByb3BzIiwiY2VsbEtleSIsInByZXZDZWxsS2V5Iiwib25VcGRhdGVTZXBhcmF0b3JzIiwidW5oaWdobGlnaHQiLCJfdGhpcyRwcm9wczIiLCJ1cGRhdGVQcm9wcyIsInNlbGVjdCIsIm5ld1Byb3BzIiwiX3RoaXMkcHJvcHMzIiwiX29uTGF5b3V0IiwibmF0aXZlRXZlbnQiLCJvbkNlbGxMYXlvdXQiLCJpbmRleCIsIl9vbkNlbGxGb2N1c0NhcHR1cmUiLCJlIiwib25DZWxsRm9jdXNDYXB0dXJlIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsInVwZGF0ZVNlcGFyYXRvclByb3BzIiwic2V0U3RhdGUiLCJPYmplY3QiLCJhc3NpZ24iLCJjb21wb25lbnRXaWxsVW5tb3VudCIsIm9uVW5tb3VudCIsIl9yZW5kZXJFbGVtZW50IiwicmVuZGVySXRlbSIsIkxpc3RJdGVtQ29tcG9uZW50IiwiY29uc29sZSIsIndhcm4iLCJqc3giLCJzZXBhcmF0b3JzIiwiaW52YXJpYW50IiwicmVuZGVyIiwiX3RoaXMkcHJvcHM0IiwiQ2VsbFJlbmRlcmVyQ29tcG9uZW50IiwiSXRlbVNlcGFyYXRvckNvbXBvbmVudCIsImhvcml6b250YWwiLCJpbnZlcnNpb25TdHlsZSIsImVsZW1lbnQiLCJpdGVtU2VwYXJhdG9yIiwiaXNWYWxpZEVsZW1lbnQiLCJjZWxsU3R5bGUiLCJzdHlsZXMiLCJyb3dSZXZlcnNlIiwiY29sdW1uUmV2ZXJzZSIsInJvdyIsInJlc3VsdCIsImpzeHMiLCJWaWV3Iiwic3R5bGUiLCJvbkZvY3VzQ2FwdHVyZSIsIm9uTGF5b3V0IiwiY2hpbGRyZW4iLCJWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyIiwiZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzIiwicHJldlN0YXRlIiwiUHVyZUNvbXBvbmVudCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJmbGV4RGlyZWN0aW9uIl0sInNvdXJjZXMiOlsiVmlydHVhbGl6ZWRMaXN0Q2VsbFJlbmRlcmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtDZWxsUmVuZGVyZXJQcm9wcywgTGlzdFJlbmRlckl0ZW19IGZyb20gJy4vVmlydHVhbGl6ZWRMaXN0UHJvcHMnO1xuaW1wb3J0IHR5cGUge1xuICBGb2N1c0V2ZW50LFxuICBMYXlvdXRDaGFuZ2VFdmVudCxcbiAgU3R5bGVQcm9wLFxuICBWaWV3U3R5bGUsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCB7VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlcn0gZnJvbSAnLi9WaXJ0dWFsaXplZExpc3RDb250ZXh0LmpzJztcbmltcG9ydCBpbnZhcmlhbnQgZnJvbSAnaW52YXJpYW50JztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7aXNWYWxpZEVsZW1lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7U3R5bGVTaGVldCwgVmlld30gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuZXhwb3J0IHR5cGUgUHJvcHM8SXRlbVQ+ID0ge1xuICBDZWxsUmVuZGVyZXJDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxDZWxsUmVuZGVyZXJQcm9wczxJdGVtVD4+LFxuICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxcbiAgICBhbnkgfCB7aGlnaGxpZ2h0ZWQ6IGJvb2xlYW4sIGxlYWRpbmdJdGVtOiA/SXRlbVR9LFxuICA+LFxuICBMaXN0SXRlbUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuTWl4ZWRFbGVtZW50KSxcbiAgY2VsbEtleTogc3RyaW5nLFxuICBob3Jpem9udGFsOiA/Ym9vbGVhbixcbiAgaW5kZXg6IG51bWJlcixcbiAgaW52ZXJzaW9uU3R5bGU6IFN0eWxlUHJvcDxWaWV3U3R5bGU+LFxuICBpdGVtOiBJdGVtVCxcbiAgb25DZWxsTGF5b3V0PzogKFxuICAgIGV2ZW50OiBMYXlvdXRDaGFuZ2VFdmVudCxcbiAgICBjZWxsS2V5OiBzdHJpbmcsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgKSA9PiB2b2lkLFxuICBvbkNlbGxGb2N1c0NhcHR1cmU/OiAoY2VsbEtleTogc3RyaW5nKSA9PiB2b2lkLFxuICBvblVubW91bnQ6IChjZWxsS2V5OiBzdHJpbmcpID0+IHZvaWQsXG4gIG9uVXBkYXRlU2VwYXJhdG9yczogKFxuICAgIGNlbGxLZXlzOiBBcnJheTw/c3RyaW5nPixcbiAgICBwcm9wczogUGFydGlhbDxTZXBhcmF0b3JQcm9wczxJdGVtVD4+LFxuICApID0+IHZvaWQsXG4gIHByZXZDZWxsS2V5OiA/c3RyaW5nLFxuICByZW5kZXJJdGVtPzogP0xpc3RSZW5kZXJJdGVtPEl0ZW1UPixcbiAgLi4uXG59O1xuXG50eXBlIFNlcGFyYXRvclByb3BzPEl0ZW1UPiA9ICRSZWFkT25seTx7XG4gIGhpZ2hsaWdodGVkOiBib29sZWFuLFxuICBsZWFkaW5nSXRlbTogP0l0ZW1ULFxufT47XG5cbnR5cGUgU3RhdGU8SXRlbVQ+ID0ge1xuICBzZXBhcmF0b3JQcm9wczogU2VwYXJhdG9yUHJvcHM8SXRlbVQ+LFxuICAuLi5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENlbGxSZW5kZXJlcjxJdGVtVD4gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PFxuICBQcm9wczxJdGVtVD4sXG4gIFN0YXRlPEl0ZW1UPixcbj4ge1xuICBzdGF0ZTogU3RhdGU8SXRlbVQ+ID0ge1xuICAgIHNlcGFyYXRvclByb3BzOiB7XG4gICAgICBoaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICBsZWFkaW5nSXRlbTogdGhpcy5wcm9wcy5pdGVtLFxuICAgIH0sXG4gIH07XG5cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczxTdGF0aWNJdGVtVD4oXG4gICAgcHJvcHM6IFByb3BzPFN0YXRpY0l0ZW1UPixcbiAgICBwcmV2U3RhdGU6IFN0YXRlPFN0YXRpY0l0ZW1UPixcbiAgKTogP1N0YXRlPFN0YXRpY0l0ZW1UPiB7XG4gICAgaWYgKHByb3BzLml0ZW0gIT09IHByZXZTdGF0ZS5zZXBhcmF0b3JQcm9wcy5sZWFkaW5nSXRlbSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VwYXJhdG9yUHJvcHM6IHtcbiAgICAgICAgICAuLi5wcmV2U3RhdGUuc2VwYXJhdG9yUHJvcHMsXG4gICAgICAgICAgbGVhZGluZ0l0ZW06IHByb3BzLml0ZW0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFRPRE86IGNvbnNpZGVyIGZhY3RvcmluZyBzZXBhcmF0b3Igc3R1ZmYgb3V0IG9mIFZpcnR1YWxpemVkTGlzdCBpbnRvIEZsYXRMaXN0IHNpbmNlIGl0J3Mgbm90XG4gIC8vIHJldXNlZCBieSBTZWN0aW9uTGlzdCBhbmQgd2UgY2FuIGtlZXAgVmlydHVhbGl6ZWRMaXN0IHNpbXBsZXIuXG4gIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgX3NlcGFyYXRvcnMgPSB7XG4gICAgaGlnaGxpZ2h0OiAoKSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbEtleSwgcHJldkNlbGxLZXl9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMucHJvcHMub25VcGRhdGVTZXBhcmF0b3JzKFtjZWxsS2V5LCBwcmV2Q2VsbEtleV0sIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWQ6IHRydWUsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHVuaGlnaGxpZ2h0OiAoKSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbEtleSwgcHJldkNlbGxLZXl9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMucHJvcHMub25VcGRhdGVTZXBhcmF0b3JzKFtjZWxsS2V5LCBwcmV2Q2VsbEtleV0sIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWQ6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVQcm9wczogKFxuICAgICAgc2VsZWN0OiAnbGVhZGluZycgfCAndHJhaWxpbmcnLFxuICAgICAgbmV3UHJvcHM6IFNlcGFyYXRvclByb3BzPEl0ZW1UPixcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoXG4gICAgICAgIFtzZWxlY3QgPT09ICdsZWFkaW5nJyA/IHByZXZDZWxsS2V5IDogY2VsbEtleV0sXG4gICAgICAgIG5ld1Byb3BzLFxuICAgICAgKTtcbiAgICB9LFxuICB9O1xuXG4gIHVwZGF0ZVNlcGFyYXRvclByb3BzKG5ld1Byb3BzOiBTZXBhcmF0b3JQcm9wczxJdGVtVD4pIHtcbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+ICh7XG4gICAgICBzZXBhcmF0b3JQcm9wczogey4uLnN0YXRlLnNlcGFyYXRvclByb3BzLCAuLi5uZXdQcm9wc30sXG4gICAgfSkpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5vblVubW91bnQodGhpcy5wcm9wcy5jZWxsS2V5KTtcbiAgfVxuXG4gIF9vbkxheW91dCA9IChuYXRpdmVFdmVudDogTGF5b3V0Q2hhbmdlRXZlbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLnByb3BzLm9uQ2VsbExheW91dD8uKFxuICAgICAgbmF0aXZlRXZlbnQsXG4gICAgICB0aGlzLnByb3BzLmNlbGxLZXksXG4gICAgICB0aGlzLnByb3BzLmluZGV4LFxuICAgICk7XG4gIH07XG5cbiAgX29uQ2VsbEZvY3VzQ2FwdHVyZSA9IChlOiBGb2N1c0V2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkNlbGxGb2N1c0NhcHR1cmU/Lih0aGlzLnByb3BzLmNlbGxLZXkpO1xuICB9O1xuXG4gIF9yZW5kZXJFbGVtZW50KFxuICAgIHJlbmRlckl0ZW06ID9MaXN0UmVuZGVySXRlbTxJdGVtVD4sXG4gICAgTGlzdEl0ZW1Db21wb25lbnQ6IGFueSxcbiAgICBpdGVtOiBJdGVtVCxcbiAgICBpbmRleDogbnVtYmVyLFxuICApOiBSZWFjdC5Ob2RlIHtcbiAgICBpZiAocmVuZGVySXRlbSAmJiBMaXN0SXRlbUNvbXBvbmVudCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnVmlydHVhbGl6ZWRMaXN0OiBCb3RoIExpc3RJdGVtQ29tcG9uZW50IGFuZCByZW5kZXJJdGVtIHByb3BzIGFyZSBwcmVzZW50LiBMaXN0SXRlbUNvbXBvbmVudCB3aWxsIHRha2UnICtcbiAgICAgICAgICAnIHByZWNlZGVuY2Ugb3ZlciByZW5kZXJJdGVtLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChMaXN0SXRlbUNvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPExpc3RJdGVtQ29tcG9uZW50XG4gICAgICAgICAgaXRlbT17aXRlbX1cbiAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgc2VwYXJhdG9ycz17dGhpcy5fc2VwYXJhdG9yc31cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlbmRlckl0ZW0pIHtcbiAgICAgIHJldHVybiByZW5kZXJJdGVtKHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNlcGFyYXRvcnM6IHRoaXMuX3NlcGFyYXRvcnMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQoXG4gICAgICBmYWxzZSxcbiAgICAgICdWaXJ0dWFsaXplZExpc3Q6IEVpdGhlciBMaXN0SXRlbUNvbXBvbmVudCBvciByZW5kZXJJdGVtIHByb3BzIGFyZSByZXF1aXJlZCBidXQgbm9uZSB3ZXJlIGZvdW5kLicsXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBjb25zdCB7XG4gICAgICBDZWxsUmVuZGVyZXJDb21wb25lbnQsXG4gICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50LFxuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICBjZWxsS2V5LFxuICAgICAgaG9yaXpvbnRhbCxcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgb25DZWxsTGF5b3V0LFxuICAgICAgcmVuZGVySXRlbSxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcmVuZGVyRWxlbWVudChcbiAgICAgIHJlbmRlckl0ZW0sXG4gICAgICBMaXN0SXRlbUNvbXBvbmVudCxcbiAgICAgIGl0ZW0sXG4gICAgICBpbmRleCxcbiAgICApO1xuXG4gICAgLy8gTk9URTogdGhhdCB3aGVuIHRoaXMgaXMgYSBzdGlja3kgaGVhZGVyLCBgb25MYXlvdXRgIHdpbGwgZ2V0IGF1dG9tYXRpY2FsbHkgZXh0cmFjdGVkIGFuZFxuICAgIC8vIGNhbGxlZCBleHBsaWNpdGx5IGJ5IGBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyYC5cbiAgICBjb25zdCBpdGVtU2VwYXJhdG9yOiBSZWFjdC5Ob2RlID0gaXNWYWxpZEVsZW1lbnQoSXRlbVNlcGFyYXRvckNvbXBvbmVudClcbiAgICAgID8gLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV1cbiAgICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudFxuICAgICAgOiAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXVxuICAgICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50ICYmIChcbiAgICAgICAgICA8SXRlbVNlcGFyYXRvckNvbXBvbmVudCB7Li4udGhpcy5zdGF0ZS5zZXBhcmF0b3JQcm9wc30gLz5cbiAgICAgICAgKTtcbiAgICBjb25zdCBjZWxsU3R5bGUgPSBpbnZlcnNpb25TdHlsZVxuICAgICAgPyBob3Jpem9udGFsXG4gICAgICAgID8gW3N0eWxlcy5yb3dSZXZlcnNlLCBpbnZlcnNpb25TdHlsZV1cbiAgICAgICAgOiBbc3R5bGVzLmNvbHVtblJldmVyc2UsIGludmVyc2lvblN0eWxlXVxuICAgICAgOiBob3Jpem9udGFsXG4gICAgICAgID8gW3N0eWxlcy5yb3csIGludmVyc2lvblN0eWxlXVxuICAgICAgICA6IGludmVyc2lvblN0eWxlO1xuICAgIGNvbnN0IHJlc3VsdCA9ICFDZWxsUmVuZGVyZXJDb21wb25lbnQgPyAoXG4gICAgICA8Vmlld1xuICAgICAgICBzdHlsZT17Y2VsbFN0eWxlfVxuICAgICAgICBvbkZvY3VzQ2FwdHVyZT17dGhpcy5fb25DZWxsRm9jdXNDYXB0dXJlfVxuICAgICAgICB7Li4uKG9uQ2VsbExheW91dCAmJiB7b25MYXlvdXQ6IHRoaXMuX29uTGF5b3V0fSl9PlxuICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAge2l0ZW1TZXBhcmF0b3J9XG4gICAgICA8L1ZpZXc+XG4gICAgKSA6IChcbiAgICAgIDxDZWxsUmVuZGVyZXJDb21wb25lbnRcbiAgICAgICAgY2VsbEtleT17Y2VsbEtleX1cbiAgICAgICAgaW5kZXg9e2luZGV4fVxuICAgICAgICBpdGVtPXtpdGVtfVxuICAgICAgICBzdHlsZT17Y2VsbFN0eWxlfVxuICAgICAgICBvbkZvY3VzQ2FwdHVyZT17dGhpcy5fb25DZWxsRm9jdXNDYXB0dXJlfVxuICAgICAgICB7Li4uKG9uQ2VsbExheW91dCAmJiB7b25MYXlvdXQ6IHRoaXMuX29uTGF5b3V0fSl9PlxuICAgICAgICB7ZWxlbWVudH1cbiAgICAgICAge2l0ZW1TZXBhcmF0b3J9XG4gICAgICA8L0NlbGxSZW5kZXJlckNvbXBvbmVudD5cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyIGNlbGxLZXk9e3RoaXMucHJvcHMuY2VsbEtleX0+XG4gICAgICAgIHtyZXN1bHR9XG4gICAgICA8L1ZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXI+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHJvdzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICB9LFxuICByb3dSZXZlcnNlOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3Jvdy1yZXZlcnNlJyxcbiAgfSxcbiAgY29sdW1uUmV2ZXJzZToge1xuICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gIH0sXG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQWtCQSxJQUFBQSx1QkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBQyx1QkFBQSxDQUFBSixPQUFBO0FBQStCLElBQUFLLEtBQUEsR0FBQUYsTUFBQTtBQUUvQixJQUFBRyxZQUFBLEdBQUFOLE9BQUE7QUFBOEMsSUFBQU8sV0FBQSxHQUFBUCxPQUFBO0FBQUEsSUF1Q3pCUSxZQUFZLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxhQUFBQyxvQkFBQTtFQUFBLFNBQUFILGFBQUE7SUFBQSxJQUFBSSxLQUFBO0lBQUEsSUFBQUMsZ0JBQUEsQ0FBQUgsT0FBQSxRQUFBRixZQUFBO0lBQUEsU0FBQU0sSUFBQSxHQUFBQyxTQUFBLENBQUFDLE1BQUEsRUFBQUMsSUFBQSxPQUFBQyxLQUFBLENBQUFKLElBQUEsR0FBQUssSUFBQSxNQUFBQSxJQUFBLEdBQUFMLElBQUEsRUFBQUssSUFBQTtNQUFBRixJQUFBLENBQUFFLElBQUEsSUFBQUosU0FBQSxDQUFBSSxJQUFBO0lBQUE7SUFBQVAsS0FBQSxPQUFBUSxXQUFBLENBQUFWLE9BQUEsUUFBQUYsWUFBQSxLQUFBYSxNQUFBLENBQUFKLElBQUE7SUFBQUwsS0FBQSxDQUkvQlUsS0FBSyxHQUFpQjtNQUNwQkMsY0FBYyxFQUFFO1FBQ2RDLFdBQVcsRUFBRSxLQUFLO1FBQ2xCQyxXQUFXLEVBQUViLEtBQUEsQ0FBS2MsS0FBSyxDQUFDQztNQUMxQjtJQUNGLENBQUM7SUFBQWYsS0FBQSxDQW9CRGdCLFdBQVcsR0FBRztNQUNaQyxTQUFTLEVBQUUsU0FBWEEsU0FBU0EsQ0FBQSxFQUFRO1FBQ2YsSUFBQUMsV0FBQSxHQUErQmxCLEtBQUEsQ0FBS2MsS0FBSztVQUFsQ0ssT0FBTyxHQUFBRCxXQUFBLENBQVBDLE9BQU87VUFBRUMsV0FBVyxHQUFBRixXQUFBLENBQVhFLFdBQVc7UUFDM0JwQixLQUFBLENBQUtjLEtBQUssQ0FBQ08sa0JBQWtCLENBQUMsQ0FBQ0YsT0FBTyxFQUFFQyxXQUFXLENBQUMsRUFBRTtVQUNwRFIsV0FBVyxFQUFFO1FBQ2YsQ0FBQyxDQUFDO01BQ0osQ0FBQztNQUNEVSxXQUFXLEVBQUUsU0FBYkEsV0FBV0EsQ0FBQSxFQUFRO1FBQ2pCLElBQUFDLFlBQUEsR0FBK0J2QixLQUFBLENBQUtjLEtBQUs7VUFBbENLLE9BQU8sR0FBQUksWUFBQSxDQUFQSixPQUFPO1VBQUVDLFdBQVcsR0FBQUcsWUFBQSxDQUFYSCxXQUFXO1FBQzNCcEIsS0FBQSxDQUFLYyxLQUFLLENBQUNPLGtCQUFrQixDQUFDLENBQUNGLE9BQU8sRUFBRUMsV0FBVyxDQUFDLEVBQUU7VUFDcERSLFdBQVcsRUFBRTtRQUNmLENBQUMsQ0FBQztNQUNKLENBQUM7TUFDRFksV0FBVyxFQUFFLFNBQWJBLFdBQVdBLENBQ1RDLE1BQThCLEVBQzlCQyxRQUErQixFQUM1QjtRQUNILElBQUFDLFlBQUEsR0FBK0IzQixLQUFBLENBQUtjLEtBQUs7VUFBbENLLE9BQU8sR0FBQVEsWUFBQSxDQUFQUixPQUFPO1VBQUVDLFdBQVcsR0FBQU8sWUFBQSxDQUFYUCxXQUFXO1FBQzNCcEIsS0FBQSxDQUFLYyxLQUFLLENBQUNPLGtCQUFrQixDQUMzQixDQUFDSSxNQUFNLEtBQUssU0FBUyxHQUFHTCxXQUFXLEdBQUdELE9BQU8sQ0FBQyxFQUM5Q08sUUFDRixDQUFDO01BQ0g7SUFDRixDQUFDO0lBQUExQixLQUFBLENBWUQ0QixTQUFTLEdBQUcsVUFBQ0MsV0FBOEIsRUFBVztNQUNwRDdCLEtBQUEsQ0FBS2MsS0FBSyxDQUFDZ0IsWUFBWSxZQUF2QjlCLEtBQUEsQ0FBS2MsS0FBSyxDQUFDZ0IsWUFBWSxDQUNyQkQsV0FBVyxFQUNYN0IsS0FBQSxDQUFLYyxLQUFLLENBQUNLLE9BQU8sRUFDbEJuQixLQUFBLENBQUtjLEtBQUssQ0FBQ2lCLEtBQ2IsQ0FBQztJQUNILENBQUM7SUFBQS9CLEtBQUEsQ0FFRGdDLG1CQUFtQixHQUFHLFVBQUNDLENBQWEsRUFBVztNQUM3Q2pDLEtBQUEsQ0FBS2MsS0FBSyxDQUFDb0Isa0JBQWtCLFlBQTdCbEMsS0FBQSxDQUFLYyxLQUFLLENBQUNvQixrQkFBa0IsQ0FBR2xDLEtBQUEsQ0FBS2MsS0FBSyxDQUFDSyxPQUFPLENBQUM7SUFDckQsQ0FBQztJQUFBLE9BQUFuQixLQUFBO0VBQUE7RUFBQSxJQUFBbUMsVUFBQSxDQUFBckMsT0FBQSxFQUFBRixZQUFBLEVBQUFHLG9CQUFBO0VBQUEsV0FBQXFDLGFBQUEsQ0FBQXRDLE9BQUEsRUFBQUYsWUFBQTtJQUFBeUMsR0FBQTtJQUFBQyxLQUFBLEVBcEJELFNBQUFDLG9CQUFvQkEsQ0FBQ2IsUUFBK0IsRUFBRTtNQUNwRCxJQUFJLENBQUNjLFFBQVEsQ0FBQyxVQUFBOUIsS0FBSztRQUFBLE9BQUs7VUFDdEJDLGNBQWMsRUFBQThCLE1BQUEsQ0FBQUMsTUFBQSxLQUFNaEMsS0FBSyxDQUFDQyxjQUFjLEVBQUtlLFFBQVE7UUFDdkQsQ0FBQztNQUFBLENBQUMsQ0FBQztJQUNMO0VBQUM7SUFBQVcsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUssb0JBQW9CQSxDQUFBLEVBQUc7TUFDckIsSUFBSSxDQUFDN0IsS0FBSyxDQUFDOEIsU0FBUyxDQUFDLElBQUksQ0FBQzlCLEtBQUssQ0FBQ0ssT0FBTyxDQUFDO0lBQzFDO0VBQUM7SUFBQWtCLEdBQUE7SUFBQUMsS0FBQSxFQWNELFNBQUFPLGNBQWNBLENBQ1pDLFVBQWtDLEVBQ2xDQyxpQkFBc0IsRUFDdEJoQyxJQUFXLEVBQ1hnQixLQUFhLEVBQ0Q7TUFDWixJQUFJZSxVQUFVLElBQUlDLGlCQUFpQixFQUFFO1FBQ25DQyxPQUFPLENBQUNDLElBQUksQ0FDVix1R0FBdUcsR0FDckcsOEJBQ0osQ0FBQztNQUNIO01BRUEsSUFBSUYsaUJBQWlCLEVBQUU7UUFDckIsT0FDRSxJQUFBcEQsV0FBQSxDQUFBdUQsR0FBQSxFQUFDSCxpQkFBaUI7VUFDaEJoQyxJQUFJLEVBQUVBLElBQUs7VUFDWGdCLEtBQUssRUFBRUEsS0FBTTtVQUNib0IsVUFBVSxFQUFFLElBQUksQ0FBQ25DO1FBQVksQ0FDOUIsQ0FBQztNQUVOO01BRUEsSUFBSThCLFVBQVUsRUFBRTtRQUNkLE9BQU9BLFVBQVUsQ0FBQztVQUNoQi9CLElBQUksRUFBSkEsSUFBSTtVQUNKZ0IsS0FBSyxFQUFMQSxLQUFLO1VBQ0xvQixVQUFVLEVBQUUsSUFBSSxDQUFDbkM7UUFDbkIsQ0FBQyxDQUFDO01BQ0o7TUFFQSxJQUFBb0Msa0JBQVMsRUFDUCxLQUFLLEVBQ0wsaUdBQ0YsQ0FBQztJQUNIO0VBQUM7SUFBQWYsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQWUsTUFBTUEsQ0FBQSxFQUFlO01BQ25CLElBQUFDLFlBQUEsR0FXSSxJQUFJLENBQUN4QyxLQUFLO1FBVlp5QyxxQkFBcUIsR0FBQUQsWUFBQSxDQUFyQkMscUJBQXFCO1FBQ3JCQyxzQkFBc0IsR0FBQUYsWUFBQSxDQUF0QkUsc0JBQXNCO1FBQ3RCVCxpQkFBaUIsR0FBQU8sWUFBQSxDQUFqQlAsaUJBQWlCO1FBQ2pCNUIsT0FBTyxHQUFBbUMsWUFBQSxDQUFQbkMsT0FBTztRQUNQc0MsVUFBVSxHQUFBSCxZQUFBLENBQVZHLFVBQVU7UUFDVjFDLElBQUksR0FBQXVDLFlBQUEsQ0FBSnZDLElBQUk7UUFDSmdCLEtBQUssR0FBQXVCLFlBQUEsQ0FBTHZCLEtBQUs7UUFDTDJCLGNBQWMsR0FBQUosWUFBQSxDQUFkSSxjQUFjO1FBQ2Q1QixZQUFZLEdBQUF3QixZQUFBLENBQVp4QixZQUFZO1FBQ1pnQixVQUFVLEdBQUFRLFlBQUEsQ0FBVlIsVUFBVTtNQUVaLElBQU1hLE9BQU8sR0FBRyxJQUFJLENBQUNkLGNBQWMsQ0FDakNDLFVBQVUsRUFDVkMsaUJBQWlCLEVBQ2pCaEMsSUFBSSxFQUNKZ0IsS0FDRixDQUFDO01BSUQsSUFBTTZCLGFBQXlCLEdBQUcsSUFBQUMscUJBQWMsRUFBQ0wsc0JBQXNCLENBQUMsR0FFcEVBLHNCQUFzQixHQUV0QkEsc0JBQXNCLElBQ3BCLElBQUE3RCxXQUFBLENBQUF1RCxHQUFBLEVBQUNNLHNCQUFzQixFQUFBZixNQUFBLENBQUFDLE1BQUEsS0FBSyxJQUFJLENBQUNoQyxLQUFLLENBQUNDLGNBQWMsQ0FBRyxDQUN6RDtNQUNMLElBQU1tRCxTQUFTLEdBQUdKLGNBQWMsR0FDNUJELFVBQVUsR0FDUixDQUFDTSxNQUFNLENBQUNDLFVBQVUsRUFBRU4sY0FBYyxDQUFDLEdBQ25DLENBQUNLLE1BQU0sQ0FBQ0UsYUFBYSxFQUFFUCxjQUFjLENBQUMsR0FDeENELFVBQVUsR0FDUixDQUFDTSxNQUFNLENBQUNHLEdBQUcsRUFBRVIsY0FBYyxDQUFDLEdBQzVCQSxjQUFjO01BQ3BCLElBQU1TLE1BQU0sR0FBRyxDQUFDWixxQkFBcUIsR0FDbkMsSUFBQTVELFdBQUEsQ0FBQXlFLElBQUEsRUFBQzFFLFlBQUEsQ0FBQTJFLElBQUksRUFBQTVCLE1BQUEsQ0FBQUMsTUFBQTtRQUNINEIsS0FBSyxFQUFFUixTQUFVO1FBQ2pCUyxjQUFjLEVBQUUsSUFBSSxDQUFDdkM7TUFBb0IsR0FDcENGLFlBQVksSUFBSTtRQUFDMEMsUUFBUSxFQUFFLElBQUksQ0FBQzVDO01BQVMsQ0FBQztRQUFBNkMsUUFBQSxHQUM5Q2QsT0FBTyxFQUNQQyxhQUFhO01BQUEsRUFDVixDQUFDLEdBRVAsSUFBQWpFLFdBQUEsQ0FBQXlFLElBQUEsRUFBQ2IscUJBQXFCLEVBQUFkLE1BQUEsQ0FBQUMsTUFBQTtRQUNwQnZCLE9BQU8sRUFBRUEsT0FBUTtRQUNqQlksS0FBSyxFQUFFQSxLQUFNO1FBQ2JoQixJQUFJLEVBQUVBLElBQUs7UUFDWHVELEtBQUssRUFBRVIsU0FBVTtRQUNqQlMsY0FBYyxFQUFFLElBQUksQ0FBQ3ZDO01BQW9CLEdBQ3BDRixZQUFZLElBQUk7UUFBQzBDLFFBQVEsRUFBRSxJQUFJLENBQUM1QztNQUFTLENBQUM7UUFBQTZDLFFBQUEsR0FDOUNkLE9BQU8sRUFDUEMsYUFBYTtNQUFBLEVBQ08sQ0FDeEI7TUFFRCxPQUNFLElBQUFqRSxXQUFBLENBQUF1RCxHQUFBLEVBQUMvRCx1QkFBQSxDQUFBdUYsa0NBQWtDO1FBQUN2RCxPQUFPLEVBQUUsSUFBSSxDQUFDTCxLQUFLLENBQUNLLE9BQVE7UUFBQXNELFFBQUEsRUFDN0ROO01BQU0sQ0FDMkIsQ0FBQztJQUV6QztFQUFDO0lBQUE5QixHQUFBO0lBQUFDLEtBQUEsRUFwS0QsU0FBT3FDLHdCQUF3QkEsQ0FDN0I3RCxLQUF5QixFQUN6QjhELFNBQTZCLEVBQ1I7TUFDckIsSUFBSTlELEtBQUssQ0FBQ0MsSUFBSSxLQUFLNkQsU0FBUyxDQUFDakUsY0FBYyxDQUFDRSxXQUFXLEVBQUU7UUFDdkQsT0FBTztVQUNMRixjQUFjLEVBQUE4QixNQUFBLENBQUFDLE1BQUEsS0FDVGtDLFNBQVMsQ0FBQ2pFLGNBQWM7WUFDM0JFLFdBQVcsRUFBRUMsS0FBSyxDQUFDQztVQUFJO1FBRTNCLENBQUM7TUFDSDtNQUNBLE9BQU8sSUFBSTtJQUNiO0VBQUM7QUFBQSxFQXhCOEN0QixLQUFLLENBQUNvRixhQUFhO0FBa0xwRSxJQUFNZCxNQUFNLEdBQUdlLHVCQUFVLENBQUNDLE1BQU0sQ0FBQztFQUMvQmIsR0FBRyxFQUFFO0lBQ0hjLGFBQWEsRUFBRTtFQUNqQixDQUFDO0VBQ0RoQixVQUFVLEVBQUU7SUFDVmdCLGFBQWEsRUFBRTtFQUNqQixDQUFDO0VBQ0RmLGFBQWEsRUFBRTtJQUNiZSxhQUFhLEVBQUU7RUFDakI7QUFDRixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=