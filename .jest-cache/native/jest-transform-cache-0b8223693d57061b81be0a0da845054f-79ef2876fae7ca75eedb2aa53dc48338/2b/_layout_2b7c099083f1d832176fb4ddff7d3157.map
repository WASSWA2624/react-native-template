{"version":3,"names":["React","useEffect","useRef","Slot","useRouter","useAuthGuard","AuthFrame","jsx","_jsx","cov_giatckpvh","s","AuthLayout","f","router","_ref","skipRedirect","authenticated","hasRedirected","b","current","replace","testID","children"],"sources":["_layout.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Slot, useRouter } from 'expo-router';\r\nimport { useAuthGuard } from '@navigation/guards';\r\nimport { AuthFrame } from '@platform/layouts';\r\n\r\n/**\r\n * Auth Group Layout\r\n * \r\n * Layout wrapper for authentication routes (login, register, etc.).\r\n * \r\n * Per app-router.mdc:\r\n * - Layouts use `_layout.jsx`, default exports, `<Slot />` for child routes\r\n * - Guard placement: guards in layouts, not screens\r\n * \r\n * This layout redirects authenticated users away from auth routes (e.g., login when already logged in).\r\n * Per Step 7.14: Uses useAuthGuard hook with skipRedirect option to get auth state,\r\n * then handles redirect of authenticated users to home route.\r\n */\r\nconst AuthLayout = () => {\r\n  const router = useRouter();\r\n  const { authenticated } = useAuthGuard({ skipRedirect: true });\r\n  \r\n  // Use ref to track if redirect has been performed to prevent multiple redirects\r\n  const hasRedirected = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    // Redirect authenticated users to home route\r\n    if (authenticated && !hasRedirected.current) {\r\n      hasRedirected.current = true;\r\n      router.replace('/home');\r\n    } else if (!authenticated) {\r\n      // Reset redirect flag when unauthenticated\r\n      hasRedirected.current = false;\r\n    }\r\n  }, [authenticated, router]);\r\n  \r\n  return (\r\n    <AuthFrame testID=\"auth-route-layout\">\r\n      <Slot />\r\n    </AuthFrame>\r\n  );\r\n};\r\n\r\nexport default AuthLayout;\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,SAASC,IAAI,EAAEC,SAAS,QAAQ,aAAa;AAC7C,SAASC,YAAY;AACrB,SAASC,SAAS;AAA4B,SAAAC,GAAA,IAAAC,IAAA;AAAAC,aAAA,GAAAC,CAAA;AAe9C,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EAAAF,aAAA,GAAAG,CAAA;EACvB,IAAMC,MAAM,IAAAJ,aAAA,GAAAC,CAAA,OAAGN,SAAS,CAAC,CAAC;EAC1B,IAAAU,IAAA,IAAAL,aAAA,GAAAC,CAAA,OAA0BL,YAAY,CAAC;MAAEU,YAAY,EAAE;IAAK,CAAC,CAAC;IAAtDC,aAAa,GAAAF,IAAA,CAAbE,aAAa;EAGrB,IAAMC,aAAa,IAAAR,aAAA,GAAAC,CAAA,OAAGR,MAAM,CAAC,KAAK,CAAC;EAACO,aAAA,GAAAC,CAAA;EAEpCT,SAAS,CAAC,YAAM;IAAAQ,aAAA,GAAAG,CAAA;IAAAH,aAAA,GAAAC,CAAA;IAEd,IAAI,CAAAD,aAAA,GAAAS,CAAA,UAAAF,aAAa,MAAAP,aAAA,GAAAS,CAAA,UAAI,CAACD,aAAa,CAACE,OAAO,GAAE;MAAAV,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAC,CAAA;MAC3CO,aAAa,CAACE,OAAO,GAAG,IAAI;MAACV,aAAA,GAAAC,CAAA;MAC7BG,MAAM,CAACO,OAAO,CAAC,OAAO,CAAC;IACzB,CAAC,MAAM;MAAAX,aAAA,GAAAS,CAAA;MAAAT,aAAA,GAAAC,CAAA;MAAA,IAAI,CAACM,aAAa,EAAE;QAAAP,aAAA,GAAAS,CAAA;QAAAT,aAAA,GAAAC,CAAA;QAEzBO,aAAa,CAACE,OAAO,GAAG,KAAK;MAC/B,CAAC;QAAAV,aAAA,GAAAS,CAAA;MAAA;IAAD;EACF,CAAC,EAAE,CAACF,aAAa,EAAEH,MAAM,CAAC,CAAC;EAACJ,aAAA,GAAAC,CAAA;EAE5B,OACEF,IAAA,CAACF,SAAS;IAACe,MAAM,EAAC,mBAAmB;IAAAC,QAAA,EACnCd,IAAA,CAACL,IAAI,IAAE;EAAC,CACC,CAAC;AAEhB,CAAC;AAED,eAAeQ,UAAU","ignoreList":[]}