51d24aa7e903558aa63fe69c69dc5a16
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _reactRedux = require("react-redux");
var _selectors = require("../store/selectors");
var normalizeRole = function normalizeRole(role) {
  if (!role) return null;
  return String(role).trim().toLowerCase();
};
var normalizeRoles = function normalizeRoles(roles) {
  if (!roles) return [];
  var list = Array.isArray(roles) ? roles : [roles];
  return list.map(normalizeRole).filter(Boolean);
};
var useAuth = function useAuth() {
  var isAuthenticated = (0, _reactRedux.useSelector)(_selectors.selectIsAuthenticated);
  var user = (0, _reactRedux.useSelector)(_selectors.selectUser);
  var roles = (0, _react.useMemo)(function () {
    var userRoles = (user == null ? void 0 : user.roles) || (user == null ? void 0 : user.role) || [];
    return normalizeRoles(userRoles);
  }, [user]);
  return {
    isAuthenticated: Boolean(isAuthenticated),
    user: user || null,
    roles: roles,
    role: roles[0] || null
  };
};
var _default = exports.default = useAuth;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3JlYWN0UmVkdXgiLCJfc2VsZWN0b3JzIiwibm9ybWFsaXplUm9sZSIsInJvbGUiLCJTdHJpbmciLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJub3JtYWxpemVSb2xlcyIsInJvbGVzIiwibGlzdCIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImZpbHRlciIsIkJvb2xlYW4iLCJ1c2VBdXRoIiwiaXNBdXRoZW50aWNhdGVkIiwidXNlU2VsZWN0b3IiLCJzZWxlY3RJc0F1dGhlbnRpY2F0ZWQiLCJ1c2VyIiwic2VsZWN0VXNlciIsInVzZU1lbW8iLCJ1c2VyUm9sZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsidXNlQXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogdXNlQXV0aCBIb29rXHJcbiAqIFByb3ZpZGVzIG1pbmltYWwgYXV0aCBzdGF0ZSBmcm9tIFJlZHV4IGZvciBVSSBndWFyZHMvbmF2aWdhdGlvbi5cclxuICogRmlsZTogdXNlQXV0aC5qc1xyXG4gKi9cclxuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlU2VsZWN0b3IgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCB7IHNlbGVjdElzQXV0aGVudGljYXRlZCwgc2VsZWN0VXNlciB9IGZyb20gJ0BzdG9yZS9zZWxlY3RvcnMnO1xyXG5cclxuY29uc3Qgbm9ybWFsaXplUm9sZSA9IChyb2xlKSA9PiB7XHJcbiAgaWYgKCFyb2xlKSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gU3RyaW5nKHJvbGUpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG59O1xyXG5cclxuY29uc3Qgbm9ybWFsaXplUm9sZXMgPSAocm9sZXMpID0+IHtcclxuICBpZiAoIXJvbGVzKSByZXR1cm4gW107XHJcbiAgY29uc3QgbGlzdCA9IEFycmF5LmlzQXJyYXkocm9sZXMpID8gcm9sZXMgOiBbcm9sZXNdO1xyXG4gIHJldHVybiBsaXN0Lm1hcChub3JtYWxpemVSb2xlKS5maWx0ZXIoQm9vbGVhbik7XHJcbn07XHJcblxyXG4vKipcclxuICogdXNlQXV0aCBob29rXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IGF1dGggc3RhdGUgYW5kIG5vcm1hbGl6ZWQgcm9sZXNcclxuICovXHJcbmNvbnN0IHVzZUF1dGggPSAoKSA9PiB7XHJcbiAgY29uc3QgaXNBdXRoZW50aWNhdGVkID0gdXNlU2VsZWN0b3Ioc2VsZWN0SXNBdXRoZW50aWNhdGVkKTtcclxuICBjb25zdCB1c2VyID0gdXNlU2VsZWN0b3Ioc2VsZWN0VXNlcik7XHJcblxyXG4gIGNvbnN0IHJvbGVzID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyUm9sZXMgPSB1c2VyPy5yb2xlcyB8fCB1c2VyPy5yb2xlIHx8IFtdO1xyXG4gICAgcmV0dXJuIG5vcm1hbGl6ZVJvbGVzKHVzZXJSb2xlcyk7XHJcbiAgfSwgW3VzZXJdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzQXV0aGVudGljYXRlZDogQm9vbGVhbihpc0F1dGhlbnRpY2F0ZWQpLFxyXG4gICAgdXNlcjogdXNlciB8fCBudWxsLFxyXG4gICAgcm9sZXMsXHJcbiAgICByb2xlOiByb2xlc1swXSB8fCBudWxsLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VBdXRoO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7QUFLQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxVQUFBLEdBQUFGLE9BQUE7QUFFQSxJQUFNRyxhQUFhLEdBQUcsU0FBaEJBLGFBQWFBLENBQUlDLElBQUksRUFBSztFQUM5QixJQUFJLENBQUNBLElBQUksRUFBRSxPQUFPLElBQUk7RUFDdEIsT0FBT0MsTUFBTSxDQUFDRCxJQUFJLENBQUMsQ0FBQ0UsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7QUFDMUMsQ0FBQztBQUVELElBQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBY0EsQ0FBSUMsS0FBSyxFQUFLO0VBQ2hDLElBQUksQ0FBQ0EsS0FBSyxFQUFFLE9BQU8sRUFBRTtFQUNyQixJQUFNQyxJQUFJLEdBQUdDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDSCxLQUFLLENBQUMsR0FBR0EsS0FBSyxHQUFHLENBQUNBLEtBQUssQ0FBQztFQUNuRCxPQUFPQyxJQUFJLENBQUNHLEdBQUcsQ0FBQ1YsYUFBYSxDQUFDLENBQUNXLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDO0FBQ2hELENBQUM7QUFNRCxJQUFNQyxPQUFPLEdBQUcsU0FBVkEsT0FBT0EsQ0FBQSxFQUFTO0VBQ3BCLElBQU1DLGVBQWUsR0FBRyxJQUFBQyx1QkFBVyxFQUFDQyxnQ0FBcUIsQ0FBQztFQUMxRCxJQUFNQyxJQUFJLEdBQUcsSUFBQUYsdUJBQVcsRUFBQ0cscUJBQVUsQ0FBQztFQUVwQyxJQUFNWixLQUFLLEdBQUcsSUFBQWEsY0FBTyxFQUFDLFlBQU07SUFDMUIsSUFBTUMsU0FBUyxHQUFHLENBQUFILElBQUksb0JBQUpBLElBQUksQ0FBRVgsS0FBSyxNQUFJVyxJQUFJLG9CQUFKQSxJQUFJLENBQUVoQixJQUFJLEtBQUksRUFBRTtJQUNqRCxPQUFPSSxjQUFjLENBQUNlLFNBQVMsQ0FBQztFQUNsQyxDQUFDLEVBQUUsQ0FBQ0gsSUFBSSxDQUFDLENBQUM7RUFFVixPQUFPO0lBQ0xILGVBQWUsRUFBRUYsT0FBTyxDQUFDRSxlQUFlLENBQUM7SUFDekNHLElBQUksRUFBRUEsSUFBSSxJQUFJLElBQUk7SUFDbEJYLEtBQUssRUFBTEEsS0FBSztJQUNMTCxJQUFJLEVBQUVLLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSTtFQUNwQixDQUFDO0FBQ0gsQ0FBQztBQUFDLElBQUFlLFFBQUEsR0FBQUMsT0FBQSxDQUFBQyxPQUFBLEdBRWFWLE9BQU8iLCJpZ25vcmVMaXN0IjpbXX0=