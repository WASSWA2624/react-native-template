3f6e296887f8980901f0942631552413
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createCrudApi = exports.buildQueryString = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _client = require("./client");
var buildQueryString = exports.buildQueryString = function buildQueryString() {
  var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  if (!params || typeof params !== 'object') return '';
  var entries = Object.entries(params).filter(function (_ref) {
    var _ref2 = (0, _slicedToArray2.default)(_ref, 2),
      value = _ref2[1];
    return value !== undefined && value !== null;
  });
  if (!entries.length) return '';
  var searchParams = new URLSearchParams();
  entries.forEach(function (_ref3) {
    var _ref4 = (0, _slicedToArray2.default)(_ref3, 2),
      key = _ref4[0],
      value = _ref4[1];
    if (Array.isArray(value)) {
      value.forEach(function (item) {
        return searchParams.append(key, String(item));
      });
    } else {
      searchParams.append(key, String(value));
    }
  });
  var query = searchParams.toString();
  return query ? `?${query}` : '';
};
var ensureEndpoint = function ensureEndpoint(value, name) {
  if (!value) {
    throw new Error(`Missing endpoint: ${name}`);
  }
  return value;
};
var createCrudApi = exports.createCrudApi = function createCrudApi(endpoints) {
  var listUrl = ensureEndpoint((endpoints == null ? void 0 : endpoints.LIST) || (endpoints == null ? void 0 : endpoints.CREATE), 'LIST');
  var createUrl = ensureEndpoint((endpoints == null ? void 0 : endpoints.CREATE) || (endpoints == null ? void 0 : endpoints.LIST), 'CREATE');
  var getUrl = ensureEndpoint(endpoints == null ? void 0 : endpoints.GET, 'GET');
  var updateUrl = ensureEndpoint(endpoints == null ? void 0 : endpoints.UPDATE, 'UPDATE');
  var deleteUrl = ensureEndpoint(endpoints == null ? void 0 : endpoints.DELETE, 'DELETE');
  return {
    list: function list() {
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      return (0, _client.apiClient)({
        url: `${listUrl}${buildQueryString(params)}`,
        method: 'GET'
      });
    },
    get: function get(id) {
      return (0, _client.apiClient)({
        url: getUrl(id),
        method: 'GET'
      });
    },
    create: function create(payload) {
      return (0, _client.apiClient)({
        url: createUrl,
        method: 'POST',
        body: payload
      });
    },
    update: function update(id, payload) {
      return (0, _client.apiClient)({
        url: updateUrl(id),
        method: 'PUT',
        body: payload
      });
    },
    remove: function remove(id) {
      return (0, _client.apiClient)({
        url: deleteUrl(id),
        method: 'DELETE'
      });
    }
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY2xpZW50IiwicmVxdWlyZSIsImJ1aWxkUXVlcnlTdHJpbmciLCJleHBvcnRzIiwicGFyYW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZW50cmllcyIsIk9iamVjdCIsImZpbHRlciIsIl9yZWYiLCJfcmVmMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJ2YWx1ZSIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImZvckVhY2giLCJfcmVmMyIsIl9yZWY0Iiwia2V5IiwiQXJyYXkiLCJpc0FycmF5IiwiaXRlbSIsImFwcGVuZCIsIlN0cmluZyIsInF1ZXJ5IiwidG9TdHJpbmciLCJlbnN1cmVFbmRwb2ludCIsIm5hbWUiLCJFcnJvciIsImNyZWF0ZUNydWRBcGkiLCJlbmRwb2ludHMiLCJsaXN0VXJsIiwiTElTVCIsIkNSRUFURSIsImNyZWF0ZVVybCIsImdldFVybCIsIkdFVCIsInVwZGF0ZVVybCIsIlVQREFURSIsImRlbGV0ZVVybCIsIkRFTEVURSIsImxpc3QiLCJhcGlDbGllbnQiLCJ1cmwiLCJtZXRob2QiLCJnZXQiLCJpZCIsImNyZWF0ZSIsInBheWxvYWQiLCJib2R5IiwidXBkYXRlIiwicmVtb3ZlIl0sInNvdXJjZXMiOlsiY3J1ZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ1JVRCBBUEkgRmFjdG9yeVxyXG4gKiBSZXVzYWJsZSBBUEkgaGVscGVycyBmb3IgQ1JVRCBlbmRwb2ludHNcclxuICogRmlsZTogY3J1ZC5qc1xyXG4gKi9cclxuaW1wb3J0IHsgYXBpQ2xpZW50IH0gZnJvbSAnLi9jbGllbnQnO1xyXG5cclxuY29uc3QgYnVpbGRRdWVyeVN0cmluZyA9IChwYXJhbXMgPSB7fSkgPT4ge1xyXG4gIGlmICghcGFyYW1zIHx8IHR5cGVvZiBwYXJhbXMgIT09ICdvYmplY3QnKSByZXR1cm4gJyc7XHJcbiAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZmlsdGVyKChbLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpO1xyXG4gIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiAnJztcclxuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgZW50cmllcy5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICB2YWx1ZS5mb3JFYWNoKChpdGVtKSA9PiBzZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgU3RyaW5nKGl0ZW0pKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgY29uc3QgcXVlcnkgPSBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcclxuICByZXR1cm4gcXVlcnkgPyBgPyR7cXVlcnl9YCA6ICcnO1xyXG59O1xyXG5cclxuY29uc3QgZW5zdXJlRW5kcG9pbnQgPSAodmFsdWUsIG5hbWUpID0+IHtcclxuICBpZiAoIXZhbHVlKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZW5kcG9pbnQ6ICR7bmFtZX1gKTtcclxuICB9XHJcbiAgcmV0dXJuIHZhbHVlO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ3J1ZEFwaSA9IChlbmRwb2ludHMpID0+IHtcclxuICBjb25zdCBsaXN0VXJsID0gZW5zdXJlRW5kcG9pbnQoZW5kcG9pbnRzPy5MSVNUIHx8IGVuZHBvaW50cz8uQ1JFQVRFLCAnTElTVCcpO1xyXG4gIGNvbnN0IGNyZWF0ZVVybCA9IGVuc3VyZUVuZHBvaW50KGVuZHBvaW50cz8uQ1JFQVRFIHx8IGVuZHBvaW50cz8uTElTVCwgJ0NSRUFURScpO1xyXG4gIGNvbnN0IGdldFVybCA9IGVuc3VyZUVuZHBvaW50KGVuZHBvaW50cz8uR0VULCAnR0VUJyk7XHJcbiAgY29uc3QgdXBkYXRlVXJsID0gZW5zdXJlRW5kcG9pbnQoZW5kcG9pbnRzPy5VUERBVEUsICdVUERBVEUnKTtcclxuICBjb25zdCBkZWxldGVVcmwgPSBlbnN1cmVFbmRwb2ludChlbmRwb2ludHM/LkRFTEVURSwgJ0RFTEVURScpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgbGlzdDogKHBhcmFtcyA9IHt9KSA9PlxyXG4gICAgICBhcGlDbGllbnQoe1xyXG4gICAgICAgIHVybDogYCR7bGlzdFVybH0ke2J1aWxkUXVlcnlTdHJpbmcocGFyYW1zKX1gLFxyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIH0pLFxyXG4gICAgZ2V0OiAoaWQpID0+XHJcbiAgICAgIGFwaUNsaWVudCh7XHJcbiAgICAgICAgdXJsOiBnZXRVcmwoaWQpLFxyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIH0pLFxyXG4gICAgY3JlYXRlOiAocGF5bG9hZCkgPT5cclxuICAgICAgYXBpQ2xpZW50KHtcclxuICAgICAgICB1cmw6IGNyZWF0ZVVybCxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBwYXlsb2FkLFxyXG4gICAgICB9KSxcclxuICAgIHVwZGF0ZTogKGlkLCBwYXlsb2FkKSA9PlxyXG4gICAgICBhcGlDbGllbnQoe1xyXG4gICAgICAgIHVybDogdXBkYXRlVXJsKGlkKSxcclxuICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgIGJvZHk6IHBheWxvYWQsXHJcbiAgICAgIH0pLFxyXG4gICAgcmVtb3ZlOiAoaWQpID0+XHJcbiAgICAgIGFwaUNsaWVudCh7XHJcbiAgICAgICAgdXJsOiBkZWxldGVVcmwoaWQpLFxyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIH0pLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgeyBidWlsZFF1ZXJ5U3RyaW5nLCBjcmVhdGVDcnVkQXBpIH07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7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