b101d1e0efcb4cf8ae0fe28667d43dda
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var useToast = function useToast() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$duration = _ref.duration,
    duration = _ref$duration === void 0 ? 3000 : _ref$duration,
    onDismiss = _ref.onDismiss;
  var _useState = (0, _react.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    visible = _useState2[0],
    setVisible = _useState2[1];
  var timeoutRef = (0, _react.useRef)(null);
  var hasCalledOnDismissRef = (0, _react.useRef)(false);
  var hide = (0, _react.useCallback)(function () {
    setVisible(function (prevVisible) {
      if (!hasCalledOnDismissRef.current && onDismiss) {
        hasCalledOnDismissRef.current = true;
        onDismiss();
      }
      return false;
    });
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
      timeoutRef.current = null;
    }
  }, [onDismiss]);
  var show = (0, _react.useCallback)(function () {
    setVisible(true);
    hasCalledOnDismissRef.current = false;
    if (timeoutRef.current) {
      clearTimeout(timeoutRef.current);
    }
    timeoutRef.current = setTimeout(function () {
      hide();
    }, duration);
  }, [duration, hide]);
  (0, _react.useEffect)(function () {
    return function () {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  (0, _react.useEffect)(function () {
    hasCalledOnDismissRef.current = false;
  }, [onDismiss]);
  return {
    visible: visible,
    show: show,
    hide: hide
  };
};
var _default = exports.default = useToast;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwidXNlVG9hc3QiLCJfcmVmIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX3JlZiRkdXJhdGlvbiIsImR1cmF0aW9uIiwib25EaXNtaXNzIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsInZpc2libGUiLCJzZXRWaXNpYmxlIiwidGltZW91dFJlZiIsInVzZVJlZiIsImhhc0NhbGxlZE9uRGlzbWlzc1JlZiIsImhpZGUiLCJ1c2VDYWxsYmFjayIsInByZXZWaXNpYmxlIiwiY3VycmVudCIsImNsZWFyVGltZW91dCIsInNob3ciLCJzZXRUaW1lb3V0IiwidXNlRWZmZWN0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlVG9hc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFRvYXN0IEhvb2tcclxuICogTWFuYWdlcyB0b2FzdCB2aXNpYmlsaXR5IGFuZCBhdXRvLWRpc21pc3NcclxuICogRmlsZTogdXNlVG9hc3QuanNcclxuICovXHJcblxyXG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VDYWxsYmFjaywgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5cclxuLyoqXHJcbiAqIEhvb2sgZm9yIG1hbmFnaW5nIHRvYXN0IHN0YXRlXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBkdXJhdGlvbiAtIEF1dG8tZGlzbWlzcyBkdXJhdGlvbiBpbiBtcyAoZGVmYXVsdDogMzAwMClcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gb25EaXNtaXNzIC0gQ2FsbGJhY2sgd2hlbiB0b2FzdCBpcyBkaXNtaXNzZWRcclxuICovXHJcbmNvbnN0IHVzZVRvYXN0ID0gKHsgZHVyYXRpb24gPSAzMDAwLCBvbkRpc21pc3MgfSA9IHt9KSA9PiB7XHJcbiAgY29uc3QgW3Zpc2libGUsIHNldFZpc2libGVdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgaGFzQ2FsbGVkT25EaXNtaXNzUmVmID0gdXNlUmVmKGZhbHNlKTtcclxuXHJcbiAgY29uc3QgaGlkZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFZpc2libGUoKHByZXZWaXNpYmxlKSA9PiB7XHJcbiAgICAgIC8vIENhbGwgb25EaXNtaXNzIG9ubHkgd2hlbiB0cmFuc2l0aW9uaW5nIGZyb20gdmlzaWJsZSB0byBoaWRkZW4sIG9yIGlmIGl0IGhhc24ndCBiZWVuIGNhbGxlZCB5ZXRcclxuICAgICAgaWYgKCFoYXNDYWxsZWRPbkRpc21pc3NSZWYuY3VycmVudCAmJiBvbkRpc21pc3MpIHtcclxuICAgICAgICBoYXNDYWxsZWRPbkRpc21pc3NSZWYuY3VycmVudCA9IHRydWU7XHJcbiAgICAgICAgb25EaXNtaXNzKCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcbiAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gIH0sIFtvbkRpc21pc3NdKTtcclxuXHJcbiAgY29uc3Qgc2hvdyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIHNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAvLyBSZXNldCB0aGUgb25EaXNtaXNzIGZsYWcgd2hlbiBzaG93aW5nXHJcbiAgICBoYXNDYWxsZWRPbkRpc21pc3NSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgaWYgKHRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dFJlZi5jdXJyZW50KTtcclxuICAgIH1cclxuICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBoaWRlKCk7XHJcbiAgICB9LCBkdXJhdGlvbik7XHJcbiAgfSwgW2R1cmF0aW9uLCBoaWRlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBSZXNldCBvbkRpc21pc3MgZmxhZyB3aGVuIG9uRGlzbWlzcyBjaGFuZ2VzXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGhhc0NhbGxlZE9uRGlzbWlzc1JlZi5jdXJyZW50ID0gZmFsc2U7XHJcbiAgfSwgW29uRGlzbWlzc10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdmlzaWJsZSxcclxuICAgIHNob3csXHJcbiAgICBoaWRlLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VUb2FzdDtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBT0EsSUFBTUMsUUFBUSxHQUFHLFNBQVhBLFFBQVFBLENBQUEsRUFBNEM7RUFBQSxJQUFBQyxJQUFBLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFQLENBQUMsQ0FBQztJQUFBRyxhQUFBLEdBQUFKLElBQUEsQ0FBakNLLFFBQVE7SUFBUkEsUUFBUSxHQUFBRCxhQUFBLGNBQUcsSUFBSSxHQUFBQSxhQUFBO0lBQUVFLFNBQVMsR0FBQU4sSUFBQSxDQUFUTSxTQUFTO0VBQzVDLElBQUFDLFNBQUEsR0FBOEIsSUFBQUMsZUFBUSxFQUFDLEtBQUssQ0FBQztJQUFBQyxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBQXRDSyxPQUFPLEdBQUFILFVBQUE7SUFBRUksVUFBVSxHQUFBSixVQUFBO0VBQzFCLElBQU1LLFVBQVUsR0FBRyxJQUFBQyxhQUFNLEVBQUMsSUFBSSxDQUFDO0VBQy9CLElBQU1DLHFCQUFxQixHQUFHLElBQUFELGFBQU0sRUFBQyxLQUFLLENBQUM7RUFFM0MsSUFBTUUsSUFBSSxHQUFHLElBQUFDLGtCQUFXLEVBQUMsWUFBTTtJQUM3QkwsVUFBVSxDQUFDLFVBQUNNLFdBQVcsRUFBSztNQUUxQixJQUFJLENBQUNILHFCQUFxQixDQUFDSSxPQUFPLElBQUlkLFNBQVMsRUFBRTtRQUMvQ1UscUJBQXFCLENBQUNJLE9BQU8sR0FBRyxJQUFJO1FBQ3BDZCxTQUFTLENBQUMsQ0FBQztNQUNiO01BQ0EsT0FBTyxLQUFLO0lBQ2QsQ0FBQyxDQUFDO0lBQ0YsSUFBSVEsVUFBVSxDQUFDTSxPQUFPLEVBQUU7TUFDdEJDLFlBQVksQ0FBQ1AsVUFBVSxDQUFDTSxPQUFPLENBQUM7TUFDaENOLFVBQVUsQ0FBQ00sT0FBTyxHQUFHLElBQUk7SUFDM0I7RUFDRixDQUFDLEVBQUUsQ0FBQ2QsU0FBUyxDQUFDLENBQUM7RUFFZixJQUFNZ0IsSUFBSSxHQUFHLElBQUFKLGtCQUFXLEVBQUMsWUFBTTtJQUM3QkwsVUFBVSxDQUFDLElBQUksQ0FBQztJQUVoQkcscUJBQXFCLENBQUNJLE9BQU8sR0FBRyxLQUFLO0lBQ3JDLElBQUlOLFVBQVUsQ0FBQ00sT0FBTyxFQUFFO01BQ3RCQyxZQUFZLENBQUNQLFVBQVUsQ0FBQ00sT0FBTyxDQUFDO0lBQ2xDO0lBQ0FOLFVBQVUsQ0FBQ00sT0FBTyxHQUFHRyxVQUFVLENBQUMsWUFBTTtNQUNwQ04sSUFBSSxDQUFDLENBQUM7SUFDUixDQUFDLEVBQUVaLFFBQVEsQ0FBQztFQUNkLENBQUMsRUFBRSxDQUFDQSxRQUFRLEVBQUVZLElBQUksQ0FBQyxDQUFDO0VBRXBCLElBQUFPLGdCQUFTLEVBQUMsWUFBTTtJQUNkLE9BQU8sWUFBTTtNQUNYLElBQUlWLFVBQVUsQ0FBQ00sT0FBTyxFQUFFO1FBQ3RCQyxZQUFZLENBQUNQLFVBQVUsQ0FBQ00sT0FBTyxDQUFDO01BQ2xDO0lBQ0YsQ0FBQztFQUNILENBQUMsRUFBRSxFQUFFLENBQUM7RUFHTixJQUFBSSxnQkFBUyxFQUFDLFlBQU07SUFDZFIscUJBQXFCLENBQUNJLE9BQU8sR0FBRyxLQUFLO0VBQ3ZDLENBQUMsRUFBRSxDQUFDZCxTQUFTLENBQUMsQ0FBQztFQUVmLE9BQU87SUFDTE0sT0FBTyxFQUFQQSxPQUFPO0lBQ1BVLElBQUksRUFBSkEsSUFBSTtJQUNKTCxJQUFJLEVBQUpBO0VBQ0YsQ0FBQztBQUNILENBQUM7QUFBQyxJQUFBUSxRQUFBLEdBQUFDLE9BQUEsQ0FBQWYsT0FBQSxHQUVhWixRQUFRIiwiaWdub3JlTGlzdCI6W119