{"version":3,"names":["_react","require","_reactRedux","_selectors","_auth","normalizeRole","role","String","trim","toLowerCase","normalizeRoles","roles","list","Array","isArray","map","filter","Boolean","useAuth","dispatch","useDispatch","isAuthenticated","useSelector","selectIsAuthenticated","user","selectUser","isLoading","selectAuthLoading","errorCode","selectAuthErrorCode","useMemo","userRoles","login","useCallback","payload","authActions","register","logout","refreshSession","loadCurrentUser","verifyEmail","verifyPhone","resendVerification","forgotPassword","resetPassword","changePassword","clearError","clearAuthError","_default","exports","default"],"sources":["useAuth.js"],"sourcesContent":["/**\r\n * useAuth Hook\r\n * Provides minimal auth state from Redux for UI guards/navigation.\r\n * File: useAuth.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  selectAuthErrorCode,\r\n  selectAuthLoading,\r\n  selectIsAuthenticated,\r\n  selectUser,\r\n} from '@store/selectors';\r\nimport { actions as authActions } from '@store/slices/auth.slice';\r\n\r\nconst normalizeRole = (role) => {\r\n  if (!role) return null;\r\n  return String(role).trim().toLowerCase();\r\n};\r\n\r\nconst normalizeRoles = (roles) => {\r\n  if (!roles) return [];\r\n  const list = Array.isArray(roles) ? roles : [roles];\r\n  return list.map(normalizeRole).filter(Boolean);\r\n};\r\n\r\n/**\r\n * useAuth hook\r\n * @returns {Object} auth state and normalized roles\r\n */\r\nconst useAuth = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n  const isLoading = useSelector(selectAuthLoading);\r\n  const errorCode = useSelector(selectAuthErrorCode);\r\n\r\n  const roles = useMemo(() => {\r\n    const userRoles = user?.roles || user?.role || [];\r\n    return normalizeRoles(userRoles);\r\n  }, [user]);\r\n\r\n  return {\r\n    isAuthenticated,\r\n    user: user || null,\r\n    roles,\r\n    role: roles[0] || null,\r\n    isLoading: Boolean(isLoading),\r\n    errorCode: errorCode || null,\r\n    login: useCallback((payload) => dispatch(authActions.login(payload)), [dispatch]),\r\n    register: useCallback((payload) => dispatch(authActions.register(payload)), [dispatch]),\r\n    logout: useCallback(() => dispatch(authActions.logout()), [dispatch]),\r\n    refreshSession: useCallback(() => dispatch(authActions.refreshSession()), [dispatch]),\r\n    loadCurrentUser: useCallback(() => dispatch(authActions.loadCurrentUser()), [dispatch]),\r\n    verifyEmail: useCallback((payload) => dispatch(authActions.verifyEmail(payload)), [dispatch]),\r\n    verifyPhone: useCallback((payload) => dispatch(authActions.verifyPhone(payload)), [dispatch]),\r\n    resendVerification: useCallback((payload) => dispatch(authActions.resendVerification(payload)), [dispatch]),\r\n    forgotPassword: useCallback((payload) => dispatch(authActions.forgotPassword(payload)), [dispatch]),\r\n    resetPassword: useCallback((payload) => dispatch(authActions.resetPassword(payload)), [dispatch]),\r\n    changePassword: useCallback((payload) => dispatch(authActions.changePassword(payload)), [dispatch]),\r\n    clearError: useCallback(() => dispatch(authActions.clearAuthError()), [dispatch]),\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":"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","ignoreList":[]}