ff2a3a4b02aaeba3eb0ee7c276dc6b34
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _useNetwork2 = _interopRequireDefault(require("./useNetwork"));
var DEFAULT_ONLINE_DURATION = 4000;
var useNetworkBanner = function useNetworkBanner() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$duration = _ref.duration,
    duration = _ref$duration === void 0 ? DEFAULT_ONLINE_DURATION : _ref$duration;
  var _useNetwork = (0, _useNetwork2.default)(),
    isOnline = _useNetwork.isOnline,
    isOffline = _useNetwork.isOffline;
  var _useState = (0, _react.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    showOnlineBanner = _useState2[0],
    setShowOnlineBanner = _useState2[1];
  var timeoutRef = (0, _react.useRef)(null);
  var wasOnlineRef = (0, _react.useRef)(isOnline);
  (0, _react.useEffect)(function () {
    if (isOnline && !wasOnlineRef.current) {
      setShowOnlineBanner(true);
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
      timeoutRef.current = setTimeout(function () {
        setShowOnlineBanner(false);
        timeoutRef.current = null;
      }, duration);
    }
    if (!isOnline) {
      setShowOnlineBanner(false);
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
        timeoutRef.current = null;
      }
    }
    wasOnlineRef.current = isOnline;
  }, [duration, isOnline]);
  (0, _react.useEffect)(function () {
    return function () {
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current);
      }
    };
  }, []);
  return {
    isOnline: isOnline,
    isOffline: isOffline,
    showOnlineBanner: showOnlineBanner
  };
};
var _default = exports.default = useNetworkBanner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3VzZU5ldHdvcmsyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIkRFRkFVTFRfT05MSU5FX0RVUkFUSU9OIiwidXNlTmV0d29ya0Jhbm5lciIsIl9yZWYiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfcmVmJGR1cmF0aW9uIiwiZHVyYXRpb24iLCJfdXNlTmV0d29yayIsInVzZU5ldHdvcmsiLCJpc09ubGluZSIsImlzT2ZmbGluZSIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwiX3VzZVN0YXRlMiIsIl9zbGljZWRUb0FycmF5MiIsImRlZmF1bHQiLCJzaG93T25saW5lQmFubmVyIiwic2V0U2hvd09ubGluZUJhbm5lciIsInRpbWVvdXRSZWYiLCJ1c2VSZWYiLCJ3YXNPbmxpbmVSZWYiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZU5ldHdvcmtCYW5uZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZU5ldHdvcmtCYW5uZXIgSG9va1xyXG4gKiBQcm92aWRlcyB0cmFuc2llbnQgb25saW5lIGJhbm5lciB2aXNpYmlsaXR5IG9uIHJlY29ubmVjdC5cclxuICogRmlsZTogdXNlTmV0d29ya0Jhbm5lci5qc1xyXG4gKi9cclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgdXNlTmV0d29yayBmcm9tICcuL3VzZU5ldHdvcmsnO1xyXG5cclxuY29uc3QgREVGQVVMVF9PTkxJTkVfRFVSQVRJT04gPSA0MDAwO1xyXG5cclxuY29uc3QgdXNlTmV0d29ya0Jhbm5lciA9ICh7IGR1cmF0aW9uID0gREVGQVVMVF9PTkxJTkVfRFVSQVRJT04gfSA9IHt9KSA9PiB7XHJcbiAgY29uc3QgeyBpc09ubGluZSwgaXNPZmZsaW5lIH0gPSB1c2VOZXR3b3JrKCk7XHJcbiAgY29uc3QgW3Nob3dPbmxpbmVCYW5uZXIsIHNldFNob3dPbmxpbmVCYW5uZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IHRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3Qgd2FzT25saW5lUmVmID0gdXNlUmVmKGlzT25saW5lKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChpc09ubGluZSAmJiAhd2FzT25saW5lUmVmLmN1cnJlbnQpIHtcclxuICAgICAgc2V0U2hvd09ubGluZUJhbm5lcih0cnVlKTtcclxuICAgICAgaWYgKHRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHNldFNob3dPbmxpbmVCYW5uZXIoZmFsc2UpO1xyXG4gICAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XHJcbiAgICAgIH0sIGR1cmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzT25saW5lKSB7XHJcbiAgICAgIHNldFNob3dPbmxpbmVCYW5uZXIoZmFsc2UpO1xyXG4gICAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XHJcbiAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdhc09ubGluZVJlZi5jdXJyZW50ID0gaXNPbmxpbmU7XHJcbiAgfSwgW2R1cmF0aW9uLCBpc09ubGluZV0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaWYgKHRpbWVvdXRSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH0sIFtdKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGlzT25saW5lLFxyXG4gICAgaXNPZmZsaW5lLFxyXG4gICAgc2hvd09ubGluZUJhbm5lcixcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXNlTmV0d29ya0Jhbm5lcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFLQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxZQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFFQSxJQUFNRyx1QkFBdUIsR0FBRyxJQUFJO0FBRXBDLElBQU1DLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBZ0JBLENBQUEsRUFBb0Q7RUFBQSxJQUFBQyxJQUFBLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFQLENBQUMsQ0FBQztJQUFBRyxhQUFBLEdBQUFKLElBQUEsQ0FBekNLLFFBQVE7SUFBUkEsUUFBUSxHQUFBRCxhQUFBLGNBQUdOLHVCQUF1QixHQUFBTSxhQUFBO0VBQzVELElBQUFFLFdBQUEsR0FBZ0MsSUFBQUMsb0JBQVUsRUFBQyxDQUFDO0lBQXBDQyxRQUFRLEdBQUFGLFdBQUEsQ0FBUkUsUUFBUTtJQUFFQyxTQUFTLEdBQUFILFdBQUEsQ0FBVEcsU0FBUztFQUMzQixJQUFBQyxTQUFBLEdBQWdELElBQUFDLGVBQVEsRUFBQyxLQUFLLENBQUM7SUFBQUMsVUFBQSxPQUFBQyxlQUFBLENBQUFDLE9BQUEsRUFBQUosU0FBQTtJQUF4REssZ0JBQWdCLEdBQUFILFVBQUE7SUFBRUksbUJBQW1CLEdBQUFKLFVBQUE7RUFDNUMsSUFBTUssVUFBVSxHQUFHLElBQUFDLGFBQU0sRUFBQyxJQUFJLENBQUM7RUFDL0IsSUFBTUMsWUFBWSxHQUFHLElBQUFELGFBQU0sRUFBQ1YsUUFBUSxDQUFDO0VBRXJDLElBQUFZLGdCQUFTLEVBQUMsWUFBTTtJQUNkLElBQUlaLFFBQVEsSUFBSSxDQUFDVyxZQUFZLENBQUNFLE9BQU8sRUFBRTtNQUNyQ0wsbUJBQW1CLENBQUMsSUFBSSxDQUFDO01BQ3pCLElBQUlDLFVBQVUsQ0FBQ0ksT0FBTyxFQUFFO1FBQ3RCQyxZQUFZLENBQUNMLFVBQVUsQ0FBQ0ksT0FBTyxDQUFDO01BQ2xDO01BQ0FKLFVBQVUsQ0FBQ0ksT0FBTyxHQUFHRSxVQUFVLENBQUMsWUFBTTtRQUNwQ1AsbUJBQW1CLENBQUMsS0FBSyxDQUFDO1FBQzFCQyxVQUFVLENBQUNJLE9BQU8sR0FBRyxJQUFJO01BQzNCLENBQUMsRUFBRWhCLFFBQVEsQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDRyxRQUFRLEVBQUU7TUFDYlEsbUJBQW1CLENBQUMsS0FBSyxDQUFDO01BQzFCLElBQUlDLFVBQVUsQ0FBQ0ksT0FBTyxFQUFFO1FBQ3RCQyxZQUFZLENBQUNMLFVBQVUsQ0FBQ0ksT0FBTyxDQUFDO1FBQ2hDSixVQUFVLENBQUNJLE9BQU8sR0FBRyxJQUFJO01BQzNCO0lBQ0Y7SUFFQUYsWUFBWSxDQUFDRSxPQUFPLEdBQUdiLFFBQVE7RUFDakMsQ0FBQyxFQUFFLENBQUNILFFBQVEsRUFBRUcsUUFBUSxDQUFDLENBQUM7RUFFeEIsSUFBQVksZ0JBQVMsRUFBQyxZQUFNO0lBQ2QsT0FBTyxZQUFNO01BQ1gsSUFBSUgsVUFBVSxDQUFDSSxPQUFPLEVBQUU7UUFDdEJDLFlBQVksQ0FBQ0wsVUFBVSxDQUFDSSxPQUFPLENBQUM7TUFDbEM7SUFDRixDQUFDO0VBQ0gsQ0FBQyxFQUFFLEVBQUUsQ0FBQztFQUVOLE9BQU87SUFDTGIsUUFBUSxFQUFSQSxRQUFRO0lBQ1JDLFNBQVMsRUFBVEEsU0FBUztJQUNUTSxnQkFBZ0IsRUFBaEJBO0VBQ0YsQ0FBQztBQUNILENBQUM7QUFBQyxJQUFBUyxRQUFBLEdBQUFDLE9BQUEsQ0FBQVgsT0FBQSxHQUVhZixnQkFBZ0IiLCJpZ25vcmVMaXN0IjpbXX0=