ba1b46c633cc23b986ca6427e8eea1dc
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _callSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/callSuper"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));
var _NativeModalManager = _interopRequireDefault(require("./NativeModalManager"));
var _RCTModalHostViewNativeComponent = _interopRequireDefault(require("./RCTModalHostViewNativeComponent"));
var _virtualizedLists = _interopRequireDefault(require("@react-native/virtualized-lists"));
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["ref"];
var ScrollView = require("../Components/ScrollView/ScrollView").default;
var View = require("../Components/View/View").default;
var AppContainer = require("../ReactNative/AppContainer").default;
var I18nManager = require("../ReactNative/I18nManager").default;
var _require = require("../ReactNative/RootTag"),
  RootTagContext = _require.RootTagContext;
var StyleSheet = require("../StyleSheet/StyleSheet").default;
var Platform = require("../Utilities/Platform").default;
var VirtualizedListContextResetter = _virtualizedLists.default.VirtualizedListContextResetter;
var ModalEventEmitter = Platform.OS === 'ios' && _NativeModalManager.default != null ? new _NativeEventEmitter.default(Platform.OS !== 'ios' ? null : _NativeModalManager.default) : null;
var uniqueModalIdentifier = 0;
function confirmProps(props) {
  if (__DEV__) {
    if (props.presentationStyle && props.presentationStyle !== 'overFullScreen' && props.transparent === true) {
      console.warn(`Modal with '${props.presentationStyle}' presentation style and 'transparent' value is not supported.`);
    }
    if (props.navigationBarTranslucent === true && props.statusBarTranslucent !== true) {
      console.warn('Modal with translucent navigation bar and without translucent status bar is not supported.');
    }
    if (Platform.OS === 'ios' && props.allowSwipeDismissal === true && !props.onRequestClose) {
      console.warn('Modal requires the onRequestClose prop when used with `allowSwipeDismissal`. This is necessary to prevent state corruption.');
    }
  }
}
var Modal = function (_React$Component) {
  function Modal(props) {
    var _this;
    (0, _classCallCheck2.default)(this, Modal);
    _this = (0, _callSuper2.default)(this, Modal, [props]);
    if (__DEV__) {
      confirmProps(props);
    }
    _this._identifier = uniqueModalIdentifier++;
    _this.state = {
      isRendered: props.visible === true
    };
    return _this;
  }
  (0, _inherits2.default)(Modal, _React$Component);
  return (0, _createClass2.default)(Modal, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this2 = this;
      if (ModalEventEmitter) {
        this._eventSubscription = ModalEventEmitter.addListener('modalDismissed', function (event) {
          _this2.setState({
            isRendered: false
          }, function () {
            if (event.modalID === _this2._identifier && _this2.props.onDismiss) {
              _this2.props.onDismiss();
            }
          });
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (Platform.OS === 'ios') {
        this.setState({
          isRendered: false
        });
      }
      if (this._eventSubscription) {
        this._eventSubscription.remove();
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.visible === false && this.props.visible === true) {
        this.setState({
          isRendered: true
        });
      }
      if (__DEV__) {
        confirmProps(this.props);
      }
    }
  }, {
    key: "_shouldShowModal",
    value: function _shouldShowModal() {
      if (Platform.OS === 'ios') {
        return this.props.visible === true || this.state.isRendered === true;
      }
      return this.props.visible === true;
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props$backdropC,
        _this3 = this;
      if (!this._shouldShowModal()) {
        return null;
      }
      var containerStyles = {
        backgroundColor: this.props.transparent === true ? 'transparent' : (_this$props$backdropC = this.props.backdropColor) != null ? _this$props$backdropC : 'white'
      };
      var animationType = this.props.animationType || 'none';
      var presentationStyle = this.props.presentationStyle;
      if (!presentationStyle) {
        presentationStyle = 'fullScreen';
        if (this.props.transparent === true) {
          presentationStyle = 'overFullScreen';
        }
      }
      var innerChildren = __DEV__ ? (0, _jsxRuntime.jsx)(AppContainer, {
        rootTag: this.context,
        children: this.props.children
      }) : this.props.children;
      var onDismiss = function onDismiss() {
        if (Platform.OS === 'ios') {
          _this3.setState({
            isRendered: false
          }, function () {
            if (_this3.props.onDismiss) {
              _this3.props.onDismiss();
            }
          });
        }
      };
      return (0, _jsxRuntime.jsx)(_RCTModalHostViewNativeComponent.default, {
        animationType: animationType,
        presentationStyle: presentationStyle,
        transparent: this.props.transparent,
        hardwareAccelerated: this.props.hardwareAccelerated,
        onRequestClose: this.props.onRequestClose,
        onShow: this.props.onShow,
        onDismiss: onDismiss,
        ref: this.props.modalRef,
        visible: this.props.visible,
        statusBarTranslucent: this.props.statusBarTranslucent,
        navigationBarTranslucent: this.props.navigationBarTranslucent,
        identifier: this._identifier,
        style: styles.modal,
        onStartShouldSetResponder: this._shouldSetResponder,
        supportedOrientations: this.props.supportedOrientations,
        onOrientationChange: this.props.onOrientationChange,
        allowSwipeDismissal: this.props.allowSwipeDismissal,
        testID: this.props.testID,
        children: (0, _jsxRuntime.jsx)(VirtualizedListContextResetter, {
          children: (0, _jsxRuntime.jsx)(ScrollView.Context.Provider, {
            value: null,
            children: (0, _jsxRuntime.jsx)(View, {
              style: [styles.container, containerStyles],
              collapsable: false,
              children: innerChildren
            })
          })
        })
      });
    }
  }, {
    key: "_shouldSetResponder",
    value: function _shouldSetResponder() {
      return true;
    }
  }]);
}(React.Component);
Modal.defaultProps = {
  visible: true,
  hardwareAccelerated: false
};
Modal.contextType = RootTagContext;
var side = I18nManager.getConstants().isRTL ? 'right' : 'left';
var styles = StyleSheet.create({
  modal: {
    position: 'absolute'
  },
  container: (0, _defineProperty2.default)((0, _defineProperty2.default)((0, _defineProperty2.default)({}, side, 0), "top", 0), "flex", 1)
});
function Wrapper(_ref) {
  var ref = _ref.ref,
    props = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  return (0, _jsxRuntime.jsx)(Modal, Object.assign({}, props, {
    modalRef: ref
  }));
}
Wrapper.displayName = 'Modal';
Wrapper.Context = VirtualizedListContextResetter;
var _default = exports.default = Wrapper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlRXZlbnRFbWl0dGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfTmF0aXZlTW9kYWxNYW5hZ2VyIiwiX1JDVE1vZGFsSG9zdFZpZXdOYXRpdmVDb21wb25lbnQiLCJfdmlydHVhbGl6ZWRMaXN0cyIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfanN4UnVudGltZSIsIl9leGNsdWRlZCIsIlNjcm9sbFZpZXciLCJkZWZhdWx0IiwiVmlldyIsIkFwcENvbnRhaW5lciIsIkkxOG5NYW5hZ2VyIiwiX3JlcXVpcmUiLCJSb290VGFnQ29udGV4dCIsIlN0eWxlU2hlZXQiLCJQbGF0Zm9ybSIsIlZpcnR1YWxpemVkTGlzdENvbnRleHRSZXNldHRlciIsIlZpcnR1YWxpemVkTGlzdHMiLCJNb2RhbEV2ZW50RW1pdHRlciIsIk9TIiwiTmF0aXZlTW9kYWxNYW5hZ2VyIiwiTmF0aXZlRXZlbnRFbWl0dGVyIiwidW5pcXVlTW9kYWxJZGVudGlmaWVyIiwiY29uZmlybVByb3BzIiwicHJvcHMiLCJfX0RFVl9fIiwicHJlc2VudGF0aW9uU3R5bGUiLCJ0cmFuc3BhcmVudCIsImNvbnNvbGUiLCJ3YXJuIiwibmF2aWdhdGlvbkJhclRyYW5zbHVjZW50Iiwic3RhdHVzQmFyVHJhbnNsdWNlbnQiLCJhbGxvd1N3aXBlRGlzbWlzc2FsIiwib25SZXF1ZXN0Q2xvc2UiLCJNb2RhbCIsIl9SZWFjdCRDb21wb25lbnQiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY2FsbFN1cGVyMiIsIl9pZGVudGlmaWVyIiwic3RhdGUiLCJpc1JlbmRlcmVkIiwidmlzaWJsZSIsIl9pbmhlcml0czIiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJjb21wb25lbnREaWRNb3VudCIsIl90aGlzMiIsIl9ldmVudFN1YnNjcmlwdGlvbiIsImFkZExpc3RlbmVyIiwiZXZlbnQiLCJzZXRTdGF0ZSIsIm1vZGFsSUQiLCJvbkRpc21pc3MiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbW92ZSIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZQcm9wcyIsIl9zaG91bGRTaG93TW9kYWwiLCJyZW5kZXIiLCJfdGhpcyRwcm9wcyRiYWNrZHJvcEMiLCJfdGhpczMiLCJjb250YWluZXJTdHlsZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJiYWNrZHJvcENvbG9yIiwiYW5pbWF0aW9uVHlwZSIsImlubmVyQ2hpbGRyZW4iLCJqc3giLCJyb290VGFnIiwiY29udGV4dCIsImNoaWxkcmVuIiwiaGFyZHdhcmVBY2NlbGVyYXRlZCIsIm9uU2hvdyIsInJlZiIsIm1vZGFsUmVmIiwiaWRlbnRpZmllciIsInN0eWxlIiwic3R5bGVzIiwibW9kYWwiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwiX3Nob3VsZFNldFJlc3BvbmRlciIsInN1cHBvcnRlZE9yaWVudGF0aW9ucyIsIm9uT3JpZW50YXRpb25DaGFuZ2UiLCJ0ZXN0SUQiLCJDb250ZXh0IiwiUHJvdmlkZXIiLCJjb250YWluZXIiLCJjb2xsYXBzYWJsZSIsIkNvbXBvbmVudCIsImRlZmF1bHRQcm9wcyIsImNvbnRleHRUeXBlIiwic2lkZSIsImdldENvbnN0YW50cyIsImlzUlRMIiwiY3JlYXRlIiwicG9zaXRpb24iLCJfZGVmaW5lUHJvcGVydHkyIiwiV3JhcHBlciIsIl9yZWYiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMyIiwiT2JqZWN0IiwiYXNzaWduIiwiZGlzcGxheU5hbWUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJNb2RhbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge0hvc3RJbnN0YW5jZX0gZnJvbSAnLi4vLi4vc3JjL3ByaXZhdGUvdHlwZXMvSG9zdEluc3RhbmNlJztcbmltcG9ydCB0eXBlIHtWaWV3UHJvcHN9IGZyb20gJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3UHJvcFR5cGVzJztcbmltcG9ydCB0eXBlIHtSb290VGFnfSBmcm9tICcuLi9SZWFjdE5hdGl2ZS9Sb290VGFnJztcbmltcG9ydCB0eXBlIHtEaXJlY3RFdmVudEhhbmRsZXJ9IGZyb20gJy4uL1R5cGVzL0NvZGVnZW5UeXBlcyc7XG5cbmltcG9ydCBOYXRpdmVFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQge3R5cGUgQ29sb3JWYWx1ZX0gZnJvbSAnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcbmltcG9ydCB7dHlwZSBFdmVudFN1YnNjcmlwdGlvbn0gZnJvbSAnLi4vdmVuZG9yL2VtaXR0ZXIvRXZlbnRFbWl0dGVyJztcbmltcG9ydCBOYXRpdmVNb2RhbE1hbmFnZXIgZnJvbSAnLi9OYXRpdmVNb2RhbE1hbmFnZXInO1xuaW1wb3J0IFJDVE1vZGFsSG9zdFZpZXcgZnJvbSAnLi9SQ1RNb2RhbEhvc3RWaWV3TmF0aXZlQ29tcG9uZW50JztcbmltcG9ydCBWaXJ0dWFsaXplZExpc3RzIGZyb20gJ0ByZWFjdC1uYXRpdmUvdmlydHVhbGl6ZWQtbGlzdHMnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5jb25zdCBTY3JvbGxWaWV3ID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9TY3JvbGxWaWV3L1Njcm9sbFZpZXcnKS5kZWZhdWx0O1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3JykuZGVmYXVsdDtcbmNvbnN0IEFwcENvbnRhaW5lciA9IHJlcXVpcmUoJy4uL1JlYWN0TmF0aXZlL0FwcENvbnRhaW5lcicpLmRlZmF1bHQ7XG5jb25zdCBJMThuTWFuYWdlciA9IHJlcXVpcmUoJy4uL1JlYWN0TmF0aXZlL0kxOG5NYW5hZ2VyJykuZGVmYXVsdDtcbmNvbnN0IHtSb290VGFnQ29udGV4dH0gPSByZXF1aXJlKCcuLi9SZWFjdE5hdGl2ZS9Sb290VGFnJyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JykuZGVmYXVsdDtcbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnLi4vVXRpbGl0aWVzL1BsYXRmb3JtJykuZGVmYXVsdDtcblxuY29uc3QgVmlydHVhbGl6ZWRMaXN0Q29udGV4dFJlc2V0dGVyID1cbiAgVmlydHVhbGl6ZWRMaXN0cy5WaXJ0dWFsaXplZExpc3RDb250ZXh0UmVzZXR0ZXI7XG5cbnR5cGUgTW9kYWxFdmVudERlZmluaXRpb25zID0ge1xuICBtb2RhbERpc21pc3NlZDogW3ttb2RhbElEOiBudW1iZXJ9XSxcbn07XG5cbmV4cG9ydCB0eXBlIFB1YmxpY01vZGFsSW5zdGFuY2UgPSBIb3N0SW5zdGFuY2U7XG5cbmNvbnN0IE1vZGFsRXZlbnRFbWl0dGVyID1cbiAgUGxhdGZvcm0uT1MgPT09ICdpb3MnICYmIE5hdGl2ZU1vZGFsTWFuYWdlciAhPSBudWxsXG4gICAgPyBuZXcgTmF0aXZlRXZlbnRFbWl0dGVyPE1vZGFsRXZlbnREZWZpbml0aW9ucz4oXG4gICAgICAgIC8vIFQ4ODcxNTA2MzogTmF0aXZlRXZlbnRFbWl0dGVyIG9ubHkgdXNlZCB0aGlzIHBhcmFtZXRlciBvbiBpT1MuIE5vdyBpdCB1c2VzIGl0IG9uIGFsbCBwbGF0Zm9ybXMsIHNvIHRoaXMgY29kZSB3YXMgbW9kaWZpZWQgYXV0b21hdGljYWxseSB0byBwcmVzZXJ2ZSBpdHMgYmVoYXZpb3JcbiAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIHRoZSBuYXRpdmUgbW9kdWxlIG9uIG90aGVyIHBsYXRmb3JtcywgcGxlYXNlIHJlbW92ZSB0aGlzIGNvbmRpdGlvbiBhbmQgdGVzdCBpdHMgYmVoYXZpb3JcbiAgICAgICAgUGxhdGZvcm0uT1MgIT09ICdpb3MnID8gbnVsbCA6IE5hdGl2ZU1vZGFsTWFuYWdlcixcbiAgICAgIClcbiAgICA6IG51bGw7XG5cbi8qKlxuICogVGhlIE1vZGFsIGNvbXBvbmVudCBpcyBhIHNpbXBsZSB3YXkgdG8gcHJlc2VudCBjb250ZW50IGFib3ZlIGFuIGVuY2xvc2luZyB2aWV3LlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsXG4gKi9cblxuLy8gSW4gb3JkZXIgdG8gcm91dGUgb25EaXNtaXNzIGNhbGxiYWNrcywgd2UgbmVlZCB0byB1bmlxdWVseSBpZGVudGlmaWVyIGVhY2hcbi8vIDxNb2RhbD4gb24gc2NyZWVuLiBUaGVyZSBjYW4gYmUgZGlmZmVyZW50IG9uZXMsIGVpdGhlciBuZXN0ZWQgb3IgYXMgc2libGluZ3MuXG4vLyBXZSBjYW5ub3QgcGFzcyB0aGUgb25EaXNtaXNzIGNhbGxiYWNrIHRvIG5hdGl2ZSBhcyB0aGUgdmlldyB3aWxsIGJlXG4vLyBkZXN0cm95ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayBpcyBmaXJlZC5cbmxldCB1bmlxdWVNb2RhbElkZW50aWZpZXIgPSAwO1xuXG50eXBlIE9yaWVudGF0aW9uQ2hhbmdlRXZlbnQgPSAkUmVhZE9ubHk8e1xuICBvcmllbnRhdGlvbjogJ3BvcnRyYWl0JyB8ICdsYW5kc2NhcGUnLFxufT47XG5cbmV4cG9ydCB0eXBlIE1vZGFsQmFzZVByb3BzID0ge1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIGFuaW1hdGlvblR5cGUgaW5zdGVhZFxuICAgKi9cbiAgYW5pbWF0ZWQ/OiBib29sZWFuLFxuICAvKipcbiAgICogVGhlIGBhbmltYXRpb25UeXBlYCBwcm9wIGNvbnRyb2xzIGhvdyB0aGUgbW9kYWwgYW5pbWF0ZXMuXG4gICAqXG4gICAqIC0gYHNsaWRlYCBzbGlkZXMgaW4gZnJvbSB0aGUgYm90dG9tXG4gICAqIC0gYGZhZGVgIGZhZGVzIGludG8gdmlld1xuICAgKiAtIGBub25lYCBhcHBlYXJzIHdpdGhvdXQgYW4gYW5pbWF0aW9uXG4gICAqL1xuICBhbmltYXRpb25UeXBlPzogPygnbm9uZScgfCAnc2xpZGUnIHwgJ2ZhZGUnKSxcbiAgLyoqXG4gICAqIFRoZSBgdHJhbnNwYXJlbnRgIHByb3AgZGV0ZXJtaW5lcyB3aGV0aGVyIHlvdXIgbW9kYWwgd2lsbCBmaWxsIHRoZSBlbnRpcmUgdmlldy5cbiAgICogU2V0dGluZyB0aGlzIHRvIGB0cnVlYCB3aWxsIHJlbmRlciB0aGUgbW9kYWwgb3ZlciBhIHRyYW5zcGFyZW50IGJhY2tncm91bmQuXG4gICAqL1xuICB0cmFuc3BhcmVudD86ID9ib29sZWFuLFxuICAvKipcbiAgICogVGhlIGB2aXNpYmxlYCBwcm9wIGRldGVybWluZXMgd2hldGhlciB5b3VyIG1vZGFsIGlzIHZpc2libGUuXG4gICAqL1xuICB2aXNpYmxlPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBUaGUgYG9uUmVxdWVzdENsb3NlYCBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0YXBzIHRoZSBoYXJkd2FyZSBiYWNrIGJ1dHRvbiBvbiBBbmRyb2lkLCBkaXNtaXNzZXMgdGhlIHNoZWV0IHVzaW5nIGEgZ2VzdHVyZSBvbiBpT1MgKHdoZW4gYGFsbG93U3dpcGVEaXNtaXNzYWxgIGlzIHNldCB0byB0cnVlKSBvciB0aGUgbWVudSBidXR0b24gb24gQXBwbGUgVFYuXG4gICAqXG4gICAqIFRoaXMgaXMgcmVxdWlyZWQgb24gaU9TIGFuZCBBbmRyb2lkLlxuICAgKi9cbiAgLy8gb25SZXF1ZXN0Q2xvc2U/OiAoZXZlbnQ6IE5hdGl2ZVN5bnRoZXRpY0V2ZW50PGFueT4pID0+IHZvaWQ7XG4gIG9uUmVxdWVzdENsb3NlPzogP0RpcmVjdEV2ZW50SGFuZGxlcjxudWxsPixcbiAgLyoqXG4gICAqIFRoZSBgb25TaG93YCBwcm9wIGFsbG93cyBwYXNzaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBtb2RhbCBoYXMgYmVlbiBzaG93bi5cbiAgICovXG4gIC8vIG9uU2hvdz86IChldmVudDogTmF0aXZlU3ludGhldGljRXZlbnQ8YW55PikgPT4gdm9pZDtcbiAgb25TaG93PzogP0RpcmVjdEV2ZW50SGFuZGxlcjxudWxsPixcblxuICAvKipcbiAgICogVGhlIGBiYWNrZHJvcENvbG9yYCBwcm9wcyBzZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBtb2RhbCdzIGNvbnRhaW5lci5cbiAgICogRGVmYXVsdHMgdG8gYHdoaXRlYCBpZiBub3QgcHJvdmlkZWQgYW5kIHRyYW5zcGFyZW50IGlzIGBmYWxzZWAuIElnbm9yZWQgaWYgYHRyYW5zcGFyZW50YCBpcyBgdHJ1ZWAuXG4gICAqL1xuICBiYWNrZHJvcENvbG9yPzogQ29sb3JWYWx1ZSxcblxuICAvKipcbiAgICogQSByZWYgdG8gdGhlIG5hdGl2ZSBNb2RhbCBjb21wb25lbnQuXG4gICAqL1xuICBtb2RhbFJlZj86IFJlYWN0LlJlZlNldHRlcjxQdWJsaWNNb2RhbEluc3RhbmNlPixcbn07XG5cbmV4cG9ydCB0eXBlIE1vZGFsUHJvcHNJT1MgPSB7XG4gIC8qKlxuICAgKiBUaGUgYHByZXNlbnRhdGlvblN0eWxlYCBkZXRlcm1pbmVzIHRoZSBzdHlsZSBvZiBtb2RhbCB0byBzaG93XG4gICAqL1xuICBwcmVzZW50YXRpb25TdHlsZT86ID8oXG4gICAgfCAnZnVsbFNjcmVlbidcbiAgICB8ICdwYWdlU2hlZXQnXG4gICAgfCAnZm9ybVNoZWV0J1xuICAgIHwgJ292ZXJGdWxsU2NyZWVuJ1xuICApLFxuXG4gIC8qKlxuICAgKiBUaGUgYHN1cHBvcnRlZE9yaWVudGF0aW9uc2AgcHJvcCBhbGxvd3MgdGhlIG1vZGFsIHRvIGJlIHJvdGF0ZWQgdG8gYW55IG9mIHRoZSBzcGVjaWZpZWQgb3JpZW50YXRpb25zLlxuICAgKiBPbiBpT1MsIHRoZSBtb2RhbCBpcyBzdGlsbCByZXN0cmljdGVkIGJ5IHdoYXQncyBzcGVjaWZpZWQgaW4geW91ciBhcHAncyBJbmZvLnBsaXN0J3MgVUlTdXBwb3J0ZWRJbnRlcmZhY2VPcmllbnRhdGlvbnMgZmllbGQuXG4gICAqL1xuICBzdXBwb3J0ZWRPcmllbnRhdGlvbnM/OiA/JFJlYWRPbmx5QXJyYXk8XG4gICAgfCAncG9ydHJhaXQnXG4gICAgfCAncG9ydHJhaXQtdXBzaWRlLWRvd24nXG4gICAgfCAnbGFuZHNjYXBlJ1xuICAgIHwgJ2xhbmRzY2FwZS1sZWZ0J1xuICAgIHwgJ2xhbmRzY2FwZS1yaWdodCcsXG4gID4sXG5cbiAgLyoqXG4gICAqIFRoZSBgb25EaXNtaXNzYCBwcm9wIGFsbG93cyBwYXNzaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBvbmNlIHRoZSBtb2RhbCBoYXMgYmVlbiBkaXNtaXNzZWQuXG4gICAqL1xuICAvLyBvbkRpc21pc3M/OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQ7XG4gIG9uRGlzbWlzcz86ID8oKSA9PiB2b2lkLFxuXG4gIC8qKlxuICAgKiBUaGUgYG9uT3JpZW50YXRpb25DaGFuZ2VgIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBvcmllbnRhdGlvbiBjaGFuZ2VzIHdoaWxlIHRoZSBtb2RhbCBpcyBiZWluZyBkaXNwbGF5ZWQuXG4gICAqIFRoZSBvcmllbnRhdGlvbiBwcm92aWRlZCBpcyBvbmx5ICdwb3J0cmFpdCcgb3IgJ2xhbmRzY2FwZScuIFRoaXMgY2FsbGJhY2sgaXMgYWxzbyBjYWxsZWQgb24gaW5pdGlhbCByZW5kZXIsIHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24uXG4gICAqL1xuICAvLyBvbk9yaWVudGF0aW9uQ2hhbmdlPzpcbiAgLy8gICB8ICgoZXZlbnQ6IE5hdGl2ZVN5bnRoZXRpY0V2ZW50PGFueT4pID0+IHZvaWQpXG4gIC8vICAgfCB1bmRlZmluZWQ7XG4gIG9uT3JpZW50YXRpb25DaGFuZ2U/OiA/RGlyZWN0RXZlbnRIYW5kbGVyPE9yaWVudGF0aW9uQ2hhbmdlRXZlbnQ+LFxuXG4gIC8qKlxuICAgKiBDb250cm9scyB3aGV0aGVyIHRoZSBtb2RhbCBjYW4gYmUgZGlzbWlzc2VkIGJ5IHN3aXBpbmcgZG93biBvbiBpT1MuXG4gICAqIFRoaXMgcmVxdWlyZXMgeW91IHRvIGltcGxlbWVudCB0aGUgYG9uUmVxdWVzdENsb3NlYCBwcm9wIHRvIGhhbmRsZSB0aGUgZGlzbWlzc2FsLlxuICAgKi9cbiAgYWxsb3dTd2lwZURpc21pc3NhbD86ID9ib29sZWFuLFxufTtcblxuZXhwb3J0IHR5cGUgTW9kYWxQcm9wc0FuZHJvaWQgPSB7XG4gIC8qKlxuICAgKiAgQ29udHJvbHMgd2hldGhlciB0byBmb3JjZSBoYXJkd2FyZSBhY2NlbGVyYXRpb24gZm9yIHRoZSB1bmRlcmx5aW5nIHdpbmRvdy5cbiAgICovXG4gIGhhcmR3YXJlQWNjZWxlcmF0ZWQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogIERldGVybWluZXMgd2hldGhlciB5b3VyIG1vZGFsIHNob3VsZCBnbyB1bmRlciB0aGUgc3lzdGVtIHN0YXR1c2Jhci5cbiAgICovXG4gIHN0YXR1c0JhclRyYW5zbHVjZW50PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqICBEZXRlcm1pbmVzIHdoZXRoZXIgeW91ciBtb2RhbCBzaG91bGQgZ28gdW5kZXIgdGhlIHN5c3RlbSBuYXZpZ2F0aW9uYmFyLlxuICAgKi9cbiAgbmF2aWdhdGlvbkJhclRyYW5zbHVjZW50PzogP2Jvb2xlYW4sXG59O1xuXG5leHBvcnQgdHlwZSBNb2RhbFByb3BzID0ge1xuICAuLi5Nb2RhbEJhc2VQcm9wcyxcbiAgLi4uTW9kYWxQcm9wc0lPUyxcbiAgLi4uTW9kYWxQcm9wc0FuZHJvaWQsXG4gIC4uLlZpZXdQcm9wcyxcbn07XG5cbmZ1bmN0aW9uIGNvbmZpcm1Qcm9wcyhwcm9wczogTW9kYWxQcm9wcykge1xuICBpZiAoX19ERVZfXykge1xuICAgIGlmIChcbiAgICAgIHByb3BzLnByZXNlbnRhdGlvblN0eWxlICYmXG4gICAgICBwcm9wcy5wcmVzZW50YXRpb25TdHlsZSAhPT0gJ292ZXJGdWxsU2NyZWVuJyAmJlxuICAgICAgcHJvcHMudHJhbnNwYXJlbnQgPT09IHRydWVcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYE1vZGFsIHdpdGggJyR7cHJvcHMucHJlc2VudGF0aW9uU3R5bGV9JyBwcmVzZW50YXRpb24gc3R5bGUgYW5kICd0cmFuc3BhcmVudCcgdmFsdWUgaXMgbm90IHN1cHBvcnRlZC5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgcHJvcHMubmF2aWdhdGlvbkJhclRyYW5zbHVjZW50ID09PSB0cnVlICYmXG4gICAgICBwcm9wcy5zdGF0dXNCYXJUcmFuc2x1Y2VudCAhPT0gdHJ1ZVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTW9kYWwgd2l0aCB0cmFuc2x1Y2VudCBuYXZpZ2F0aW9uIGJhciBhbmQgd2l0aG91dCB0cmFuc2x1Y2VudCBzdGF0dXMgYmFyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgUGxhdGZvcm0uT1MgPT09ICdpb3MnICYmXG4gICAgICBwcm9wcy5hbGxvd1N3aXBlRGlzbWlzc2FsID09PSB0cnVlICYmXG4gICAgICAhcHJvcHMub25SZXF1ZXN0Q2xvc2VcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ01vZGFsIHJlcXVpcmVzIHRoZSBvblJlcXVlc3RDbG9zZSBwcm9wIHdoZW4gdXNlZCB3aXRoIGBhbGxvd1N3aXBlRGlzbWlzc2FsYC4gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcHJldmVudCBzdGF0ZSBjb3JydXB0aW9uLicsXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG4vLyBDcmVhdGUgYSBzdGF0ZSB0byB0cmFjayB3aGV0aGVyIHRoZSBNb2RhbCBpcyByZW5kZXJpbmcgb3Igbm90LlxuLy8gVGhpcyBpcyB0aGUgb25seSBwcm9wIHRoYXQgY29udHJvbHMgd2hldGhlciB0aGUgbW9kYWwgaXMgcmVuZGVyZWQgb3Igbm90LlxudHlwZSBNb2RhbFN0YXRlID0ge1xuICBpc1JlbmRlcmVkOiBib29sZWFuLFxufTtcblxuY2xhc3MgTW9kYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8TW9kYWxQcm9wcywgTW9kYWxTdGF0ZT4ge1xuICBzdGF0aWMgZGVmYXVsdFByb3BzOiB7aGFyZHdhcmVBY2NlbGVyYXRlZDogYm9vbGVhbiwgdmlzaWJsZTogYm9vbGVhbn0gPSB7XG4gICAgdmlzaWJsZTogdHJ1ZSxcbiAgICBoYXJkd2FyZUFjY2VsZXJhdGVkOiBmYWxzZSxcbiAgfTtcblxuICBzdGF0aWMgY29udGV4dFR5cGU6IFJlYWN0LkNvbnRleHQ8Um9vdFRhZz4gPSBSb290VGFnQ29udGV4dDtcblxuICBfaWRlbnRpZmllcjogbnVtYmVyO1xuICBfZXZlbnRTdWJzY3JpcHRpb246ID9FdmVudFN1YnNjcmlwdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogTW9kYWxQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY29uZmlybVByb3BzKHByb3BzKTtcbiAgICB9XG4gICAgdGhpcy5faWRlbnRpZmllciA9IHVuaXF1ZU1vZGFsSWRlbnRpZmllcisrO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc1JlbmRlcmVkOiBwcm9wcy52aXNpYmxlID09PSB0cnVlLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAvLyAnbW9kYWxEaXNtaXNzZWQnIGlzIGZvciB0aGUgb2xkIHJlbmRlcmVyIGluIGlPUyBvbmx5XG4gICAgaWYgKE1vZGFsRXZlbnRFbWl0dGVyKSB7XG4gICAgICB0aGlzLl9ldmVudFN1YnNjcmlwdGlvbiA9IE1vZGFsRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICAnbW9kYWxEaXNtaXNzZWQnLFxuICAgICAgICBldmVudCA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNSZW5kZXJlZDogZmFsc2V9LCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQubW9kYWxJRCA9PT0gdGhpcy5faWRlbnRpZmllciAmJiB0aGlzLnByb3BzLm9uRGlzbWlzcykge1xuICAgICAgICAgICAgICB0aGlzLnByb3BzLm9uRGlzbWlzcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtpc1JlbmRlcmVkOiBmYWxzZX0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZXZlbnRTdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX2V2ZW50U3Vic2NyaXB0aW9uLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IE1vZGFsUHJvcHMpIHtcbiAgICBpZiAocHJldlByb3BzLnZpc2libGUgPT09IGZhbHNlICYmIHRoaXMucHJvcHMudmlzaWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNSZW5kZXJlZDogdHJ1ZX0pO1xuICAgIH1cblxuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25maXJtUHJvcHModGhpcy5wcm9wcyk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGVuY2Fwc3VsYXRlIHBsYXRmb3JtIHNwZWNpZmljIGxvZ2ljIHRvIHNob3cgb3Igbm90IHRoZSBNb2RhbC5cbiAgX3Nob3VsZFNob3dNb2RhbCgpOiBib29sZWFuIHtcbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy52aXNpYmxlID09PSB0cnVlIHx8IHRoaXMuc3RhdGUuaXNSZW5kZXJlZCA9PT0gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9wcy52aXNpYmxlID09PSB0cnVlO1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGlmICghdGhpcy5fc2hvdWxkU2hvd01vZGFsKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjpcbiAgICAgICAgdGhpcy5wcm9wcy50cmFuc3BhcmVudCA9PT0gdHJ1ZVxuICAgICAgICAgID8gJ3RyYW5zcGFyZW50J1xuICAgICAgICAgIDogdGhpcy5wcm9wcy5iYWNrZHJvcENvbG9yID8/ICd3aGl0ZScsXG4gICAgfTtcblxuICAgIGxldCBhbmltYXRpb25UeXBlID0gdGhpcy5wcm9wcy5hbmltYXRpb25UeXBlIHx8ICdub25lJztcblxuICAgIGxldCBwcmVzZW50YXRpb25TdHlsZSA9IHRoaXMucHJvcHMucHJlc2VudGF0aW9uU3R5bGU7XG4gICAgaWYgKCFwcmVzZW50YXRpb25TdHlsZSkge1xuICAgICAgcHJlc2VudGF0aW9uU3R5bGUgPSAnZnVsbFNjcmVlbic7XG4gICAgICBpZiAodGhpcy5wcm9wcy50cmFuc3BhcmVudCA9PT0gdHJ1ZSkge1xuICAgICAgICBwcmVzZW50YXRpb25TdHlsZSA9ICdvdmVyRnVsbFNjcmVlbic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaW5uZXJDaGlsZHJlbiA9IF9fREVWX18gPyAoXG4gICAgICA8QXBwQ29udGFpbmVyIHJvb3RUYWc9e3RoaXMuY29udGV4dH0+e3RoaXMucHJvcHMuY2hpbGRyZW59PC9BcHBDb250YWluZXI+XG4gICAgKSA6IChcbiAgICAgIHRoaXMucHJvcHMuY2hpbGRyZW5cbiAgICApO1xuXG4gICAgY29uc3Qgb25EaXNtaXNzID0gKCkgPT4ge1xuICAgICAgLy8gT25EaXNtaXNzIGlzIGltcGxlbWVudGVkIG9uIGlPUyBvbmx5LlxuICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtpc1JlbmRlcmVkOiBmYWxzZX0sICgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkRpc21pc3MpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25EaXNtaXNzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxSQ1RNb2RhbEhvc3RWaWV3XG4gICAgICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIE5hdHVyYWwgSW5mZXJlbmNlIHJvbGxvdXQuIFNlZVxuICAgICAgICAgKiBodHRwczovL2ZidXJsLmNvbS93b3JrcGxhY2UvNjI5MWdmdnUgKi9cbiAgICAgICAgYW5pbWF0aW9uVHlwZT17YW5pbWF0aW9uVHlwZX1cbiAgICAgICAgcHJlc2VudGF0aW9uU3R5bGU9e3ByZXNlbnRhdGlvblN0eWxlfVxuICAgICAgICB0cmFuc3BhcmVudD17dGhpcy5wcm9wcy50cmFuc3BhcmVudH1cbiAgICAgICAgaGFyZHdhcmVBY2NlbGVyYXRlZD17dGhpcy5wcm9wcy5oYXJkd2FyZUFjY2VsZXJhdGVkfVxuICAgICAgICBvblJlcXVlc3RDbG9zZT17dGhpcy5wcm9wcy5vblJlcXVlc3RDbG9zZX1cbiAgICAgICAgb25TaG93PXt0aGlzLnByb3BzLm9uU2hvd31cbiAgICAgICAgb25EaXNtaXNzPXtvbkRpc21pc3N9XG4gICAgICAgIHJlZj17dGhpcy5wcm9wcy5tb2RhbFJlZn1cbiAgICAgICAgdmlzaWJsZT17dGhpcy5wcm9wcy52aXNpYmxlfVxuICAgICAgICBzdGF0dXNCYXJUcmFuc2x1Y2VudD17dGhpcy5wcm9wcy5zdGF0dXNCYXJUcmFuc2x1Y2VudH1cbiAgICAgICAgbmF2aWdhdGlvbkJhclRyYW5zbHVjZW50PXt0aGlzLnByb3BzLm5hdmlnYXRpb25CYXJUcmFuc2x1Y2VudH1cbiAgICAgICAgaWRlbnRpZmllcj17dGhpcy5faWRlbnRpZmllcn1cbiAgICAgICAgc3R5bGU9e3N0eWxlcy5tb2RhbH1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVttZXRob2QtdW5iaW5kaW5nXSBhZGRlZCB3aGVuIGltcHJvdmluZyB0eXBpbmcgZm9yIHRoaXMgcGFyYW1ldGVyc1xuICAgICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyPXt0aGlzLl9zaG91bGRTZXRSZXNwb25kZXJ9XG4gICAgICAgIHN1cHBvcnRlZE9yaWVudGF0aW9ucz17dGhpcy5wcm9wcy5zdXBwb3J0ZWRPcmllbnRhdGlvbnN9XG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2U9e3RoaXMucHJvcHMub25PcmllbnRhdGlvbkNoYW5nZX1cbiAgICAgICAgYWxsb3dTd2lwZURpc21pc3NhbD17dGhpcy5wcm9wcy5hbGxvd1N3aXBlRGlzbWlzc2FsfVxuICAgICAgICB0ZXN0SUQ9e3RoaXMucHJvcHMudGVzdElEfT5cbiAgICAgICAgPFZpcnR1YWxpemVkTGlzdENvbnRleHRSZXNldHRlcj5cbiAgICAgICAgICA8U2Nyb2xsVmlldy5Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtudWxsfT5cbiAgICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdXG4gICAgICAgICAgICAgIHN0eWxlPXtbc3R5bGVzLmNvbnRhaW5lciwgY29udGFpbmVyU3R5bGVzXX1cbiAgICAgICAgICAgICAgY29sbGFwc2FibGU9e2ZhbHNlfT5cbiAgICAgICAgICAgICAge2lubmVyQ2hpbGRyZW59XG4gICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPC9TY3JvbGxWaWV3LkNvbnRleHQuUHJvdmlkZXI+XG4gICAgICAgIDwvVmlydHVhbGl6ZWRMaXN0Q29udGV4dFJlc2V0dGVyPlxuICAgICAgPC9SQ1RNb2RhbEhvc3RWaWV3PlxuICAgICk7XG4gIH1cblxuICAvLyBXZSBkb24ndCB3YW50IGFueSByZXNwb25kZXIgZXZlbnRzIGJ1YmJsaW5nIG91dCBvZiB0aGUgbW9kYWwuXG4gIF9zaG91bGRTZXRSZXNwb25kZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuY29uc3Qgc2lkZSA9IEkxOG5NYW5hZ2VyLmdldENvbnN0YW50cygpLmlzUlRMID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgbW9kYWw6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgfSxcbiAgLyogJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF0gTmF0dXJhbCBJbmZlcmVuY2Ugcm9sbG91dC4gU2VlXG4gICAqIGh0dHBzOi8vZmJ1cmwuY29tL3dvcmtwbGFjZS82MjkxZ2Z2dSAqL1xuICBjb250YWluZXI6IHtcbiAgICAvKiAkRmxvd0ZpeE1lW2ludmFsaWQtY29tcHV0ZWQtcHJvcF0gKD49MC4xMTEuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpc1xuICAgICAqIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuMTExIHdhcyBkZXBsb3llZC4gVG8gc2VlXG4gICAgICogdGhlIGVycm9yLCBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXVxuICAgIFtzaWRlXTogMCxcbiAgICB0b3A6IDAsXG4gICAgZmxleDogMSxcbiAgfSxcbn0pO1xuXG50eXBlIE1vZGFsUmVmUHJvcHMgPSAkUmVhZE9ubHk8e1xuICByZWY/OiBSZWFjdC5SZWZTZXR0ZXI8UHVibGljTW9kYWxJbnN0YW5jZT4sXG59PjtcblxuLy8gTk9URTogVGhpcyB3cmFwcGVyIGNvbXBvbmVudCBpcyBuZWNlc3NhcnkgYmVjYXVzZSBgTW9kYWxgIGlzIGEgY2xhc3Ncbi8vIGNvbXBvbmVudCBhbmQgd2UgbmVlZCB0byBtYXAgYHJlZmAgdG8gYSBkaWZmZXJlbnRseSBuYW1lZCBwcm9wLiBUaGlzIGNhbiBiZVxuLy8gcmVtb3ZlZCB3aGVuIGBNb2RhbGAgaXMgYSBmdW5jdGlvbmFsIGNvbXBvbmVudC5cbmZ1bmN0aW9uIFdyYXBwZXIoe1xuICByZWYsXG4gIC4uLnByb3BzXG59OiB7XG4gIC4uLk1vZGFsUmVmUHJvcHMsXG4gIC4uLk1vZGFsUHJvcHMsXG59KTogUmVhY3QuTm9kZSB7XG4gIHJldHVybiA8TW9kYWwgey4uLnByb3BzfSBtb2RhbFJlZj17cmVmfSAvPjtcbn1cblxuV3JhcHBlci5kaXNwbGF5TmFtZSA9ICdNb2RhbCc7XG4vLyAkRmxvd0V4cGVjdGVkRXJyb3JbcHJvcC1taXNzaW5nXVxuV3JhcHBlci5Db250ZXh0ID0gVmlydHVhbGl6ZWRMaXN0Q29udGV4dFJlc2V0dGVyO1xuXG5leHBvcnQgZGVmYXVsdCBXcmFwcGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFlQSxJQUFBQSxtQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBR0EsSUFBQUMsbUJBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGdDQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxpQkFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksS0FBQSxHQUFBQyx1QkFBQSxDQUFBTCxPQUFBO0FBQStCLElBQUFNLFdBQUEsR0FBQU4sT0FBQTtBQUFBLElBQUFPLFNBQUE7QUFFL0IsSUFBTUMsVUFBVSxHQUFHUixPQUFPLHNDQUFzQyxDQUFDLENBQUNTLE9BQU87QUFDekUsSUFBTUMsSUFBSSxHQUFHVixPQUFPLDBCQUEwQixDQUFDLENBQUNTLE9BQU87QUFDdkQsSUFBTUUsWUFBWSxHQUFHWCxPQUFPLDhCQUE4QixDQUFDLENBQUNTLE9BQU87QUFDbkUsSUFBTUcsV0FBVyxHQUFHWixPQUFPLDZCQUE2QixDQUFDLENBQUNTLE9BQU87QUFDakUs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