c39803478a7d4146b5a13ad4320f2381
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.verifyPhoneUseCase = exports.verifyEmailUseCase = exports.resetPasswordUseCase = exports.resendVerificationUseCase = exports.registerUseCase = exports.refreshSessionUseCase = exports.logoutUseCase = exports.loginUseCase = exports.loadCurrentUserUseCase = exports.identifyUseCase = exports.forgotPasswordUseCase = exports.changePasswordUseCase = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _errors = require("../../errors");
var _security = require("../../security");
var _csrf = require("../../services/csrf");
var _auth = require("./auth.model");
var _auth2 = require("./auth.api");
var _auth3 = require("./auth.rules");
var execute = function () {
  var _ref = (0, _asyncToGenerator2.default)(function* (work) {
    try {
      return yield work();
    } catch (error) {
      throw (0, _errors.handleError)(error);
    }
  });
  return function execute(_x) {
    return _ref.apply(this, arguments);
  };
}();
var unwrap = function unwrap(res) {
  var _res$data$data, _res$data;
  return (_res$data$data = res == null || (_res$data = res.data) == null ? void 0 : _res$data.data) != null ? _res$data$data : res == null ? void 0 : res.data;
};
var identifyUseCase = exports.identifyUseCase = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var identifier = payload.identifier;
      if (!identifier) {
        throw new Error('Identifier is required');
      }
      var response = yield (0, _auth2.identifyApi)({
        identifier: identifier
      });
      var result = unwrap(response);
      return result && Array.isArray(result.users) ? result : {
        users: []
      };
    }));
  });
  return function identifyUseCase(_x2) {
    return _ref2.apply(this, arguments);
  };
}();
var loginUseCase = exports.loginUseCase = function () {
  var _ref4 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var parsed = (0, _auth3.parseCredentials)(payload);
      try {
        var response = yield (0, _auth2.loginApi)(parsed);
        var data = unwrap(response);
        if (!data) throw new Error('Invalid login response');
        if (data.requires_facility_selection) {
          return {
            requiresFacilitySelection: true,
            facilities: data.facilities || [],
            tenantId: data.tenant_id,
            identifier: payload.email || payload.phone,
            password: payload.password
          };
        }
        var _normalizeAuthRespons = (0, _auth.normalizeAuthResponse)(data),
          user = _normalizeAuthRespons.user,
          tokens = _normalizeAuthRespons.tokens;
        if (tokens != null && tokens.accessToken && tokens != null && tokens.refreshToken) {
          yield _security.tokenManager.setTokens(tokens.accessToken, tokens.refreshToken);
        }
        return user;
      } catch (apiError) {
        var isDevelopment = process.env.NODE_ENV === 'development' || __DEV__;
        var isNetworkError = (apiError == null ? void 0 : apiError.code) === 'NETWORK_ERROR' || (apiError == null ? void 0 : apiError.status) >= 500;
        if (isDevelopment && isNetworkError) {
          var testUser = {
            id: 'test-user-' + Date.now(),
            email: parsed.email || 'test@hospital.com',
            phone: parsed.phone || '+1234567890',
            role: 'SUPER_ADMIN',
            status: 'ACTIVE',
            first_name: 'Test',
            last_name: 'User'
          };
          yield _security.tokenManager.setTokens('test-token-' + Date.now(), 'test-token-' + Date.now());
          return testUser;
        }
        throw apiError;
      }
    }));
  });
  return function loginUseCase(_x3) {
    return _ref4.apply(this, arguments);
  };
}();
var registerUseCase = exports.registerUseCase = function () {
  var _ref6 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.registerApi)(parsed);
      var data = unwrap(response);
      var _normalizeAuthRespons2 = (0, _auth.normalizeAuthResponse)(data),
        user = _normalizeAuthRespons2.user,
        tokens = _normalizeAuthRespons2.tokens;
      if (tokens != null && tokens.accessToken && tokens != null && tokens.refreshToken) {
        yield _security.tokenManager.setTokens(tokens.accessToken, tokens.refreshToken);
      }
      return user;
    }));
  });
  return function registerUseCase(_x4) {
    return _ref6.apply(this, arguments);
  };
}();
var logoutUseCase = exports.logoutUseCase = function () {
  var _ref8 = (0, _asyncToGenerator2.default)(function* () {
    return execute((0, _asyncToGenerator2.default)(function* () {
      try {
        yield (0, _auth2.logoutApi)();
        return true;
      } finally {
        yield _security.tokenManager.clearTokens();
        (0, _csrf.clearCsrfToken)();
      }
    }));
  });
  return function logoutUseCase() {
    return _ref8.apply(this, arguments);
  };
}();
var refreshSessionUseCase = exports.refreshSessionUseCase = function () {
  var _ref0 = (0, _asyncToGenerator2.default)(function* () {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var refreshToken = yield _security.tokenManager.getRefreshToken();
      var response = yield (0, _auth2.refreshApi)({
        refreshToken: refreshToken
      });
      var data = unwrap(response);
      var _normalizeAuthRespons3 = (0, _auth.normalizeAuthResponse)(data),
        tokens = _normalizeAuthRespons3.tokens;
      if (tokens != null && tokens.accessToken && tokens != null && tokens.refreshToken) {
        yield _security.tokenManager.setTokens(tokens.accessToken, tokens.refreshToken);
      }
      return tokens;
    }));
  });
  return function refreshSessionUseCase() {
    return _ref0.apply(this, arguments);
  };
}();
var loadCurrentUserUseCase = exports.loadCurrentUserUseCase = function () {
  var _ref10 = (0, _asyncToGenerator2.default)(function* () {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var response = yield (0, _auth2.getCurrentUserApi)();
      var data = unwrap(response);
      var _normalizeAuthRespons4 = (0, _auth.normalizeAuthResponse)(data),
        user = _normalizeAuthRespons4.user;
      return user;
    }));
  });
  return function loadCurrentUserUseCase() {
    return _ref10.apply(this, arguments);
  };
}();
var verifyEmailUseCase = exports.verifyEmailUseCase = function () {
  var _ref12 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.verifyEmailApi)(parsed);
      return (_unwrap = unwrap(response)) != null ? _unwrap : null;
    }));
  });
  return function verifyEmailUseCase(_x5) {
    return _ref12.apply(this, arguments);
  };
}();
var verifyPhoneUseCase = exports.verifyPhoneUseCase = function () {
  var _ref14 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap2;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.verifyPhoneApi)(parsed);
      return (_unwrap2 = unwrap(response)) != null ? _unwrap2 : null;
    }));
  });
  return function verifyPhoneUseCase(_x6) {
    return _ref14.apply(this, arguments);
  };
}();
var resendVerificationUseCase = exports.resendVerificationUseCase = function () {
  var _ref16 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap3;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.resendVerificationApi)(parsed);
      return (_unwrap3 = unwrap(response)) != null ? _unwrap3 : null;
    }));
  });
  return function resendVerificationUseCase(_x7) {
    return _ref16.apply(this, arguments);
  };
}();
var forgotPasswordUseCase = exports.forgotPasswordUseCase = function () {
  var _ref18 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap4;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.forgotPasswordApi)(parsed);
      return (_unwrap4 = unwrap(response)) != null ? _unwrap4 : null;
    }));
  });
  return function forgotPasswordUseCase(_x8) {
    return _ref18.apply(this, arguments);
  };
}();
var resetPasswordUseCase = exports.resetPasswordUseCase = function () {
  var _ref20 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap5;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.resetPasswordApi)(parsed);
      return (_unwrap5 = unwrap(response)) != null ? _unwrap5 : null;
    }));
  });
  return function resetPasswordUseCase(_x9) {
    return _ref20.apply(this, arguments);
  };
}();
var changePasswordUseCase = exports.changePasswordUseCase = function () {
  var _ref22 = (0, _asyncToGenerator2.default)(function* (payload) {
    return execute((0, _asyncToGenerator2.default)(function* () {
      var _unwrap6;
      var parsed = (0, _auth3.parseAuthPayload)(payload);
      var response = yield (0, _auth2.changePasswordApi)(parsed);
      return (_unwrap6 = unwrap(response)) != null ? _unwrap6 : null;
    }));
  });
  return function changePasswordUseCase(_x0) {
    return _ref22.apply(this, arguments);
  };
}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXJyb3JzIiwicmVxdWlyZSIsIl9zZWN1cml0eSIsIl9jc3JmIiwiX2F1dGgiLCJfYXV0aDIiLCJfYXV0aDMiLCJleGVjdXRlIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImRlZmF1bHQiLCJ3b3JrIiwiZXJyb3IiLCJoYW5kbGVFcnJvciIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ1bndyYXAiLCJyZXMiLCJfcmVzJGRhdGEkZGF0YSIsIl9yZXMkZGF0YSIsImRhdGEiLCJpZGVudGlmeVVzZUNhc2UiLCJleHBvcnRzIiwiX3JlZjIiLCJwYXlsb2FkIiwiaWRlbnRpZmllciIsIkVycm9yIiwicmVzcG9uc2UiLCJpZGVudGlmeUFwaSIsInJlc3VsdCIsIkFycmF5IiwiaXNBcnJheSIsInVzZXJzIiwiX3gyIiwibG9naW5Vc2VDYXNlIiwiX3JlZjQiLCJwYXJzZWQiLCJwYXJzZUNyZWRlbnRpYWxzIiwibG9naW5BcGkiLCJyZXF1aXJlc19mYWNpbGl0eV9zZWxlY3Rpb24iLCJyZXF1aXJlc0ZhY2lsaXR5U2VsZWN0aW9uIiwiZmFjaWxpdGllcyIsInRlbmFudElkIiwidGVuYW50X2lkIiwiZW1haWwiLCJwaG9uZSIsInBhc3N3b3JkIiwiX25vcm1hbGl6ZUF1dGhSZXNwb25zIiwibm9ybWFsaXplQXV0aFJlc3BvbnNlIiwidXNlciIsInRva2VucyIsImFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwidG9rZW5NYW5hZ2VyIiwic2V0VG9rZW5zIiwiYXBpRXJyb3IiLCJpc0RldmVsb3BtZW50IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiX19ERVZfXyIsImlzTmV0d29ya0Vycm9yIiwiY29kZSIsInN0YXR1cyIsInRlc3RVc2VyIiwiaWQiLCJEYXRlIiwibm93Iiwicm9sZSIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJfeDMiLCJyZWdpc3RlclVzZUNhc2UiLCJfcmVmNiIsInBhcnNlQXV0aFBheWxvYWQiLCJyZWdpc3RlckFwaSIsIl9ub3JtYWxpemVBdXRoUmVzcG9uczIiLCJfeDQiLCJsb2dvdXRVc2VDYXNlIiwiX3JlZjgiLCJsb2dvdXRBcGkiLCJjbGVhclRva2VucyIsImNsZWFyQ3NyZlRva2VuIiwicmVmcmVzaFNlc3Npb25Vc2VDYXNlIiwiX3JlZjAiLCJnZXRSZWZyZXNoVG9rZW4iLCJyZWZyZXNoQXBpIiwiX25vcm1hbGl6ZUF1dGhSZXNwb25zMyIsImxvYWRDdXJyZW50VXNlclVzZUNhc2UiLCJfcmVmMTAiLCJnZXRDdXJyZW50VXNlckFwaSIsIl9ub3JtYWxpemVBdXRoUmVzcG9uczQiLCJ2ZXJpZnlFbWFpbFVzZUNhc2UiLCJfcmVmMTIiLCJfdW53cmFwIiwidmVyaWZ5RW1haWxBcGkiLCJfeDUiLCJ2ZXJpZnlQaG9uZVVzZUNhc2UiLCJfcmVmMTQiLCJfdW53cmFwMiIsInZlcmlmeVBob25lQXBpIiwiX3g2IiwicmVzZW5kVmVyaWZpY2F0aW9uVXNlQ2FzZSIsIl9yZWYxNiIsIl91bndyYXAzIiwicmVzZW5kVmVyaWZpY2F0aW9uQXBpIiwiX3g3IiwiZm9yZ290UGFzc3dvcmRVc2VDYXNlIiwiX3JlZjE4IiwiX3Vud3JhcDQiLCJmb3Jnb3RQYXNzd29yZEFwaSIsIl94OCIsInJlc2V0UGFzc3dvcmRVc2VDYXNlIiwiX3JlZjIwIiwiX3Vud3JhcDUiLCJyZXNldFBhc3N3b3JkQXBpIiwiX3g5IiwiY2hhbmdlUGFzc3dvcmRVc2VDYXNlIiwiX3JlZjIyIiwiX3Vud3JhcDYiLCJjaGFuZ2VQYXNzd29yZEFwaSIsIl94MCJdLCJzb3VyY2VzIjpbImF1dGgudXNlY2FzZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQXV0aCBVc2UgQ2FzZXNcclxuICogRmlsZTogYXV0aC51c2VjYXNlLmpzXHJcbiAqIEJhY2tlbmQgcmVzcG9uc2UtZm9ybWF0Lm1kYzogc3VjY2VzcyBib2R5IGlzIHsgc3RhdHVzLCBtZXNzYWdlLCBkYXRhLCBtZXRhIH07IHVud3JhcCBkYXRhLlxyXG4gKi9cclxuaW1wb3J0IHsgaGFuZGxlRXJyb3IgfSBmcm9tICdAZXJyb3JzJztcclxuaW1wb3J0IHsgdG9rZW5NYW5hZ2VyIH0gZnJvbSAnQHNlY3VyaXR5JztcclxuaW1wb3J0IHsgY2xlYXJDc3JmVG9rZW4gfSBmcm9tICdAc2VydmljZXMvY3NyZic7XHJcbmltcG9ydCB7IG5vcm1hbGl6ZUF1dGhSZXNwb25zZSB9IGZyb20gJy4vYXV0aC5tb2RlbCc7XHJcbmltcG9ydCB7XHJcbiAgY2hhbmdlUGFzc3dvcmRBcGksXHJcbiAgZm9yZ290UGFzc3dvcmRBcGksXHJcbiAgZ2V0Q3VycmVudFVzZXJBcGksXHJcbiAgaWRlbnRpZnlBcGksXHJcbiAgbG9naW5BcGksXHJcbiAgbG9nb3V0QXBpLFxyXG4gIHJlZnJlc2hBcGksXHJcbiAgcmVnaXN0ZXJBcGksXHJcbiAgcmVzZW5kVmVyaWZpY2F0aW9uQXBpLFxyXG4gIHJlc2V0UGFzc3dvcmRBcGksXHJcbiAgdmVyaWZ5RW1haWxBcGksXHJcbiAgdmVyaWZ5UGhvbmVBcGksXHJcbn0gZnJvbSAnLi9hdXRoLmFwaSc7XHJcbmltcG9ydCB7IHBhcnNlQXV0aFBheWxvYWQsIHBhcnNlQ3JlZGVudGlhbHMgfSBmcm9tICcuL2F1dGgucnVsZXMnO1xyXG5cclxuY29uc3QgZXhlY3V0ZSA9IGFzeW5jICh3b3JrKSA9PiB7XHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBhd2FpdCB3b3JrKCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHRocm93IGhhbmRsZUVycm9yKGVycm9yKTtcclxuICB9XHJcbn07XHJcblxyXG4vKiogVW53cmFwIGJhY2tlbmQgc3VjY2VzcyBib2R5OiB7IHN0YXR1cywgbWVzc2FnZSwgZGF0YSwgbWV0YSB9IC0+IGRhdGEgKi9cclxuY29uc3QgdW53cmFwID0gKHJlcykgPT4gcmVzPy5kYXRhPy5kYXRhID8/IHJlcz8uZGF0YTtcclxuXHJcbmNvbnN0IGlkZW50aWZ5VXNlQ2FzZSA9IGFzeW5jIChwYXlsb2FkKSA9PlxyXG4gIGV4ZWN1dGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgeyBpZGVudGlmaWVyIH0gPSBwYXlsb2FkO1xyXG4gICAgaWYgKCFpZGVudGlmaWVyKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSWRlbnRpZmllciBpcyByZXF1aXJlZCcpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpZGVudGlmeUFwaSh7IGlkZW50aWZpZXIgfSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSB1bndyYXAocmVzcG9uc2UpO1xyXG4gICAgcmV0dXJuIHJlc3VsdCAmJiBBcnJheS5pc0FycmF5KHJlc3VsdC51c2VycykgPyByZXN1bHQgOiB7IHVzZXJzOiBbXSB9O1xyXG4gIH0pO1xyXG5cclxuY29uc3QgbG9naW5Vc2VDYXNlID0gYXN5bmMgKHBheWxvYWQpID0+XHJcbiAgZXhlY3V0ZShhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUNyZWRlbnRpYWxzKHBheWxvYWQpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBsb2dpbkFwaShwYXJzZWQpO1xyXG4gICAgICBjb25zdCBkYXRhID0gdW53cmFwKHJlc3BvbnNlKTtcclxuICAgICAgaWYgKCFkYXRhKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbG9naW4gcmVzcG9uc2UnKTtcclxuXHJcbiAgICAgIGlmIChkYXRhLnJlcXVpcmVzX2ZhY2lsaXR5X3NlbGVjdGlvbikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZXF1aXJlc0ZhY2lsaXR5U2VsZWN0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgZmFjaWxpdGllczogZGF0YS5mYWNpbGl0aWVzIHx8IFtdLFxyXG4gICAgICAgICAgdGVuYW50SWQ6IGRhdGEudGVuYW50X2lkLFxyXG4gICAgICAgICAgaWRlbnRpZmllcjogcGF5bG9hZC5lbWFpbCB8fCBwYXlsb2FkLnBob25lLFxyXG4gICAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgeyB1c2VyLCB0b2tlbnMgfSA9IG5vcm1hbGl6ZUF1dGhSZXNwb25zZShkYXRhKTtcclxuICAgICAgaWYgKHRva2Vucz8uYWNjZXNzVG9rZW4gJiYgdG9rZW5zPy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICBhd2FpdCB0b2tlbk1hbmFnZXIuc2V0VG9rZW5zKHRva2Vucy5hY2Nlc3NUb2tlbiwgdG9rZW5zLnJlZnJlc2hUb2tlbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9IGNhdGNoIChhcGlFcnJvcikge1xyXG4gICAgICBjb25zdCBpc0RldmVsb3BtZW50ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgfHwgX19ERVZfXztcclxuICAgICAgY29uc3QgaXNOZXR3b3JrRXJyb3IgPSBhcGlFcnJvcj8uY29kZSA9PT0gJ05FVFdPUktfRVJST1InIHx8IGFwaUVycm9yPy5zdGF0dXMgPj0gNTAwO1xyXG4gICAgICBpZiAoaXNEZXZlbG9wbWVudCAmJiBpc05ldHdvcmtFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IHRlc3RVc2VyID0ge1xyXG4gICAgICAgICAgaWQ6ICd0ZXN0LXVzZXItJyArIERhdGUubm93KCksXHJcbiAgICAgICAgICBlbWFpbDogcGFyc2VkLmVtYWlsIHx8ICd0ZXN0QGhvc3BpdGFsLmNvbScsXHJcbiAgICAgICAgICBwaG9uZTogcGFyc2VkLnBob25lIHx8ICcrMTIzNDU2Nzg5MCcsXHJcbiAgICAgICAgICByb2xlOiAnU1VQRVJfQURNSU4nLFxyXG4gICAgICAgICAgc3RhdHVzOiAnQUNUSVZFJyxcclxuICAgICAgICAgIGZpcnN0X25hbWU6ICdUZXN0JyxcclxuICAgICAgICAgIGxhc3RfbmFtZTogJ1VzZXInLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYXdhaXQgdG9rZW5NYW5hZ2VyLnNldFRva2VucygndGVzdC10b2tlbi0nICsgRGF0ZS5ub3coKSwgJ3Rlc3QtdG9rZW4tJyArIERhdGUubm93KCkpO1xyXG4gICAgICAgIHJldHVybiB0ZXN0VXNlcjtcclxuICAgICAgfVxyXG4gICAgICB0aHJvdyBhcGlFcnJvcjtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbmNvbnN0IHJlZ2lzdGVyVXNlQ2FzZSA9IGFzeW5jIChwYXlsb2FkKSA9PlxyXG4gIGV4ZWN1dGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VBdXRoUGF5bG9hZChwYXlsb2FkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVnaXN0ZXJBcGkocGFyc2VkKTtcclxuICAgIGNvbnN0IGRhdGEgPSB1bndyYXAocmVzcG9uc2UpO1xyXG4gICAgY29uc3QgeyB1c2VyLCB0b2tlbnMgfSA9IG5vcm1hbGl6ZUF1dGhSZXNwb25zZShkYXRhKTtcclxuICAgIGlmICh0b2tlbnM/LmFjY2Vzc1Rva2VuICYmIHRva2Vucz8ucmVmcmVzaFRva2VuKSB7XHJcbiAgICAgIGF3YWl0IHRva2VuTWFuYWdlci5zZXRUb2tlbnModG9rZW5zLmFjY2Vzc1Rva2VuLCB0b2tlbnMucmVmcmVzaFRva2VuKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgbG9nb3V0VXNlQ2FzZSA9IGFzeW5jICgpID0+XHJcbiAgZXhlY3V0ZShhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBsb2dvdXRBcGkoKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBhd2FpdCB0b2tlbk1hbmFnZXIuY2xlYXJUb2tlbnMoKTtcclxuICAgICAgY2xlYXJDc3JmVG9rZW4oKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbmNvbnN0IHJlZnJlc2hTZXNzaW9uVXNlQ2FzZSA9IGFzeW5jICgpID0+XHJcbiAgZXhlY3V0ZShhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhd2FpdCB0b2tlbk1hbmFnZXIuZ2V0UmVmcmVzaFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlZnJlc2hBcGkoeyByZWZyZXNoVG9rZW4gfSk7XHJcbiAgICBjb25zdCBkYXRhID0gdW53cmFwKHJlc3BvbnNlKTtcclxuICAgIGNvbnN0IHsgdG9rZW5zIH0gPSBub3JtYWxpemVBdXRoUmVzcG9uc2UoZGF0YSk7XHJcbiAgICBpZiAodG9rZW5zPy5hY2Nlc3NUb2tlbiAmJiB0b2tlbnM/LnJlZnJlc2hUb2tlbikge1xyXG4gICAgICBhd2FpdCB0b2tlbk1hbmFnZXIuc2V0VG9rZW5zKHRva2Vucy5hY2Nlc3NUb2tlbiwgdG9rZW5zLnJlZnJlc2hUb2tlbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG9rZW5zO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgbG9hZEN1cnJlbnRVc2VyVXNlQ2FzZSA9IGFzeW5jICgpID0+XHJcbiAgZXhlY3V0ZShhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEN1cnJlbnRVc2VyQXBpKCk7XHJcbiAgICBjb25zdCBkYXRhID0gdW53cmFwKHJlc3BvbnNlKTtcclxuICAgIGNvbnN0IHsgdXNlciB9ID0gbm9ybWFsaXplQXV0aFJlc3BvbnNlKGRhdGEpO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfSk7XHJcblxyXG5jb25zdCB2ZXJpZnlFbWFpbFVzZUNhc2UgPSBhc3luYyAocGF5bG9hZCkgPT5cclxuICBleGVjdXRlKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQXV0aFBheWxvYWQocGF5bG9hZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHZlcmlmeUVtYWlsQXBpKHBhcnNlZCk7XHJcbiAgICByZXR1cm4gdW53cmFwKHJlc3BvbnNlKSA/PyBudWxsO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgdmVyaWZ5UGhvbmVVc2VDYXNlID0gYXN5bmMgKHBheWxvYWQpID0+XHJcbiAgZXhlY3V0ZShhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUF1dGhQYXlsb2FkKHBheWxvYWQpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB2ZXJpZnlQaG9uZUFwaShwYXJzZWQpO1xyXG4gICAgcmV0dXJuIHVud3JhcChyZXNwb25zZSkgPz8gbnVsbDtcclxuICB9KTtcclxuXHJcbmNvbnN0IHJlc2VuZFZlcmlmaWNhdGlvblVzZUNhc2UgPSBhc3luYyAocGF5bG9hZCkgPT5cclxuICBleGVjdXRlKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQXV0aFBheWxvYWQocGF5bG9hZCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc2VuZFZlcmlmaWNhdGlvbkFwaShwYXJzZWQpO1xyXG4gICAgcmV0dXJuIHVud3JhcChyZXNwb25zZSkgPz8gbnVsbDtcclxuICB9KTtcclxuXHJcbmNvbnN0IGZvcmdvdFBhc3N3b3JkVXNlQ2FzZSA9IGFzeW5jIChwYXlsb2FkKSA9PlxyXG4gIGV4ZWN1dGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VBdXRoUGF5bG9hZChwYXlsb2FkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZm9yZ290UGFzc3dvcmRBcGkocGFyc2VkKTtcclxuICAgIHJldHVybiB1bndyYXAocmVzcG9uc2UpID8/IG51bGw7XHJcbiAgfSk7XHJcblxyXG5jb25zdCByZXNldFBhc3N3b3JkVXNlQ2FzZSA9IGFzeW5jIChwYXlsb2FkKSA9PlxyXG4gIGV4ZWN1dGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VBdXRoUGF5bG9hZChwYXlsb2FkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzZXRQYXNzd29yZEFwaShwYXJzZWQpO1xyXG4gICAgcmV0dXJuIHVud3JhcChyZXNwb25zZSkgPz8gbnVsbDtcclxuICB9KTtcclxuXHJcbmNvbnN0IGNoYW5nZVBhc3N3b3JkVXNlQ2FzZSA9IGFzeW5jIChwYXlsb2FkKSA9PlxyXG4gIGV4ZWN1dGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VkID0gcGFyc2VBdXRoUGF5bG9hZChwYXlsb2FkKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY2hhbmdlUGFzc3dvcmRBcGkocGFyc2VkKTtcclxuICAgIHJldHVybiB1bndyYXAocmVzcG9uc2UpID8/IG51bGw7XHJcbiAgfSk7XHJcblxyXG5leHBvcnQge1xyXG4gIGlkZW50aWZ5VXNlQ2FzZSxcclxuICBsb2dpblVzZUNhc2UsXHJcbiAgcmVnaXN0ZXJVc2VDYXNlLFxyXG4gIGxvZ291dFVzZUNhc2UsXHJcbiAgcmVmcmVzaFNlc3Npb25Vc2VDYXNlLFxyXG4gIGxvYWRDdXJyZW50VXNlclVzZUNhc2UsXHJcbiAgdmVyaWZ5RW1haWxVc2VDYXNlLFxyXG4gIHZlcmlmeVBob25lVXNlQ2FzZSxcclxuICByZXNlbmRWZXJpZmljYXRpb25Vc2VDYXNlLFxyXG4gIGZvcmdvdFBhc3N3b3JkVXNlQ2FzZSxcclxuICByZXNldFBhc3N3b3JkVXNlQ2FzZSxcclxuICBjaGFuZ2VQYXNzd29yZFVzZUNhc2UsXHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsS0FBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksTUFBQSxHQUFBSixPQUFBO0FBY0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBRUEsSUFBTU0sT0FBTztFQUFBLElBQUFDLElBQUEsT0FBQUMsa0JBQUEsQ0FBQUMsT0FBQSxFQUFHLFdBQU9DLElBQUksRUFBSztJQUM5QixJQUFJO01BQ0YsYUFBYUEsSUFBSSxDQUFDLENBQUM7SUFDckIsQ0FB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