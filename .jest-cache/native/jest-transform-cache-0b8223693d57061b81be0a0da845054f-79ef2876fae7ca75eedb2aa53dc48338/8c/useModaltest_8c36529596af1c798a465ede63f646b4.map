{"version":3,"names":["_react","_interopRequireDefault","require","_reactTestRenderer","_useModal","_jsxRuntime","act","TestRenderer","renderHook","hook","_ref","arguments","length","undefined","initialProps","result","renderer","HookHarness","_ref2","hookProps","hookResult","Object","assign","create","jsx","current","rerender","newProps","update","unmount","describe","beforeEach","jest","clearAllMocks","it","_renderHook","useModal","visible","onDismiss","fn","expect","handleBackdropPress","toBe","mockOnDismiss","_renderHook2","dismissOnBackdrop","toHaveBeenCalledTimes","_renderHook3","not","toHaveBeenCalled","_renderHook4","toBeDefined","_renderHook5","_renderHook6","_renderHook7","_renderHook8"],"sources":["useModal.test.js"],"sourcesContent":["/**\r\n * useModal Hook Tests\r\n * File: useModal.test.js\r\n */\r\n\r\nimport React from 'react';\r\nimport TestRenderer from 'react-test-renderer';\r\nimport useModal from '@platform/components/feedback/Modal/useModal';\r\n\r\nconst act = TestRenderer.act;\r\n\r\n// Custom renderHook implementation to avoid @testing-library/react-hooks dependency\r\nconst renderHook = (hook, { initialProps } = {}) => {\r\n  const result = {};\r\n  let renderer;\r\n  \r\n  const HookHarness = ({ hookProps }) => {\r\n    const hookResult = hook(hookProps);\r\n    Object.assign(result, hookResult);\r\n    return null;\r\n  };\r\n  \r\n  act(() => {\r\n    renderer = TestRenderer.create(<HookHarness hookProps={initialProps} />);\r\n  });\r\n  \r\n  return {\r\n    result: { current: result },\r\n    rerender: (newProps) => {\r\n      act(() => {\r\n        renderer.update(<HookHarness hookProps={newProps} />);\r\n      });\r\n    },\r\n    unmount: () => {\r\n      act(() => {\r\n        renderer.unmount();\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\ndescribe('useModal', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('Initialization', () => {\r\n    it('should return handleBackdropPress function', () => {\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: jest.fn() } });\r\n      \r\n      expect(typeof result.current.handleBackdropPress).toBe('function');\r\n    });\r\n  });\r\n\r\n  describe('Backdrop Press Handler', () => {\r\n    it('should call onDismiss when handleBackdropPress is called and dismissOnBackdrop is true', () => {\r\n      const mockOnDismiss = jest.fn();\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: mockOnDismiss, dismissOnBackdrop: true } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      expect(mockOnDismiss).toHaveBeenCalledTimes(1);\r\n    });\r\n\r\n    it('should not call onDismiss when dismissOnBackdrop is false', () => {\r\n      const mockOnDismiss = jest.fn();\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: mockOnDismiss, dismissOnBackdrop: false } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      expect(mockOnDismiss).not.toHaveBeenCalled();\r\n    });\r\n\r\n    it('should not call onDismiss when onDismiss is not provided', () => {\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, dismissOnBackdrop: true } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      // Should not throw\r\n      expect(result.current.handleBackdropPress).toBeDefined();\r\n    });\r\n\r\n    it('should default dismissOnBackdrop to true', () => {\r\n      const mockOnDismiss = jest.fn();\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: mockOnDismiss } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      expect(mockOnDismiss).toHaveBeenCalledTimes(1);\r\n    });\r\n  });\r\n\r\n  // Note: Keyboard handling is now done at the component level (KeyboardAvoidingView for native, focus trap for web)\r\n  // The hook no longer contains keyboard listener logic per platform-ui.mdc rules (no Platform.OS checks in hooks)\r\n\r\n  describe('Edge Cases', () => {\r\n    it('should handle undefined onDismiss', () => {\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: undefined } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      // Should not throw\r\n      expect(result.current.handleBackdropPress).toBeDefined();\r\n    });\r\n\r\n    it('should handle null onDismiss', () => {\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: null } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      // Should not throw\r\n      expect(result.current.handleBackdropPress).toBeDefined();\r\n    });\r\n\r\n    it('should handle multiple backdrop presses', () => {\r\n      const mockOnDismiss = jest.fn();\r\n      const { result } = renderHook(useModal, { initialProps: { visible: true, onDismiss: mockOnDismiss } });\r\n      \r\n      act(() => {\r\n        result.current.handleBackdropPress();\r\n        result.current.handleBackdropPress();\r\n        result.current.handleBackdropPress();\r\n      });\r\n      \r\n      expect(mockOnDismiss).toHaveBeenCalledTimes(3);\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}