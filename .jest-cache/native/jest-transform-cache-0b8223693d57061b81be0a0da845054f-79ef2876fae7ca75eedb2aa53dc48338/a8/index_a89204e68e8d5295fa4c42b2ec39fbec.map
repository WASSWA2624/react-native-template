{"version":3,"names":["_react","_interopRequireDefault","require","_en","_jsxRuntime","LOCALE_KEY","LOCALE_STORAGE_KEY","exports","DEFAULT_LOCALE","translations","en","getNestedValue","obj","path","undefined","split","reduce","current","key","interpolate","value","params","text","Object","keys","forEach","param","replaceAll","String","getIntlLocale","_Intl$DateTimeFormat$","_Intl$DateTimeFormat","Intl","DateTimeFormat","resolvedOptions","call","locale","_unused","resolveSupportedLocale","candidate","supportedLocales","trim","includes","base","getDeviceLocale","createI18n","_ref","arguments","length","_ref$storage","storage","_ref$initialLocale","initialLocale","localeCache","getCurrentLocale","_ref2","_asyncToGenerator2","default","saved","getItem","apply","setLocale","_ref3","resolved","Error","setItem","_x","t","_ref4","dict","fallback","raw","_x2","tSync","overrideLocale","resolvedLocale","defaultI18n","I18nProvider","_ref5","children","jsx","Fragment"],"sources":["index.js"],"sourcesContent":["/**\r\n * i18n Provider\r\n * Manages translations and locale\r\n * Note: Storage dependency is optional (loaded lazily).\r\n * Note: Avoids native-module locale dependencies so Jest runs reliably.\r\n */\r\nimport React from 'react';\r\nimport en from './locales/en.json';\r\n\r\n// NOTE: During development, only 'en' locale is created.\r\n// All other locales (zh, hi, es, fr, ar, bn, pt, ru, ur, id, de, ja, pcm, mr, te, tr, ta, yue, vi, sw, lg)\r\n// will be created in Phase 12 (Finalization) after the English locale is complete.\r\n// This ensures 'en' is the first and complete locale that all other locales build upon.\r\n\r\nconst LOCALE_KEY = 'user_locale';\r\nconst LOCALE_STORAGE_KEY = LOCALE_KEY;\r\nconst DEFAULT_LOCALE = 'en';\r\n\r\nconst translations = { en };\r\n\r\nconst getNestedValue = (obj, path) => {\r\n  if (!obj || typeof obj !== 'object') return undefined;\r\n  if (!path || typeof path !== 'string') return undefined;\r\n  return path\r\n    .split('.')\r\n    .reduce((current, key) => (current && current[key] !== undefined ? current[key] : undefined), obj);\r\n};\r\n\r\nconst interpolate = (value, params) => {\r\n  if (typeof value !== 'string') return '';\r\n  if (!params || typeof params !== 'object') return value;\r\n\r\n  let text = value;\r\n  Object.keys(params).forEach((param) => {\r\n    text = text.replaceAll(`{{${param}}}`, String(params[param]));\r\n  });\r\n  return text;\r\n};\r\n\r\nconst getIntlLocale = () => {\r\n  try {\r\n    return Intl?.DateTimeFormat?.().resolvedOptions?.().locale || null;\r\n  } catch {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst resolveSupportedLocale = (candidate) => {\r\n  const supportedLocales = Object.keys(translations);\r\n  if (!candidate || typeof candidate !== 'string') return null;\r\n  const value = candidate.trim();\r\n  if (!value) return null;\r\n  if (supportedLocales.includes(value)) return value;\r\n  const base = value.split('-')[0];\r\n  if (supportedLocales.includes(base)) return base;\r\n  return null;\r\n};\r\n\r\n// Standalone getDeviceLocale for use in store initialization\r\nconst getDeviceLocale = () =>\r\n  resolveSupportedLocale(getIntlLocale()) || DEFAULT_LOCALE;\r\n\r\nconst createI18n = ({ storage = null, initialLocale = null } = {}) => {\r\n  const supportedLocales = Object.keys(translations);\r\n  let localeCache = initialLocale ? resolveSupportedLocale(initialLocale) : null;\r\n\r\n  const getCurrentLocale = async () => {\r\n    if (localeCache) return localeCache;\r\n    const saved = storage ? await storage.getItem(LOCALE_KEY) : null;\r\n    localeCache = resolveSupportedLocale(saved) || getDeviceLocale();\r\n    return localeCache;\r\n  };\r\n\r\n  const setLocale = async (locale) => {\r\n    const resolved = resolveSupportedLocale(locale);\r\n    if (!resolved) throw new Error(`Unsupported locale: ${locale}`);\r\n    localeCache = resolved;\r\n    if (storage) await storage.setItem(LOCALE_KEY, resolved);\r\n  };\r\n\r\n  const t = async (key, params = {}) => {\r\n    const locale = await getCurrentLocale();\r\n    const dict = translations[locale] || translations[DEFAULT_LOCALE];\r\n    const fallback = translations[DEFAULT_LOCALE];\r\n    const raw =\r\n      getNestedValue(dict, key) ||\r\n      getNestedValue(fallback, key) ||\r\n      key;\r\n    return interpolate(String(raw), params);\r\n  };\r\n\r\n  const tSync = (key, params = {}, overrideLocale = null) => {\r\n    const locale = overrideLocale || localeCache || getDeviceLocale();\r\n    const resolvedLocale = resolveSupportedLocale(locale) || DEFAULT_LOCALE;\r\n    const dict = translations[resolvedLocale] || translations[DEFAULT_LOCALE];\r\n    const fallback = translations[DEFAULT_LOCALE];\r\n    const raw =\r\n      getNestedValue(dict, key) ||\r\n      getNestedValue(fallback, key) ||\r\n      key;\r\n    return interpolate(String(raw), params);\r\n  };\r\n\r\n  return { getDeviceLocale, getCurrentLocale, setLocale, t, tSync, supportedLocales };\r\n};\r\n\r\n// Default exports use a lazily loaded storage adapter in the real implementation.\r\nexport { createI18n, getDeviceLocale, LOCALE_STORAGE_KEY };\r\n\r\n// Standalone tSync function for use in non-React contexts (e.g., utility hooks)\r\n// Uses device locale by default (no storage dependency)\r\nconst defaultI18n = createI18n();\r\nexport const tSync = (key, params = {}) => defaultI18n.tSync(key, params);\r\n\r\n/**\r\n * I18nProvider Component\r\n * Provides i18n context to the entire app.\r\n * Per bootstrap-config.mdc: Localization Provider mounted only in root layout.\r\n * Per i18n.mdc: Handles locale detection, translation loading, and locale switching.\r\n * \r\n * Note: The provider ensures i18n is initialized and ready.\r\n * The useI18n hook reads locale from Redux store, so this provider\r\n * primarily ensures i18n system is ready and provides structure for future enhancements.\r\n */\r\nexport const I18nProvider = ({ children }) => {\r\n  // The provider wraps children and ensures i18n is initialized.\r\n  // Locale state is managed via Redux store (accessed by useI18n hook).\r\n  // This provider provides the structure for locale detection and translation loading\r\n  // per i18n.mdc requirements.\r\n  return <>{children}</>;\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]}