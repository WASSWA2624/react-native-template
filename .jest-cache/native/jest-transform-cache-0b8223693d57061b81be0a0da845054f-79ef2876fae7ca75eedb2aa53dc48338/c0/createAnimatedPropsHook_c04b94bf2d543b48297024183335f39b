521273b323b8235430fd469678cfc310
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = createAnimatedPropsHook;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _AnimatedNode = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedNode"));
var _AnimatedProps = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedProps"));
var _AnimatedValue = _interopRequireDefault(require("../../../Libraries/Animated/nodes/AnimatedValue"));
var _ReactFabricPublicInstanceUtils = require("../../../Libraries/ReactNative/ReactFabricPublicInstance/ReactFabricPublicInstanceUtils");
var _useRefEffect = _interopRequireDefault(require("../../../Libraries/Utilities/useRefEffect"));
var ReactNativeFeatureFlags = _interopRequireWildcard(require("../featureflags/ReactNativeFeatureFlags"));
var _createAnimatedPropsMemoHook = require("./createAnimatedPropsMemoHook");
var _NativeAnimatedHelper = _interopRequireDefault(require("./NativeAnimatedHelper"));
var _react = require("react");
function createAnimatedPropsHook(allowlist) {
  var useAnimatedPropsMemo = (0, _createAnimatedPropsMemoHook.createAnimatedPropsMemoHook)(allowlist);
  var useNativePropsInFabric = ReactNativeFeatureFlags.shouldUseSetNativePropsInFabric();
  return function useAnimatedProps(props) {
    var _useReducer = (0, _react.useReducer)(function (count) {
        return count + 1;
      }, 0),
      _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),
      scheduleUpdate = _useReducer2[1];
    var onUpdateRef = (0, _react.useRef)(null);
    var timerRef = (0, _react.useRef)(null);
    var node = useAnimatedPropsMemo(function () {
      return new _AnimatedProps.default(props, function () {
        return onUpdateRef.current == null ? void 0 : onUpdateRef.current();
      }, allowlist);
    }, props);
    (0, _react.useEffect)(function () {
      if (!_NativeAnimatedHelper.default.shouldSignalBatch) {
        _NativeAnimatedHelper.default.API.flushQueue();
      }
      var drivenAnimationEndedListener = null;
      if (node.__isNative) {
        drivenAnimationEndedListener = _NativeAnimatedHelper.default.nativeEventEmitter.addListener('onUserDrivenAnimationEnded', function (data) {
          node.update();
        });
      }
      return function () {
        var _drivenAnimationEnded;
        (_drivenAnimationEnded = drivenAnimationEndedListener) == null || _drivenAnimationEnded.remove();
      };
    });
    var useAnimatedPropsLifecycle = ReactNativeFeatureFlags.scheduleAnimatedCleanupInMicrotask() ? useAnimatedPropsLifecycleWithCleanupInMicrotask : useAnimatedPropsLifecycleWithPrevNodeRef;
    useAnimatedPropsLifecycle(node);
    var refEffect = (0, _react.useCallback)(function (instance) {
      node.setNativeView(instance);
      onUpdateRef.current = function () {
        if (process.env.NODE_ENV === 'test') {
          return scheduleUpdate();
        }
        var isFabricNode = isFabricInstance(instance);
        if (node.__isNative) {
          if (isFabricNode && !(ReactNativeFeatureFlags.cxxNativeAnimatedEnabled() && ReactNativeFeatureFlags.cxxNativeAnimatedRemoveJsSync())) {
            scheduleUpdate();
          }
          return;
        }
        if (typeof instance !== 'object' || typeof (instance == null ? void 0 : instance.setNativeProps) !== 'function') {
          return scheduleUpdate();
        }
        if (!isFabricNode) {
          return instance.setNativeProps(node.__getAnimatedValue());
        }
        if (!useNativePropsInFabric) {
          return scheduleUpdate();
        }
        instance.setNativeProps(node.__getAnimatedValue());
        if (timerRef.current != null) {
          clearTimeout(timerRef.current);
        }
        timerRef.current = setTimeout(function () {
          timerRef.current = null;
          scheduleUpdate();
        }, 48);
      };
      var target = getEventTarget(instance);
      var animatedValueListeners = [];
      var eventTuples = node.__getNativeAnimatedEventTuples();
      for (var _ref of eventTuples) {
        var _ref2 = (0, _slicedToArray2.default)(_ref, 2);
        var propName = _ref2[0];
        var propValue = _ref2[1];
        propValue.__attach(target, propName);
        addListenersToPropsValue(propValue, animatedValueListeners);
      }
      return function () {
        onUpdateRef.current = null;
        for (var _ref3 of eventTuples) {
          var _ref4 = (0, _slicedToArray2.default)(_ref3, 2);
          var _propName = _ref4[0];
          var _propValue = _ref4[1];
          _propValue.__detach(target, _propName);
        }
        for (var _ref5 of animatedValueListeners) {
          var _propValue2 = _ref5.propValue;
          var listenerId = _ref5.listenerId;
          _propValue2.removeListener(listenerId);
        }
      };
    }, [node]);
    var callbackRef = (0, _useRefEffect.default)(refEffect);
    return [reduceAnimatedProps(node, props), callbackRef];
  };
}
function reduceAnimatedProps(node, props) {
  return Object.assign({}, node.__getValueWithStaticProps(props), {
    collapsable: false
  });
}
function addListenersToPropsValue(propValue, accumulator) {
  if (propValue instanceof _AnimatedValue.default) {
    var listenerId = propValue.addListener(function () {});
    accumulator.push({
      propValue: propValue,
      listenerId: listenerId
    });
  } else if (Array.isArray(propValue)) {
    for (var prop of propValue) {
      addListenersToPropsValue(prop, accumulator);
    }
  } else if (propValue instanceof Object) {
    addAnimatedValuesListenersToProps(propValue, accumulator);
  }
}
function addAnimatedValuesListenersToProps(props, accumulator) {
  for (var propName in props) {
    var propValue = props[propName];
    addListenersToPropsValue(propValue, accumulator);
  }
}
function useAnimatedPropsLifecycleWithPrevNodeRef(node) {
  var prevNodeRef = (0, _react.useRef)(null);
  var isUnmountingRef = (0, _react.useRef)(false);
  (0, _react.useInsertionEffect)(function () {
    isUnmountingRef.current = false;
    return function () {
      isUnmountingRef.current = true;
    };
  }, []);
  (0, _react.useInsertionEffect)(function () {
    node.__attach();
    if (prevNodeRef.current != null) {
      var prevNode = prevNodeRef.current;
      prevNode.__restoreDefaultValues();
      prevNode.__detach();
      prevNodeRef.current = null;
    }
    return function () {
      if (isUnmountingRef.current) {
        node.__detach();
      } else {
        prevNodeRef.current = node;
      }
    };
  }, [node]);
}
function useAnimatedPropsLifecycleWithCleanupInMicrotask(node) {
  var isMounted = (0, _react.useRef)(false);
  (0, _react.useInsertionEffect)(function () {
    isMounted.current = true;
    node.__attach();
    return function () {
      isMounted.current = false;
      queueMicrotask(function () {
        if (isMounted.current) {
          node.__restoreDefaultValues();
        }
        node.__detach();
      });
    };
  }, [node]);
}
function getEventTarget(instance) {
  return typeof instance === 'object' && typeof (instance == null ? void 0 : instance.getScrollableNode) === 'function' ? instance.getScrollableNode() : instance;
}
function isFabricInstance(instance) {
  var _instance$getScrollRe;
  return (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getNativeScrollRef == null ? void 0 : instance.getNativeScrollRef()) || (0, _ReactFabricPublicInstanceUtils.isPublicInstance)(instance == null || instance.getScrollResponder == null || (_instance$getScrollRe = instance.getScrollResponder()) == null || _instance$getScrollRe.getNativeScrollRef == null ? void 0 : _instance$getScrollRe.getNativeScrollRef());
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQW5pbWF0ZWROb2RlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfQW5pbWF0ZWRQcm9wcyIsIl9BbmltYXRlZFZhbHVlIiwiX1JlYWN0RmFicmljUHVibGljSW5zdGFuY2VVdGlscyIsIl91c2VSZWZFZmZlY3QiLCJSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2NyZWF0ZUFuaW1hdGVkUHJvcHNNZW1vSG9vayIsIl9OYXRpdmVBbmltYXRlZEhlbHBlciIsIl9yZWFjdCIsImNyZWF0ZUFuaW1hdGVkUHJvcHNIb29rIiwiYWxsb3dsaXN0IiwidXNlQW5pbWF0ZWRQcm9wc01lbW8iLCJjcmVhdGVBbmltYXRlZFByb3BzTWVtb0hvb2siLCJ1c2VOYXRpdmVQcm9wc0luRmFicmljIiwic2hvdWxkVXNlU2V0TmF0aXZlUHJvcHNJbkZhYnJpYyIsInVzZUFuaW1hdGVkUHJvcHMiLCJwcm9wcyIsIl91c2VSZWR1Y2VyIiwidXNlUmVkdWNlciIsImNvdW50IiwiX3VzZVJlZHVjZXIyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsInNjaGVkdWxlVXBkYXRlIiwib25VcGRhdGVSZWYiLCJ1c2VSZWYiLCJ0aW1lclJlZiIsIm5vZGUiLCJBbmltYXRlZFByb3BzIiwiY3VycmVudCIsInVzZUVmZmVjdCIsIk5hdGl2ZUFuaW1hdGVkSGVscGVyIiwic2hvdWxkU2lnbmFsQmF0Y2giLCJBUEkiLCJmbHVzaFF1ZXVlIiwiZHJpdmVuQW5pbWF0aW9uRW5kZWRMaXN0ZW5lciIsIl9faXNOYXRpdmUiLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsImRhdGEiLCJ1cGRhdGUiLCJfZHJpdmVuQW5pbWF0aW9uRW5kZWQiLCJyZW1vdmUiLCJ1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlIiwic2NoZWR1bGVBbmltYXRlZENsZWFudXBJbk1pY3JvdGFzayIsInVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGVXaXRoQ2xlYW51cEluTWljcm90YXNrIiwidXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZVdpdGhQcmV2Tm9kZVJlZiIsInJlZkVmZmVjdCIsInVzZUNhbGxiYWNrIiwiaW5zdGFuY2UiLCJzZXROYXRpdmVWaWV3IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiaXNGYWJyaWNOb2RlIiwiaXNGYWJyaWNJbnN0YW5jZSIsImN4eE5hdGl2ZUFuaW1hdGVkRW5hYmxlZCIsImN4eE5hdGl2ZUFuaW1hdGVkUmVtb3ZlSnNTeW5jIiwic2V0TmF0aXZlUHJvcHMiLCJfX2dldEFuaW1hdGVkVmFsdWUiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidGFyZ2V0IiwiZ2V0RXZlbnRUYXJnZXQiLCJhbmltYXRlZFZhbHVlTGlzdGVuZXJzIiwiZXZlbnRUdXBsZXMiLCJfX2dldE5hdGl2ZUFuaW1hdGVkRXZlbnRUdXBsZXMiLCJfcmVmIiwiX3JlZjIiLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsIl9fYXR0YWNoIiwiYWRkTGlzdGVuZXJzVG9Qcm9wc1ZhbHVlIiwiX3JlZjMiLCJfcmVmNCIsIl9fZGV0YWNoIiwiX3JlZjUiLCJsaXN0ZW5lcklkIiwicmVtb3ZlTGlzdGVuZXIiLCJjYWxsYmFja1JlZiIsInVzZVJlZkVmZmVjdCIsInJlZHVjZUFuaW1hdGVkUHJvcHMiLCJPYmplY3QiLCJhc3NpZ24iLCJfX2dldFZhbHVlV2l0aFN0YXRpY1Byb3BzIiwiY29sbGFwc2FibGUiLCJhY2N1bXVsYXRvciIsIkFuaW1hdGVkVmFsdWUiLCJwdXNoIiwiQXJyYXkiLCJpc0FycmF5IiwicHJvcCIsImFkZEFuaW1hdGVkVmFsdWVzTGlzdGVuZXJzVG9Qcm9wcyIsInByZXZOb2RlUmVmIiwiaXNVbm1vdW50aW5nUmVmIiwidXNlSW5zZXJ0aW9uRWZmZWN0IiwicHJldk5vZGUiLCJfX3Jlc3RvcmVEZWZhdWx0VmFsdWVzIiwiaXNNb3VudGVkIiwicXVldWVNaWNyb3Rhc2siLCJnZXRTY3JvbGxhYmxlTm9kZSIsIl9pbnN0YW5jZSRnZXRTY3JvbGxSZSIsImlzRmFicmljUHVibGljSW5zdGFuY2UiLCJnZXROYXRpdmVTY3JvbGxSZWYiLCJnZXRTY3JvbGxSZXNwb25kZXIiXSwic291cmNlcyI6WyJjcmVhdGVBbmltYXRlZFByb3BzSG9vay5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge0FuaW1hdGVkUHJvcHNBbGxvd2xpc3R9IGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZFByb3BzJztcbmltcG9ydCB0eXBlIHtFdmVudFN1YnNjcmlwdGlvbn0gZnJvbSAnLi4vLi4vLi4vTGlicmFyaWVzL0V2ZW50RW1pdHRlci9OYXRpdmVFdmVudEVtaXR0ZXInO1xuXG5pbXBvcnQgQW5pbWF0ZWROb2RlIGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9BbmltYXRlZC9ub2Rlcy9BbmltYXRlZE5vZGUnO1xuaW1wb3J0IEFuaW1hdGVkUHJvcHMgZnJvbSAnLi4vLi4vLi4vTGlicmFyaWVzL0FuaW1hdGVkL25vZGVzL0FuaW1hdGVkUHJvcHMnO1xuaW1wb3J0IEFuaW1hdGVkVmFsdWUgZnJvbSAnLi4vLi4vLi4vTGlicmFyaWVzL0FuaW1hdGVkL25vZGVzL0FuaW1hdGVkVmFsdWUnO1xuaW1wb3J0IHtpc1B1YmxpY0luc3RhbmNlIGFzIGlzRmFicmljUHVibGljSW5zdGFuY2V9IGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9SZWFjdE5hdGl2ZS9SZWFjdEZhYnJpY1B1YmxpY0luc3RhbmNlL1JlYWN0RmFicmljUHVibGljSW5zdGFuY2VVdGlscyc7XG5pbXBvcnQgdXNlUmVmRWZmZWN0IGZyb20gJy4uLy4uLy4uL0xpYnJhcmllcy9VdGlsaXRpZXMvdXNlUmVmRWZmZWN0JztcbmltcG9ydCAqIGFzIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzIGZyb20gJy4uL2ZlYXR1cmVmbGFncy9SZWFjdE5hdGl2ZUZlYXR1cmVGbGFncyc7XG5pbXBvcnQge2NyZWF0ZUFuaW1hdGVkUHJvcHNNZW1vSG9va30gZnJvbSAnLi9jcmVhdGVBbmltYXRlZFByb3BzTWVtb0hvb2snO1xuaW1wb3J0IE5hdGl2ZUFuaW1hdGVkSGVscGVyIGZyb20gJy4vTmF0aXZlQW5pbWF0ZWRIZWxwZXInO1xuaW1wb3J0IHtcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUVmZmVjdCxcbiAgdXNlSW5zZXJ0aW9uRWZmZWN0LFxuICB1c2VSZWR1Y2VyLFxuICB1c2VSZWYsXG59IGZyb20gJ3JlYWN0JztcblxudHlwZSBSZWR1Y2VkUHJvcHM8VFByb3BzPiA9IHtcbiAgLi4uVFByb3BzLFxuICBjb2xsYXBzYWJsZTogYm9vbGVhbixcbiAgLi4uXG59O1xudHlwZSBDYWxsYmFja1JlZjxUPiA9IFQgPT4gbWl4ZWQ7XG5cbmV4cG9ydCB0eXBlIEFuaW1hdGVkUHJvcHNIb29rID0gPFRQcm9wczogey4uLn0sIFRJbnN0YW5jZT4oXG4gIHByb3BzOiBUUHJvcHMsXG4pID0+IFtSZWR1Y2VkUHJvcHM8VFByb3BzPiwgQ2FsbGJhY2tSZWY8VEluc3RhbmNlIHwgbnVsbD5dO1xuXG50eXBlIFVwZGF0ZUNhbGxiYWNrID0gKCkgPT4gdm9pZDtcblxudHlwZSBBbmltYXRlZFZhbHVlTGlzdGVuZXJzID0gQXJyYXk8e1xuICBwcm9wVmFsdWU6IEFuaW1hdGVkVmFsdWUsXG4gIGxpc3RlbmVySWQ6IHN0cmluZyxcbn0+O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVBbmltYXRlZFByb3BzSG9vayhcbiAgYWxsb3dsaXN0OiA/QW5pbWF0ZWRQcm9wc0FsbG93bGlzdCxcbik6IEFuaW1hdGVkUHJvcHNIb29rIHtcbiAgY29uc3QgdXNlQW5pbWF0ZWRQcm9wc01lbW8gPSBjcmVhdGVBbmltYXRlZFByb3BzTWVtb0hvb2soYWxsb3dsaXN0KTtcblxuICBjb25zdCB1c2VOYXRpdmVQcm9wc0luRmFicmljID1cbiAgICBSZWFjdE5hdGl2ZUZlYXR1cmVGbGFncy5zaG91bGRVc2VTZXROYXRpdmVQcm9wc0luRmFicmljKCk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHVzZUFuaW1hdGVkUHJvcHM8VFByb3BzOiB7Li4ufSwgVEluc3RhbmNlPihcbiAgICBwcm9wczogVFByb3BzLFxuICApOiBbUmVkdWNlZFByb3BzPFRQcm9wcz4sIENhbGxiYWNrUmVmPFRJbnN0YW5jZSB8IG51bGw+XSB7XG4gICAgY29uc3QgWywgc2NoZWR1bGVVcGRhdGVdID0gdXNlUmVkdWNlcjxudW1iZXIsIHZvaWQ+KGNvdW50ID0+IGNvdW50ICsgMSwgMCk7XG4gICAgY29uc3Qgb25VcGRhdGVSZWYgPSB1c2VSZWY8VXBkYXRlQ2FsbGJhY2sgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCB0aW1lclJlZiA9IHVzZVJlZjxUaW1lb3V0SUQgfCBudWxsPihudWxsKTtcblxuICAgIGNvbnN0IG5vZGUgPSB1c2VBbmltYXRlZFByb3BzTWVtbyhcbiAgICAgICgpID0+IG5ldyBBbmltYXRlZFByb3BzKHByb3BzLCAoKSA9PiBvblVwZGF0ZVJlZi5jdXJyZW50Py4oKSwgYWxsb3dsaXN0KSxcbiAgICAgIHByb3BzLFxuICAgICk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgLy8gQW5pbWF0ZWQgcXVldWUgZmx1c2ggaXMgaGFuZGxlZCBkZXRlcm1pbmlzdGljYWxseSBpbiBzZXRJbW1lZGlhdGUgZm9yIHRoZSBmb2xsb3dpbmcgZmVhdHVyZSBmbGFnczpcbiAgICAgIC8vIGFuaW1hdGVkU2hvdWxkU2lnbmFsQmF0Y2gsIGN4eE5hdGl2ZUFuaW1hdGVkRW5hYmxlZFxuICAgICAgaWYgKCFOYXRpdmVBbmltYXRlZEhlbHBlci5zaG91bGRTaWduYWxCYXRjaCkge1xuICAgICAgICAvLyBJZiBtdWx0aXBsZSBjb21wb25lbnRzIGNhbGwgYGZsdXNoUXVldWVgLCB0aGUgZmlyc3Qgb25lIHdpbGwgZmx1c2ggdGhlXG4gICAgICAgIC8vIHF1ZXVlIGFuZCBzdWJzZXF1ZW50IG9uZXMgd2lsbCBkbyBub3RoaW5nLlxuICAgICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5BUEkuZmx1c2hRdWV1ZSgpO1xuICAgICAgfVxuICAgICAgbGV0IGRyaXZlbkFuaW1hdGlvbkVuZGVkTGlzdGVuZXI6ID9FdmVudFN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICBpZiAobm9kZS5fX2lzTmF0aXZlKSB7XG4gICAgICAgIGRyaXZlbkFuaW1hdGlvbkVuZGVkTGlzdGVuZXIgPVxuICAgICAgICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLm5hdGl2ZUV2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcihcbiAgICAgICAgICAgICdvblVzZXJEcml2ZW5BbmltYXRpb25FbmRlZCcsXG4gICAgICAgICAgICBkYXRhID0+IHtcbiAgICAgICAgICAgICAgbm9kZS51cGRhdGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgZHJpdmVuQW5pbWF0aW9uRW5kZWRMaXN0ZW5lcj8ucmVtb3ZlKCk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgLy8gTk9URTogVGhpcyBmZWF0dXJlIGZsYWcgbXVzdCBiZSBldmFsdWF0ZWQgaW5zaWRlIHRoZSBob29rIGJlY2F1c2UgdGhpc1xuICAgIC8vIG1vZHVsZSBmYWN0b3J5IGNhbiBiZSBldmFsdWF0ZWQgbXVjaCBzb29uZXIsIGJlZm9yZSBvdmVycmlkZXMgYXJlIHNldC5cbiAgICBjb25zdCB1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlID1cbiAgICAgIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLnNjaGVkdWxlQW5pbWF0ZWRDbGVhbnVwSW5NaWNyb3Rhc2soKVxuICAgICAgICA/IHVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGVXaXRoQ2xlYW51cEluTWljcm90YXNrXG4gICAgICAgIDogdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZVdpdGhQcmV2Tm9kZVJlZjtcblxuICAgIHVzZUFuaW1hdGVkUHJvcHNMaWZlY3ljbGUobm9kZSk7XG5cbiAgICAvLyBUT0RPOiBUaGlzIFwiZWZmZWN0XCIgZG9lcyB0aHJlZSB0aGluZ3M6XG4gICAgLy9cbiAgICAvLyAgIDEpIENhbGwgYHNldE5hdGl2ZVZpZXdgLlxuICAgIC8vICAgMikgVXBkYXRlIGBvblVwZGF0ZVJlZmAuXG4gICAgLy8gICAzKSBVcGRhdGUgbGlzdGVuZXJzIGZvciBgQW5pbWF0ZWRFdmVudGAgcHJvcHMuXG4gICAgLy9cbiAgICAvLyBJZGVhbGx5LCBlYWNoIG9mIHRoZXNlIHdvdWxkIGJlIHNlcGFyYXRlIFwiZWZmZWN0c1wiIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gICAgLy8gdW5uZWNlc3NhcmlseSByZS1ydW4gd2hlbiBpcnJlbGV2YW50IGRlcGVuZGVuY2llcyBjaGFuZ2UuIEZvciBleGFtcGxlLCB3ZVxuICAgIC8vIHNob3VsZCBiZSBhYmxlIHRvIGhvaXN0IGFsbCBgQW5pbWF0ZWRFdmVudGAgcHJvcHMgYW5kIG9ubHkgZG8gIzMgaWYgZWl0aGVyXG4gICAgLy8gdGhlIGBBbmltYXRlZEV2ZW50YCBwcm9wcyBjaGFuZ2Ugb3IgYGluc3RhbmNlYCBjaGFuZ2VzLlxuICAgIC8vXG4gICAgLy8gQnV0IHRoZXJlIGlzIG5vIHdheSB0byB0cmFuc3BhcmVudGx5IGNvbXBvc2UgdGhyZWUgc2VwYXJhdGUgY2FsbGJhY2sgcmVmcyxcbiAgICAvLyBzbyB3ZSBqdXN0IGNvbWJpbmUgdGhlbSBhbGwgaW50byBvbmUgZm9yIG5vdy5cbiAgICBjb25zdCByZWZFZmZlY3QgPSB1c2VDYWxsYmFjayhcbiAgICAgIChpbnN0YW5jZTogVEluc3RhbmNlKSA9PiB7XG4gICAgICAgIC8vIE5PVEU6IFRoaXMgbWF5IGJlIGNhbGxlZCBtb3JlIG9mdGVuIHRoYW4gbmVjZXNzYXJ5IChlLmcuIHdoZW4gYHByb3BzYFxuICAgICAgICAvLyBjaGFuZ2VzKSwgYnV0IGBzZXROYXRpdmVWaWV3YCBhbHJlYWR5IG9wdGltaXplcyBmb3IgdGhhdC5cbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF1cbiAgICAgICAgbm9kZS5zZXROYXRpdmVWaWV3KGluc3RhbmNlKTtcblxuICAgICAgICAvLyBOT1RFOiBXaGVuIHVzaW5nIHRoZSBKUyBhbmltYXRpb24gZHJpdmVyLCB0aGlzIGNhbGxiYWNrIGlzIGNhbGxlZCBvblxuICAgICAgICAvLyBldmVyeSBhbmltYXRpb24gZnJhbWUuIFdoZW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIsIHRoaXMgY2FsbGJhY2sgaXNcbiAgICAgICAgLy8gY2FsbGVkIHdoZW4gdGhlIGFuaW1hdGlvbiBjb21wbGV0ZXMuXG4gICAgICAgIG9uVXBkYXRlUmVmLmN1cnJlbnQgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIDE6IHRoaXMgaXMgYSB0ZXN0LlxuICAgICAgICAgICAgLy8gY2FsbCBgc2NoZWR1bGVVcGRhdGVgIHRvIGJ5cGFzcyB1c2Ugb2Ygc2V0TmF0aXZlUHJvcHMuXG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBpc0ZhYnJpY05vZGUgPSBpc0ZhYnJpY0luc3RhbmNlKGluc3RhbmNlKTtcbiAgICAgICAgICBpZiAobm9kZS5fX2lzTmF0aXZlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayAyOiB0aGlzIGlzIGFuIGFuaW1hdGlvbiBkcml2ZW4gYnkgbmF0aXZlLlxuICAgICAgICAgICAgLy8gSW4gbmF0aXZlIGRyaXZlbiBhbmltYXRpb25zLCB0aGlzIGNhbGxiYWNrIGlzIG9ubHkgY2FsbGVkIG9uY2UgdGhlIGFuaW1hdGlvbiBjb21wbGV0ZXMuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGlzRmFicmljTm9kZSAmJlxuICAgICAgICAgICAgICAhKFxuICAgICAgICAgICAgICAgIFJlYWN0TmF0aXZlRmVhdHVyZUZsYWdzLmN4eE5hdGl2ZUFuaW1hdGVkRW5hYmxlZCgpICYmXG4gICAgICAgICAgICAgICAgUmVhY3ROYXRpdmVGZWF0dXJlRmxhZ3MuY3h4TmF0aXZlQW5pbWF0ZWRSZW1vdmVKc1N5bmMoKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy8gQ2FsbCBgc2NoZWR1bGVVcGRhdGVgIHRvIHN5bmNocm9uaXNlIEZpYmVyIGFuZCBTaGFkb3cgdHJlZS5cbiAgICAgICAgICAgICAgLy8gTXVzdCBub3QgYmUgY2FsbGVkIGluIFBhcGVyLlxuICAgICAgICAgICAgICBzY2hlZHVsZVVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiBpbnN0YW5jZSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiBpbnN0YW5jZT8uc2V0TmF0aXZlUHJvcHMgIT09ICdmdW5jdGlvbidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIENoZWNrIDM6IHRoZSBpbnN0YW5jZSBkb2VzIG5vdCBzdXBwb3J0IHNldE5hdGl2ZVByb3BzLiBDYWxsIGBzY2hlZHVsZVVwZGF0ZWAuXG4gICAgICAgICAgICByZXR1cm4gc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWlzRmFicmljTm9kZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgNDogdGhpcyBpcyBhIHBhcGVyIGluc3RhbmNlLCBjYWxsIHNldE5hdGl2ZVByb3BzLlxuICAgICAgICAgICAgLy8gJEZsb3dJZ25vcmVbbm90LWEtZnVuY3Rpb25dIC0gQXNzdW1lIGl0J3Mgc3RpbGwgYSBmdW5jdGlvbi5cbiAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV1cbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5zZXROYXRpdmVQcm9wcyhub2RlLl9fZ2V0QW5pbWF0ZWRWYWx1ZSgpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXVzZU5hdGl2ZVByb3BzSW5GYWJyaWMpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIDU6IHNldE5hdGl2ZVByb3BzIGFyZSBkaXNhYmxlZC5cbiAgICAgICAgICAgIHJldHVybiBzY2hlZHVsZVVwZGF0ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRoaXMgaXMgYSBGYWJyaWMgaW5zdGFuY2UgYW5kIHNldE5hdGl2ZVByb3BzIGlzIHN1cHBvcnRlZC5cblxuICAgICAgICAgIC8vICRGbG93SWdub3JlW25vdC1hLWZ1bmN0aW9uXSAtIEFzc3VtZSBpdCdzIHN0aWxsIGEgZnVuY3Rpb24uXG4gICAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXVxuICAgICAgICAgIGluc3RhbmNlLnNldE5hdGl2ZVByb3BzKG5vZGUuX19nZXRBbmltYXRlZFZhbHVlKCkpO1xuXG4gICAgICAgICAgLy8gS2VlcGluZyBzdGF0ZSBvZiBGaWJlciB0cmVlIGFuZCBTaGFkb3cgdHJlZSBpbiBzeW5jLlxuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gVGhpcyBpcyBkb25lIGJ5IGNhbGxpbmcgYHNjaGVkdWxlVXBkYXRlYCB3aGljaCB3aWxsIHRyaWdnZXIgYSBjb21taXQuXG4gICAgICAgICAgLy8gSG93ZXZlciwgUmVhY3QgY29tbWl0IGlzIG5vdCBmYXN0IGVub3VnaCB0byBkcml2ZSBhbmltYXRpb25zLlxuICAgICAgICAgIC8vIFRoaXMgaXMgd2hlcmUgc2V0TmF0aXZlUHJvcHMgY29tZXMgaW4gaGFuZHkgYnV0IHRoZSBzdGF0ZSBiZXR3ZWVuXG4gICAgICAgICAgLy8gRmliZXIgdHJlZSBhbmQgU2hhZG93IHRyZWUgbmVlZHMgdG8gYmUga2VwdCBpbiBzeW5jLlxuICAgICAgICAgIC8vIFRoZSBnb2FsIGlzIHRvIGNhbGwgYHNjaGVkdWxlVXBkYXRlYCBhcyBsaXR0bGUgYXMgcG9zc2libGUgdG8gbWFpbnRhaW5cbiAgICAgICAgICAvLyBwZXJmb3JtYW5jZSBidXQgZnJlcXVlbnRseSBlbm91Z2ggdG8ga2VlcCBzdGF0ZSBpbiBzeW5jLlxuICAgICAgICAgIC8vIERlYm91bmNlIGlzIHNldCB0byA0OG1zLCB3aGljaCBpcyAzICogdGhlIGR1cmF0aW9uIG9mIGEgZnJhbWUuXG4gICAgICAgICAgLy8gMyBmcmFtZXMgd2FzIHRoZSBoaWdoZXN0IHZhbHVlIHdoZXJlIGZsaWNrZXJpbmcgc3RhdGUgd2FzIG5vdCBvYnNlcnZlZC5cbiAgICAgICAgICBpZiAodGltZXJSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXJSZWYuY3VycmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRpbWVyUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRpbWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgc2NoZWR1bGVVcGRhdGUoKTtcbiAgICAgICAgICB9LCA0OCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoaW5zdGFuY2UpO1xuICAgICAgICBjb25zdCBhbmltYXRlZFZhbHVlTGlzdGVuZXJzOiBBbmltYXRlZFZhbHVlTGlzdGVuZXJzID0gW107XG4gICAgICAgIGNvbnN0IGV2ZW50VHVwbGVzID0gbm9kZS5fX2dldE5hdGl2ZUFuaW1hdGVkRXZlbnRUdXBsZXMoKTtcblxuICAgICAgICBmb3IgKGNvbnN0IFtwcm9wTmFtZSwgcHJvcFZhbHVlXSBvZiBldmVudFR1cGxlcykge1xuICAgICAgICAgIHByb3BWYWx1ZS5fX2F0dGFjaCh0YXJnZXQsIHByb3BOYW1lKTtcbiAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXSAtIHRoZSBgYWRkTGlzdGVuZXJzVG9Qcm9wc1ZhbHVlYCBkcmlsbHMgZG93biB0aGUgcHJvcFZhbHVlLlxuICAgICAgICAgIGFkZExpc3RlbmVyc1RvUHJvcHNWYWx1ZShwcm9wVmFsdWUsIGFuaW1hdGVkVmFsdWVMaXN0ZW5lcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICBvblVwZGF0ZVJlZi5jdXJyZW50ID0gbnVsbDtcblxuICAgICAgICAgIGZvciAoY29uc3QgW3Byb3BOYW1lLCBwcm9wVmFsdWVdIG9mIGV2ZW50VHVwbGVzKSB7XG4gICAgICAgICAgICBwcm9wVmFsdWUuX19kZXRhY2godGFyZ2V0LCBwcm9wTmFtZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChjb25zdCB7cHJvcFZhbHVlLCBsaXN0ZW5lcklkfSBvZiBhbmltYXRlZFZhbHVlTGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBwcm9wVmFsdWUucmVtb3ZlTGlzdGVuZXIobGlzdGVuZXJJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIFtub2RlXSxcbiAgICApO1xuICAgIGNvbnN0IGNhbGxiYWNrUmVmID0gdXNlUmVmRWZmZWN0PFRJbnN0YW5jZT4ocmVmRWZmZWN0KTtcblxuICAgIHJldHVybiBbcmVkdWNlQW5pbWF0ZWRQcm9wczxUUHJvcHM+KG5vZGUsIHByb3BzKSwgY2FsbGJhY2tSZWZdO1xuICB9O1xufVxuXG5mdW5jdGlvbiByZWR1Y2VBbmltYXRlZFByb3BzPFRQcm9wcz4oXG4gIG5vZGU6IEFuaW1hdGVkUHJvcHMsXG4gIHByb3BzOiBUUHJvcHMsXG4pOiBSZWR1Y2VkUHJvcHM8VFByb3BzPiB7XG4gIC8vIEZvcmNlIGBjb2xsYXBzYWJsZWAgdG8gYmUgZmFsc2Ugc28gdGhhdCB0aGUgbmF0aXZlIHZpZXcgaXMgbm90IGZsYXR0ZW5lZC5cbiAgLy8gRmxhdHRlbmVkIHZpZXdzIGNhbm5vdCBiZSBhY2N1cmF0ZWx5IHJlZmVyZW5jZWQgYnkgdGhlIG5hdGl2ZSBkcml2ZXIuXG4gIHJldHVybiB7XG4gICAgLi4ubm9kZS5fX2dldFZhbHVlV2l0aFN0YXRpY1Byb3BzKHByb3BzKSxcbiAgICBjb2xsYXBzYWJsZTogZmFsc2UsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyc1RvUHJvcHNWYWx1ZShcbiAgcHJvcFZhbHVlOiBBbmltYXRlZFZhbHVlLFxuICBhY2N1bXVsYXRvcjogQW5pbWF0ZWRWYWx1ZUxpc3RlbmVycyxcbikge1xuICAvLyBwcm9wVmFsdWUgY2FuIGJlIGEgc2NhbGFyIHZhbHVlLCBhbiBhcnJheSBvciBhbiBvYmplY3QuXG4gIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBBbmltYXRlZFZhbHVlKSB7XG4gICAgY29uc3QgbGlzdGVuZXJJZCA9IHByb3BWYWx1ZS5hZGRMaXN0ZW5lcigoKSA9PiB7fSk7XG4gICAgYWNjdW11bGF0b3IucHVzaCh7cHJvcFZhbHVlLCBsaXN0ZW5lcklkfSk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwcm9wVmFsdWUpKSB7XG4gICAgLy8gQW4gYXJyYXkgY2FuIGJlIGFuIGFycmF5IG9mIHNjYWxhciB2YWx1ZXMsIGFycmF5cyBvZiBhcnJheXMsIG9yIGFycmF5cyBvZiBvYmplY3RzXG4gICAgZm9yIChjb25zdCBwcm9wIG9mIHByb3BWYWx1ZSkge1xuICAgICAgYWRkTGlzdGVuZXJzVG9Qcm9wc1ZhbHVlKHByb3AsIGFjY3VtdWxhdG9yKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgYWRkQW5pbWF0ZWRWYWx1ZXNMaXN0ZW5lcnNUb1Byb3BzKHByb3BWYWx1ZSwgYWNjdW11bGF0b3IpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZEFuaW1hdGVkVmFsdWVzTGlzdGVuZXJzVG9Qcm9wcyhcbiAgcHJvcHM6IEFuaW1hdGVkTm9kZSxcbiAgYWNjdW11bGF0b3I6IEFuaW1hdGVkVmFsdWVMaXN0ZW5lcnMsXG4pIHtcbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSAtIFRoaXMgaXMgYW4gb2JqZWN0IGNvbnRhaW5lZCBpbiBhIHByb3AsIGJ1dCB3ZSBkb24ndCBrbm93IHRoZSBleGFjdCB0eXBlLlxuICAgIGNvbnN0IHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICBhZGRMaXN0ZW5lcnNUb1Byb3BzVmFsdWUocHJvcFZhbHVlLCBhY2N1bXVsYXRvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBsaWZlY3ljbGUgb2YgdGhlIHN1cHBsaWVkIGBBbmltYXRlZFByb3BzYCBieSBpbnZva2luZyBgX19hdHRhY2hgXG4gKiBhbmQgYF9fZGV0YWNoYC4gSG93ZXZlciwgdGhpcyBpcyBtb3JlIGNvbXBsaWNhdGVkIGJlY2F1c2UgYEFuaW1hdGVkUHJvcHNgXG4gKiB1c2VzIHJlZmVyZW5jZSBjb3VudGluZyB0byBkZXRlcm1pbmUgd2hlbiB0byByZWN1cnNpdmVseSBkZXRhY2ggaXRzIGNoaWxkcmVuXG4gKiBub2Rlcy4gU28gaW4gb3JkZXIgdG8gb3B0aW1pemUgdGhpcywgd2UgYXZvaWQgZGV0YWNoaW5nIHVudGlsIHRoZSBuZXh0IGF0dGFjaFxuICogdW5sZXNzIHdlIGFyZSB1bm1vdW50aW5nLlxuICovXG5mdW5jdGlvbiB1c2VBbmltYXRlZFByb3BzTGlmZWN5Y2xlV2l0aFByZXZOb2RlUmVmKG5vZGU6IEFuaW1hdGVkUHJvcHMpOiB2b2lkIHtcbiAgY29uc3QgcHJldk5vZGVSZWYgPSB1c2VSZWY8P0FuaW1hdGVkUHJvcHM+KG51bGwpO1xuICBjb25zdCBpc1VubW91bnRpbmdSZWYgPSB1c2VSZWY8Ym9vbGVhbj4oZmFsc2UpO1xuXG4gIHVzZUluc2VydGlvbkVmZmVjdCgoKSA9PiB7XG4gICAgaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNVbm1vdW50aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICB1c2VJbnNlcnRpb25FZmZlY3QoKCkgPT4ge1xuICAgIG5vZGUuX19hdHRhY2goKTtcbiAgICBpZiAocHJldk5vZGVSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwcmV2Tm9kZSA9IHByZXZOb2RlUmVmLmN1cnJlbnQ7XG4gICAgICAvLyBUT0RPOiBTdG9wIHJlc3RvcmluZyBkZWZhdWx0IHZhbHVlcyAodW5sZXNzIGByZXNldGAgaXMgY2FsbGVkKS5cbiAgICAgIHByZXZOb2RlLl9fcmVzdG9yZURlZmF1bHRWYWx1ZXMoKTtcbiAgICAgIHByZXZOb2RlLl9fZGV0YWNoKCk7XG4gICAgICBwcmV2Tm9kZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpc1VubW91bnRpbmdSZWYuY3VycmVudCkge1xuICAgICAgICAvLyBOT1RFOiBEbyBub3QgcmVzdG9yZSBkZWZhdWx0IHZhbHVlcyBvbiB1bm1vdW50LCBzZWUgRDE4MTk3NzM1LlxuICAgICAgICBub2RlLl9fZGV0YWNoKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcmV2Tm9kZVJlZi5jdXJyZW50ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbbm9kZV0pO1xufVxuXG4vKipcbiAqIE1hbmFnZXMgdGhlIGxpZmVjeWNsZSBvZiB0aGUgc3VwcGxpZWQgYEFuaW1hdGVkUHJvcHNgIGJ5IGludm9raW5nIGBfX2F0dGFjaGBcbiAqIGFuZCBgX19kZXRhY2hgLiBIb3dldmVyLCBgX19kZXRhY2hgIG9jY3VycyBpbiBhIG1pY3JvdGFzayBmb3IgdGhlc2UgcmVhc29uczpcbiAqXG4gKiAgIDEuIE9wdGltaXplcyBkZXRhY2hpbmcgYW5kIGF0dGFjaGluZyBgQW5pbWF0ZWROb2RlYCBpbnN0YW5jZXMgdGhhdCByZWx5IG9uXG4gKiAgICAgIHJlZmVyZW5jZSBjb3VudGluZyB0byBjbGVhbnVwIHN0YXRlLCBieSBjYXVzaW5nIGRldGFjaCB0byBiZSBzY2hlZHVsZWRcbiAqICAgICAgYWZ0ZXIgYW55IHN1YnNlcXVlbnQgYXR0YWNoLlxuICogICAyLiBBdm9pZHMgY2FsbGluZyBgZGV0YWNoYCBkdXJpbmcgdGhlIGluc2VydGlvbiBlZmZlY3QgcGhhc2UgKHdoaWNoXG4gKiAgICAgIG9jY3VycyBkdXJpbmcgdGhlIGNvbW1pdCBwaGFzZSksIHdoaWNoIG1heSBpbnZva2UgY29tcGxldGlvbiBjYWxsYmFja3MuXG4gKlxuICogV2Ugc2hvdWxkIGF2b2lkIGludm9raW5nIGNvbXBsZXRpb24gY2FsbGJhY2tzIGR1cmluZyB0aGUgY29tbWl0IHBoYXNlIGJlY2F1c2VcbiAqIGNhbGxiYWNrcyBtYXkgdXBkYXRlIHN0YXRlLCB3aGljaCBpcyB1bnN1cHBvcnRlZCBhbmQgd2lsbCBmb3JjZSBzeW5jaHJvbm91c1xuICogdXBkYXRlcy5cbiAqL1xuZnVuY3Rpb24gdXNlQW5pbWF0ZWRQcm9wc0xpZmVjeWNsZVdpdGhDbGVhbnVwSW5NaWNyb3Rhc2soXG4gIG5vZGU6IEFuaW1hdGVkUHJvcHMsXG4pOiB2b2lkIHtcbiAgY29uc3QgaXNNb3VudGVkID0gdXNlUmVmPGJvb2xlYW4+KGZhbHNlKTtcblxuICB1c2VJbnNlcnRpb25FZmZlY3QoKCkgPT4ge1xuICAgIGlzTW91bnRlZC5jdXJyZW50ID0gdHJ1ZTtcbiAgICBub2RlLl9fYXR0YWNoKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgLy8gTk9URTogRG8gbm90IHJlc3RvcmUgZGVmYXVsdCB2YWx1ZXMgb24gdW5tb3VudCwgc2VlIEQxODE5NzczNS5cbiAgICAgICAgaWYgKGlzTW91bnRlZC5jdXJyZW50KSB7XG4gICAgICAgICAgLy8gVE9ETzogU3RvcCByZXN0b3JpbmcgZGVmYXVsdCB2YWx1ZXMgKHVubGVzcyBgcmVzZXRgIGlzIGNhbGxlZCkuXG4gICAgICAgICAgbm9kZS5fX3Jlc3RvcmVEZWZhdWx0VmFsdWVzKCk7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5fX2RldGFjaCgpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW25vZGVdKTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRUYXJnZXQ8VEluc3RhbmNlPihpbnN0YW5jZTogVEluc3RhbmNlKTogVEluc3RhbmNlIHtcbiAgcmV0dXJuIHR5cGVvZiBpbnN0YW5jZSA9PT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2YgaW5zdGFuY2U/LmdldFNjcm9sbGFibGVOb2RlID09PSAnZnVuY3Rpb24nXG4gICAgPyAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS11c2VdIC0gTGVnYWN5IGluc3RhbmNlIGFzc3VtcHRpb25zLlxuICAgICAgaW5zdGFuY2UuZ2V0U2Nyb2xsYWJsZU5vZGUoKVxuICAgIDogaW5zdGFuY2U7XG59XG5cbi8vICRGbG93Rml4TWVbdW5jbGVhci10eXBlXSAtIExlZ2FjeSBpbnN0YW5jZSBhc3N1bXB0aW9ucy5cbmZ1bmN0aW9uIGlzRmFicmljSW5zdGFuY2UoaW5zdGFuY2U6IGFueSk6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGlzRmFicmljUHVibGljSW5zdGFuY2UoaW5zdGFuY2UpIHx8XG4gICAgLy8gU29tZSBjb21wb25lbnRzIGhhdmUgYSBzZXROYXRpdmVQcm9wcyBmdW5jdGlvbiBidXQgYXJlbid0IGEgaG9zdCBjb21wb25lbnRcbiAgICAvLyBzdWNoIGFzIGxpc3RzIGxpa2UgRmxhdExpc3QgYW5kIFNlY3Rpb25MaXN0LiBUaGVzZSBzaG91bGQgYWxzbyB1c2VcbiAgICAvLyBmb3JjZVVwZGF0ZSBpbiBGYWJyaWMgc2luY2Ugc2V0TmF0aXZlUHJvcHMgZG9lc24ndCBleGlzdCBvbiB0aGUgdW5kZXJseWluZ1xuICAgIC8vIGhvc3QgY29tcG9uZW50LiBUaGlzIGNyYXp5IGhhY2sgaXMgZXNzZW50aWFsbHkgc3BlY2lhbCBjYXNpbmcgdGhvc2UgbGlzdHMgYW5kXG4gICAgLy8gU2Nyb2xsVmlldyBpdHNlbGYgdG8gdXNlIGZvcmNlVXBkYXRlIGluIEZhYnJpYy5cbiAgICAvLyBJZiB0aGVzZSBjb21wb25lbnRzIGVuZCB1cCB1c2luZyBmb3J3YXJkUmVmIHRoZW4gdGhlc2UgaGFja3MgY2FuIGdvIGF3YXlcbiAgICAvLyBhcyBpbnN0YW5jZSB3b3VsZCBhY3R1YWxseSBiZSB0aGUgdW5kZXJseWluZyBob3N0IGNvbXBvbmVudCBhbmQgdGhlIGFib3ZlIGNoZWNrXG4gICAgLy8gd291bGQgYmUgc3VmZmljaWVudC5cbiAgICBpc0ZhYnJpY1B1YmxpY0luc3RhbmNlKGluc3RhbmNlPy5nZXROYXRpdmVTY3JvbGxSZWY/LigpKSB8fFxuICAgIGlzRmFicmljUHVibGljSW5zdGFuY2UoXG4gICAgICBpbnN0YW5jZT8uZ2V0U2Nyb2xsUmVzcG9uZGVyPy4oKT8uZ2V0TmF0aXZlU2Nyb2xsUmVmPy4oKSxcbiAgICApXG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFhQSxJQUFBQSxhQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxjQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRywrQkFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksYUFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssdUJBQUEsR0FBQUMsdUJBQUEsQ0FBQU4sT0FBQTtBQUNBLElBQUFPLDRCQUFBLEdBQUFQLE9BQUE7QUFDQSxJ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