{"version":3,"names":["_react","require","_useAsyncState2","_interopRequireDefault","useCrud","actions","arguments","length","undefined","_useAsyncState","useAsyncState","isLoading","errorCode","data","start","succeed","fail","reset","run","useCallback","_ref","_asyncToGenerator2","default","action","_len","args","Array","_key","result","apply","error","code","_x","boundActions","useMemo","Object","entries","reduce","acc","_ref2","_ref3","_slicedToArray2","key","_len2","_key2","concat","assign","_default","exports"],"sources":["useCrud.js"],"sourcesContent":["/**\r\n * useCrud Hook\r\n * Standard async CRUD wrapper for feature usecases\r\n * File: useCrud.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport useAsyncState from '@hooks/useAsyncState';\r\n\r\nconst useCrud = (actions = {}) => {\r\n  const { isLoading, errorCode, data, start, succeed, fail, reset } = useAsyncState();\r\n\r\n  const run = useCallback(\r\n    async (action, ...args) => {\r\n      start();\r\n      try {\r\n        const result = await action(...args);\r\n        succeed(result);\r\n        return result;\r\n      } catch (error) {\r\n        fail(error?.code);\r\n        throw error;\r\n      }\r\n    },\r\n    [start, succeed, fail]\r\n  );\r\n\r\n  const boundActions = useMemo(() => {\r\n    return Object.entries(actions || {}).reduce((acc, [key, action]) => {\r\n      if (typeof action !== 'function') return acc;\r\n      acc[key] = (...args) => run(action, ...args);\r\n      return acc;\r\n    }, {});\r\n  }, [actions, run]);\r\n\r\n  return {\r\n    isLoading,\r\n    errorCode,\r\n    data,\r\n    reset,\r\n    ...boundActions,\r\n  };\r\n};\r\n\r\nexport default useCrud;\r\n"],"mappings":";;;;;;;AAKA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAMG,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAqB;EAAA,IAAjBC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAC3B,IAAAG,cAAA,GAAoE,IAAAC,uBAAa,EAAC,CAAC;IAA3EC,SAAS,GAAAF,cAAA,CAATE,SAAS;IAAEC,SAAS,GAAAH,cAAA,CAATG,SAAS;IAAEC,IAAI,GAAAJ,cAAA,CAAJI,IAAI;IAAEC,KAAK,GAAAL,cAAA,CAALK,KAAK;IAAEC,OAAO,GAAAN,cAAA,CAAPM,OAAO;IAAEC,IAAI,GAAAP,cAAA,CAAJO,IAAI;IAAEC,KAAK,GAAAR,cAAA,CAALQ,KAAK;EAE/D,IAAMC,GAAG,GAAG,IAAAC,kBAAW;IAAA,IAAAC,IAAA,OAAAC,kBAAA,CAAAC,OAAA,EACrB,WAAOC,MAAM,EAAc;MACzBT,KAAK,CAAC,CAAC;MACP,IAAI;QAAA,SAAAU,IAAA,GAAAlB,SAAA,CAAAC,MAAA,EAFYkB,IAAI,OAAAC,KAAA,CAAAF,IAAA,OAAAA,IAAA,WAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;UAAJF,IAAI,CAAAE,IAAA,QAAArB,SAAA,CAAAqB,IAAA;QAAA;QAGlB,IAAMC,MAAM,SAASL,MAAM,CAAAM,KAAA,SAAIJ,IAAI,CAAC;QACpCV,OAAO,CAACa,MAAM,CAAC;QACf,OAAOA,MAAM;MACf,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdd,IAAI,CAACc,KAAK,oBAALA,KAAK,CAAEC,IAAI,CAAC;QACjB,MAAMD,KAAK;MACb;IACF,CAAC;IAAA,iBAAAE,EAAA;MAAA,OAAAZ,IAAA,CAAAS,KAAA,OAAAvB,SAAA;IAAA;EAAA,KACD,CAACQ,KAAK,EAAEC,OAAO,EAAEC,IAAI,CACvB,CAAC;EAED,IAAMiB,YAAY,GAAG,IAAAC,cAAO,EAAC,YAAM;IACjC,OAAOC,MAAM,CAACC,OAAO,CAAC/B,OAAO,IAAI,CAAC,CAAC,CAAC,CAACgC,MAAM,CAAC,UAACC,GAAG,EAAAC,KAAA,EAAoB;MAAA,IAAAC,KAAA,OAAAC,eAAA,CAAAnB,OAAA,EAAAiB,KAAA;QAAjBG,GAAG,GAAAF,KAAA;QAAEjB,MAAM,GAAAiB,KAAA;MAC5D,IAAI,OAAOjB,MAAM,KAAK,UAAU,EAAE,OAAOe,GAAG;MAC5CA,GAAG,CAACI,GAAG,CAAC,GAAG;QAAA,SAAAC,KAAA,GAAArC,SAAA,CAAAC,MAAA,EAAIkB,IAAI,OAAAC,KAAA,CAAAiB,KAAA,GAAAC,KAAA,MAAAA,KAAA,GAAAD,KAAA,EAAAC,KAAA;UAAJnB,IAAI,CAAAmB,KAAA,IAAAtC,SAAA,CAAAsC,KAAA;QAAA;QAAA,OAAK1B,GAAG,CAAAW,KAAA,UAACN,MAAM,EAAAsB,MAAA,CAAKpB,IAAI,EAAC;MAAA;MAC5C,OAAOa,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CAAC;EACR,CAAC,EAAE,CAACjC,OAAO,EAAEa,GAAG,CAAC,CAAC;EAElB,OAAAiB,MAAA,CAAAW,MAAA;IACEnC,SAAS,EAATA,SAAS;IACTC,SAAS,EAATA,SAAS;IACTC,IAAI,EAAJA,IAAI;IACJI,KAAK,EAALA;EAAK,GACFgB,YAAY;AAEnB,CAAC;AAAC,IAAAc,QAAA,GAAAC,OAAA,CAAA1B,OAAA,GAEalB,OAAO","ignoreList":[]}