{"version":3,"names":["_getJestObj","mock","useI18n","jest","fn","t","k","useNetwork","isOffline","useUserSession","useRouter","push","mockPush","useLocalSearchParams","id","_interopRequireDefault","require","default","_asyncToGenerator2","_require2","_require","renderHook","act","useUserSessionDetailScreen","mockGet","mockRevoke","mockReset","describe","beforeEach","clearAllMocks","mockReturnValue","get","revoke","data","isLoading","errorCode","reset","it","_renderHook","result","expect","current","toBe","session","toBeNull","onRetry","onBack","onRevoke","toHaveBeenCalled","toHaveBeenCalledWith","mockClear","not","_renderHook2","_renderHook3","mockResolvedValue","undefined","_renderHook4","_renderHook5","hasError","errorMessage","toBeDefined","_renderHook6"],"sources":["useUserSessionDetailScreen.test.js"],"sourcesContent":["/**\r\n * useUserSessionDetailScreen Hook Tests\r\n */\r\nconst { renderHook, act } = require('@testing-library/react-native');\r\nconst useUserSessionDetailScreen = require('@platform/screens/settings/UserSessionDetailScreen/useUserSessionDetailScreen').default;\r\n\r\nconst mockPush = jest.fn();\r\nconst mockGet = jest.fn();\r\nconst mockRevoke = jest.fn();\r\nconst mockReset = jest.fn();\r\n\r\njest.mock('@hooks', () => ({\r\n  useI18n: jest.fn(() => ({ t: (k) => k })),\r\n  useNetwork: jest.fn(() => ({ isOffline: false })),\r\n  useUserSession: jest.fn(),\r\n}));\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: () => ({ push: mockPush }),\r\n  useLocalSearchParams: jest.fn(() => ({ id: 'session-1' })),\r\n}));\r\n\r\nconst useUserSession = require('@hooks').useUserSession;\r\nconst useLocalSearchParams = require('expo-router').useLocalSearchParams;\r\n\r\ndescribe('useUserSessionDetailScreen', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useLocalSearchParams.mockReturnValue({ id: 'session-1' });\r\n    useUserSession.mockReturnValue({\r\n      get: mockGet,\r\n      revoke: mockRevoke,\r\n      data: null,\r\n      isLoading: false,\r\n      errorCode: null,\r\n      reset: mockReset,\r\n    });\r\n  });\r\n\r\n  it('returns session, handlers, and state', () => {\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    expect(result.current.id).toBe('session-1');\r\n    expect(result.current.session).toBeNull();\r\n    expect(typeof result.current.onRetry).toBe('function');\r\n    expect(typeof result.current.onBack).toBe('function');\r\n    expect(typeof result.current.onRevoke).toBe('function');\r\n  });\r\n\r\n  it('calls get(id) on mount', () => {\r\n    renderHook(() => useUserSessionDetailScreen());\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockGet).toHaveBeenCalledWith('session-1');\r\n  });\r\n\r\n  it('does not call get when id missing', () => {\r\n    useLocalSearchParams.mockReturnValue({});\r\n    mockGet.mockClear();\r\n    mockReset.mockClear();\r\n    renderHook(() => useUserSessionDetailScreen());\r\n    expect(mockGet).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('onRetry calls fetchDetail', () => {\r\n    mockReset.mockClear();\r\n    mockGet.mockClear();\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    result.current.onRetry();\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockGet).toHaveBeenCalledWith('session-1');\r\n  });\r\n\r\n  it('onBack pushes /settings/user-sessions', () => {\r\n    mockPush.mockClear();\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    result.current.onBack();\r\n    expect(mockPush).toHaveBeenCalledWith('/settings/user-sessions');\r\n  });\r\n\r\n  it('onRevoke calls revoke then onBack', async () => {\r\n    mockRevoke.mockResolvedValue(undefined);\r\n    mockPush.mockClear();\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    await act(async () => {\r\n      await result.current.onRevoke();\r\n    });\r\n    expect(mockRevoke).toHaveBeenCalledWith('session-1');\r\n    expect(mockPush).toHaveBeenCalledWith('/settings/user-sessions');\r\n  });\r\n\r\n  it('exposes errorMessage when errorCode set', () => {\r\n    useUserSession.mockReturnValue({\r\n      get: mockGet,\r\n      revoke: mockRevoke,\r\n      data: null,\r\n      isLoading: false,\r\n      errorCode: 'SESSION_NOT_FOUND',\r\n      reset: mockReset,\r\n    });\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    expect(result.current.hasError).toBe(true);\r\n    expect(result.current.errorMessage).toBeDefined();\r\n  });\r\n\r\n  it('onRevoke does nothing when id missing', async () => {\r\n    useLocalSearchParams.mockReturnValue({});\r\n    mockRevoke.mockClear();\r\n    mockPush.mockClear();\r\n    const { result } = renderHook(() => useUserSessionDetailScreen());\r\n    await act(async () => {\r\n      await result.current.onRevoke();\r\n    });\r\n    expect(mockRevoke).not.toHaveBeenCalled();\r\n    expect(mockPush).not.toHaveBeenCalled();\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}