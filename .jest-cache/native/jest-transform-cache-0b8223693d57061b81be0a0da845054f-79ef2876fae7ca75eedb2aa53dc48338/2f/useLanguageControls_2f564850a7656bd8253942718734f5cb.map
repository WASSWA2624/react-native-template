{"version":3,"names":["_react","require","_reactRedux","_i18n","_hooks","_selectors","_ui","_storage","_types","getDefaultLocale","supportedLocales","isSupportedLocale","value","Array","isArray","includes","buildOptions","t","map","labelKey","LOCALE_LABEL_KEYS","label","useLanguageControls","_useI18n","useI18n","dispatch","useDispatch","storedLocale","useSelector","selectLocale","i18n","useMemo","createI18n","initialLocale","fallbackLocale","locale","options","setLocale","useCallback","nextLocale","actions","asyncStorage","setItem","LOCALE_STORAGE_KEY","_default","exports","default"],"sources":["useLanguageControls.js"],"sourcesContent":["/**\r\n * useLanguageControls Hook\r\n * Language selection logic with persistence\r\n * File: useLanguageControls.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { createI18n } from '@i18n';\r\nimport { useI18n } from '@hooks';\r\nimport { selectLocale } from '@store/selectors';\r\nimport { actions } from '@store/slices/ui.slice';\r\nimport { async as asyncStorage } from '@services/storage';\r\nimport { LOCALE_LABEL_KEYS, LOCALE_STORAGE_KEY } from './types';\r\n\r\nconst getDefaultLocale = (supportedLocales) => supportedLocales?.[0] || 'en';\r\n\r\nconst isSupportedLocale = (value, supportedLocales) => {\r\n  if (!value || !Array.isArray(supportedLocales)) return false;\r\n  return supportedLocales.includes(value);\r\n};\r\n\r\nconst buildOptions = (supportedLocales, t) => {\r\n  if (!Array.isArray(supportedLocales)) return [];\r\n  return supportedLocales.map((value) => {\r\n    const labelKey = LOCALE_LABEL_KEYS[value] || `settings.language.options.${value}`;\r\n    return { value, label: t(labelKey) };\r\n  });\r\n};\r\n\r\nconst useLanguageControls = () => {\r\n  const { t } = useI18n();\r\n  const dispatch = useDispatch();\r\n  const storedLocale = useSelector(selectLocale);\r\n  const i18n = useMemo(() => createI18n({ initialLocale: storedLocale }), [storedLocale]);\r\n  const supportedLocales = i18n.supportedLocales;\r\n  const fallbackLocale = getDefaultLocale(supportedLocales);\r\n  const locale = isSupportedLocale(storedLocale, supportedLocales) ? storedLocale : fallbackLocale;\r\n\r\n  const options = useMemo(() => buildOptions(supportedLocales, t), [supportedLocales, t]);\r\n\r\n  const setLocale = useCallback(\r\n    (nextLocale) => {\r\n      if (!isSupportedLocale(nextLocale, supportedLocales)) return;\r\n      if (nextLocale === locale) return;\r\n      dispatch(actions.setLocale(nextLocale));\r\n      void asyncStorage.setItem(LOCALE_STORAGE_KEY, nextLocale);\r\n    },\r\n    [dispatch, locale, supportedLocales]\r\n  );\r\n\r\n  return {\r\n    locale,\r\n    options,\r\n    setLocale,\r\n  };\r\n};\r\n\r\nexport default useLanguageControls;\r\n"],"mappings":"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","ignoreList":[]}