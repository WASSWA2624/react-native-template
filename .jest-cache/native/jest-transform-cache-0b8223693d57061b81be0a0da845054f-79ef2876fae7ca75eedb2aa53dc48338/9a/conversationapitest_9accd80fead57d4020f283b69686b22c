5e87abdcf5652c278917bd1c726cfcd6
_getJestObj().mock("../../../services/api", function () {
  return {
    apiClient: jest.fn(),
    createCrudApi: jest.fn(function () {
      return {
        list: jest.fn(),
        get: jest.fn(),
        create: jest.fn(),
        update: jest.fn(),
        remove: jest.fn()
      };
    })
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _endpoints = require("../../../config/endpoints");
var _api = require("../../../services/api");
var _conversation = require("../../../features/conversation/conversation.api");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('conversation.api', function () {
  it('creates crud api with conversation endpoints', function () {
    expect(_api.createCrudApi).toHaveBeenCalledWith(_endpoints.endpoints.CONVERSATIONS);
    expect(_conversation.conversationApi).toBeDefined();
  });
  it('fetches conversation participants', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: []
    });
    yield (0, _conversation.getConversationParticipantsApi)('1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.CONVERSATIONS.GET_PARTICIPANTS('1'),
      method: 'GET'
    });
  }));
  it('adds a conversation participant', (0, _asyncToGenerator2.default)(function* () {
    var payload = {
      userId: 'u1'
    };
    _api.apiClient.mockResolvedValue({
      data: payload
    });
    yield (0, _conversation.addConversationParticipantApi)('1', payload);
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.CONVERSATIONS.ADD_PARTICIPANT('1'),
      method: 'POST',
      body: payload
    });
  }));
  it('removes a conversation participant', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: {}
    });
    yield (0, _conversation.removeConversationParticipantApi)('1', 'u1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.CONVERSATIONS.REMOVE_PARTICIPANT('1', 'u1'),
      method: 'DELETE'
    });
  }));
  it('fetches conversation messages', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: []
    });
    yield (0, _conversation.getConversationMessagesApi)('1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.CONVERSATIONS.GET_MESSAGES('1'),
      method: 'GET'
    });
  }));
  it('adds a conversation message', (0, _asyncToGenerator2.default)(function* () {
    var payload = {
      text: 'hello'
    };
    _api.apiClient.mockResolvedValue({
      data: payload
    });
    yield (0, _conversation.addConversationMessageApi)('1', payload);
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.CONVERSATIONS.ADD_MESSAGE('1'),
      method: 'POST',
      body: payload
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhcGlDbGllbnQiLCJqZXN0IiwiZm4iLCJjcmVhdGVDcnVkQXBpIiwibGlzdCIsImdldCIsImNyZWF0ZSIsInVwZGF0ZSIsInJlbW92ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiZGVmYXVsdCIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9lbmRwb2ludHMiLCJfYXBpIiwiX2NvbnZlcnNhdGlvbiIsIl9yZXF1aXJlIiwiZGVzY3JpYmUiLCJpdCIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiZW5kcG9pbnRzIiwiQ09OVkVSU0FUSU9OUyIsImNvbnZlcnNhdGlvbkFwaSIsInRvQmVEZWZpbmVkIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwiZ2V0Q29udmVyc2F0aW9uUGFydGljaXBhbnRzQXBpIiwidXJsIiwiR0VUX1BBUlRJQ0lQQU5UUyIsIm1ldGhvZCIsInBheWxvYWQiLCJ1c2VySWQiLCJhZGRDb252ZXJzYXRpb25QYXJ0aWNpcGFudEFwaSIsIkFERF9QQVJUSUNJUEFOVCIsImJvZHkiLCJyZW1vdmVDb252ZXJzYXRpb25QYXJ0aWNpcGFudEFwaSIsIlJFTU9WRV9QQVJUSUNJUEFOVCIsImdldENvbnZlcnNhdGlvbk1lc3NhZ2VzQXBpIiwiR0VUX01FU1NBR0VTIiwidGV4dCIsImFkZENvbnZlcnNhdGlvbk1lc3NhZ2VBcGkiLCJBRERfTUVTU0FHRSJdLCJzb3VyY2VzIjpbImNvbnZlcnNhdGlvbi5hcGkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ29udmVyc2F0aW9uIEFQSSBUZXN0c1xyXG4gKiBGaWxlOiBjb252ZXJzYXRpb24uYXBpLnRlc3QuanNcclxuICovXHJcbmltcG9ydCB7IGVuZHBvaW50cyB9IGZyb20gJ0Bjb25maWcvZW5kcG9pbnRzJztcclxuaW1wb3J0IHsgYXBpQ2xpZW50LCBjcmVhdGVDcnVkQXBpIH0gZnJvbSAnQHNlcnZpY2VzL2FwaSc7XHJcbmltcG9ydCB7XHJcbiAgYWRkQ29udmVyc2F0aW9uTWVzc2FnZUFwaSxcclxuICBhZGRDb252ZXJzYXRpb25QYXJ0aWNpcGFudEFwaSxcclxuICBjb252ZXJzYXRpb25BcGksXHJcbiAgZ2V0Q29udmVyc2F0aW9uTWVzc2FnZXNBcGksXHJcbiAgZ2V0Q29udmVyc2F0aW9uUGFydGljaXBhbnRzQXBpLFxyXG4gIHJlbW92ZUNvbnZlcnNhdGlvblBhcnRpY2lwYW50QXBpLFxyXG59IGZyb20gJ0BmZWF0dXJlcy9jb252ZXJzYXRpb24vY29udmVyc2F0aW9uLmFwaSc7XHJcblxyXG5qZXN0Lm1vY2soJ0BzZXJ2aWNlcy9hcGknLCAoKSA9PiAoe1xyXG4gIGFwaUNsaWVudDogamVzdC5mbigpLFxyXG4gIGNyZWF0ZUNydWRBcGk6IGplc3QuZm4oKCkgPT4gKHtcclxuICAgIGxpc3Q6IGplc3QuZm4oKSxcclxuICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXHJcbiAgICB1cGRhdGU6IGplc3QuZm4oKSxcclxuICAgIHJlbW92ZTogamVzdC5mbigpLFxyXG4gIH0pKSxcclxufSkpO1xyXG5cclxuZGVzY3JpYmUoJ2NvbnZlcnNhdGlvbi5hcGknLCAoKSA9PiB7XHJcbiAgaXQoJ2NyZWF0ZXMgY3J1ZCBhcGkgd2l0aCBjb252ZXJzYXRpb24gZW5kcG9pbnRzJywgKCkgPT4ge1xyXG4gICAgZXhwZWN0KGNyZWF0ZUNydWRBcGkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGVuZHBvaW50cy5DT05WRVJTQVRJT05TKTtcclxuICAgIGV4cGVjdChjb252ZXJzYXRpb25BcGkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdmZXRjaGVzIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhcGlDbGllbnQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBbXSB9KTtcclxuICAgIGF3YWl0IGdldENvbnZlcnNhdGlvblBhcnRpY2lwYW50c0FwaSgnMScpO1xyXG4gICAgZXhwZWN0KGFwaUNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICB1cmw6IGVuZHBvaW50cy5DT05WRVJTQVRJT05TLkdFVF9QQVJUSUNJUEFOVFMoJzEnKSxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnYWRkcyBhIGNvbnZlcnNhdGlvbiBwYXJ0aWNpcGFudCcsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHBheWxvYWQgPSB7IHVzZXJJZDogJ3UxJyB9O1xyXG4gICAgYXBpQ2xpZW50Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogcGF5bG9hZCB9KTtcclxuICAgIGF3YWl0IGFkZENvbnZlcnNhdGlvblBhcnRpY2lwYW50QXBpKCcxJywgcGF5bG9hZCk7XHJcbiAgICBleHBlY3QoYXBpQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgIHVybDogZW5kcG9pbnRzLkNPTlZFUlNBVElPTlMuQUREX1BBUlRJQ0lQQU5UKCcxJyksXHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBib2R5OiBwYXlsb2FkLFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZW1vdmVzIGEgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXBpQ2xpZW50Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YToge30gfSk7XHJcbiAgICBhd2FpdCByZW1vdmVDb252ZXJzYXRpb25QYXJ0aWNpcGFudEFwaSgnMScsICd1MScpO1xyXG4gICAgZXhwZWN0KGFwaUNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICB1cmw6IGVuZHBvaW50cy5DT05WRVJTQVRJT05TLlJFTU9WRV9QQVJUSUNJUEFOVCgnMScsICd1MScpLFxyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdmZXRjaGVzIGNvbnZlcnNhdGlvbiBtZXNzYWdlcycsIGFzeW5jICgpID0+IHtcclxuICAgIGFwaUNsaWVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdIH0pO1xyXG4gICAgYXdhaXQgZ2V0Q29udmVyc2F0aW9uTWVzc2FnZXNBcGkoJzEnKTtcclxuICAgIGV4cGVjdChhcGlDbGllbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgdXJsOiBlbmRwb2ludHMuQ09OVkVSU0FUSU9OUy5HRVRfTUVTU0FHRVMoJzEnKSxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnYWRkcyBhIGNvbnZlcnNhdGlvbiBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGF5bG9hZCA9IHsgdGV4dDogJ2hlbGxvJyB9O1xyXG4gICAgYXBpQ2xpZW50Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogcGF5bG9hZCB9KTtcclxuICAgIGF3YWl0IGFkZENvbnZlcnNhdGlvbk1lc3NhZ2VBcGkoJzEnLCBwYXlsb2FkKTtcclxuICAgIGV4cGVjdChhcGlDbGllbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgdXJsOiBlbmRwb2ludHMuQ09OVkVSU0FUSU9OUy5BRERfTUVTU0FHRSgnMScpLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgYm9keTogcGF5bG9hZCxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiQUFlQUEsV0FBQSxHQUFLQyxJQUFJLDBCQUFrQjtFQUFBLE9BQU87SUFDaENDLFNBQVMsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUNwQkMsYUFBYSxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQztNQUFBLE9BQU87UUFDNUJFLElBQUksRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztRQUNmRyxHQUFHLEVBQUVKLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7UUFDZEksTUFBTSxFQUFFTCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO1FBQ2pCSyxNQUFNLEVBQUVOLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7UUFDakJNLE1BQU0sRUFBRVAsSUFBSSxDQUFDQyxFQUFFLENBQUM7TUFDbEIsQ0FBQztJQUFBLENBQUM7RUFDSixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBQUMsSUFBQU8sc0JBQUEsR0FBQUMsT0FBQSxpREFBQUMsT0FBQTtBQUFBLElBQUFDLGtCQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFwQkosSUFBQUcsVUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksSUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssYUFBQSxHQUFBTCxPQUFBO0FBT2lELFNBQUFaLFlBQUE7RUFBQSxJQUFBa0IsUUFBQSxHQUFBTixPQUFBO0lBQUFULElBQUEsR0FBQWUsUUFBQSxDQUFBZixJQUFBO0VBQUFILFdBQUEsWUFBQUEsWUFBQTtJQUFBLE9BQUFHLElBQUE7RUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQWFqRGdCLFFBQVEsQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0VBQ2pDQyxFQUFFLENBQUMsOENBQThDLEVBQUUsWUFBTTtJQUN2REMsTUFBTSxDQUFDaEIsa0JBQWEsQ0FBQyxDQUFDaUIsb0JBQW9CLENBQUNDLG9CQUFTLENBQUNDLGFBQWEsQ0FBQztJQUNuRUgsTUFBTSxDQUFDSSw2QkFBZSxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQ3ZDLENBQUMsQ0FBQztFQUVGTixFQUFFLENBQUMsbUNBQW1DLE1BQUFOLGtCQUFBLENBQUFELE9BQUEsRUFBRSxhQUFZO0lBQ2xEWCxjQUFTLENBQUN5QixpQkFBaUIsQ0FBQztNQUFFQyxJQUFJLEVBQUU7SUFBRyxDQUFDLENBQUM7SUFDekMsTUFBTSxJQUFBQyw0Q0FBOEIsRUFBQyxHQUFHLENBQUM7SUFDekNSLE1BQU0sQ0FBQ25CLGNBQVMsQ0FBQyxDQUFDb0Isb0JBQW9CLENBQUM7TUFDckNRLEdBQUcsRUFBRVAsb0JBQVMsQ0FBQ0MsYUFBYSxDQUFDTyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUM7TUFDbERDLE1BQU0sRUFBRTtJQUNWLENBQUMsQ0FBQztFQUNKLENBQUMsRUFBQztFQUVGWixFQUFFLENBQUMsaUNBQWlDLE1BQUFOLGtCQUFBLENBQUFELE9BQUEsRUFBRSxhQUFZO0lBQ2hELElBQU1vQixPQUFPLEdBQUc7TUFBRUMsTUFBTSxFQUFFO0lBQUssQ0FBQztJQUNoQ2hDLGNBQVMsQ0FBQ3lCLGlCQUFpQixDQUFDO01BQUVDLElBQUksRUFBRUs7SUFBUSxDQUFDLENBQUM7SUFDOUMsTUFBTSxJQUFBRSwyQ0FBNkIsRUFBQyxHQUFHLEVBQUVGLE9BQU8sQ0FBQztJQUNqRFosTUFBTSxDQUFDbkIsY0FBUyxDQUFDLENBQUNvQixvQkFBb0IsQ0FBQztNQUNyQ1EsR0FBRyxFQUFFUCxvQkFBUyxDQUFDQyxhQUFhLENBQUNZLGVBQWUsQ0FBQyxHQUFHLENBQUM7TUFDakRKLE1BQU0sRUFBRSxNQUFNO01BQ2RLLElBQUksRUFBRUo7SUFDUixDQUFDLENBQUM7RUFDSixDQUFDLEVBQUM7RUFFRmIsRUFBRSxDQUFDLG9DQUFvQyxNQUFBTixrQkFBQSxDQUFBRCxPQUFBLEVBQUUsYUFBWTtJQUNuRFgsY0FBUyxDQUFDeUIsaUJBQWlCLENBQUM7TUFBRUMsSUFBSSxFQUFFLENBQUM7SUFBRSxDQUFDLENBQUM7SUFDekMsTUFBTSxJQUFBVSw4Q0FBZ0MsRUFBQyxHQUFHLEVBQUUsSUFBSSxDQUFDO0lBQ2pEakIsTUFBTSxDQUFDbkIsY0FBUyxDQUFDLENBQUNvQixvQkFBb0IsQ0FBQztNQUNyQ1EsR0FBRyxFQUFFUCxvQkFBUyxDQUFDQyxhQUFhLENBQUNlLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUM7TUFDMURQLE1BQU0sRUFBRTtJQUNWLENBQUMsQ0FBQztFQUNKLENBQUMsRUFBQztFQUVGWixFQUFFLENBQUMsK0JBQStCLE1BQUFOLGtCQUFBLENBQUFELE9BQUEsRUFBRSxhQUFZO0lBQzlDWCxjQUFTLENBQUN5QixpQkFBaUIsQ0FBQztNQUFFQyxJQUFJLEVBQUU7SUFBRyxDQUFDLENBQUM7SUFDekMsTUFBTSxJQUFBWSx3Q0FBMEIsRUFBQyxHQUFHLENBQUM7SUFDckNuQixNQUFNLENBQUNuQixjQUFTLENBQUMsQ0FBQ29CLG9CQUFvQixDQUFDO01BQ3JDUSxHQUFHLEVBQUVQLG9CQUFTLENBQUNDLGFBQWEsQ0FBQ2lCLFlBQVksQ0FBQyxHQUFHLENBQUM7TUFDOUNULE1BQU0sRUFBRTtJQUNWLENBQUMsQ0FBQztFQUNKLENBQUMsRUFBQztFQUVGWixFQUFFLENBQUMsNkJBQTZCLE1BQUFOLGtCQUFBLENBQUFELE9BQUEsRUFBRSxhQUFZO0lBQzVDLElBQU1vQixPQUFPLEdBQUc7TUFBRVMsSUFBSSxFQUFFO0lBQVEsQ0FBQztJQUNqQ3hDLGNBQVMsQ0FBQ3lCLGlCQUFpQixDQUFDO01BQUVDLElBQUksRUFBRUs7SUFBUSxDQUFDLENBQUM7SUFDOUMsTUFBTSxJQUFBVSx1Q0FBeUIsRUFBQyxHQUFHLEVBQUVWLE9BQU8sQ0FBQztJQUM3Q1osTUFBTSxDQUFDbkIsY0FBUyxDQUFDLENBQUNvQixvQkFBb0IsQ0FBQztNQUNyQ1EsR0FBRyxFQUFFUCxvQkFBUyxDQUFDQyxhQUFhLENBQUNvQixXQUFXLENBQUMsR0FBRyxDQUFDO01BQzdDWixNQUFNLEVBQUUsTUFBTTtNQUNkSyxJQUFJLEVBQUVKO0lBQ1IsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxFQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119