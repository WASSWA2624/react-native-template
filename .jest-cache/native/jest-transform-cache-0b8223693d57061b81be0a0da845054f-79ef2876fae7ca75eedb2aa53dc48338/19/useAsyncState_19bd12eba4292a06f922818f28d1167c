e318351001c7e1a6227dcba1ca80c711
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var DEFAULT_ERROR_CODE = 'UNKNOWN_ERROR';
var toErrorCode = function toErrorCode(value) {
  if (typeof value === 'string' && value.trim()) return value.trim();
  return DEFAULT_ERROR_CODE;
};
var initialState = {
  isLoading: false,
  errorCode: null,
  data: null
};
var reducer = function reducer(state, action) {
  var _action$data;
  switch (action.type) {
    case 'START':
      return Object.assign({}, state, {
        isLoading: true,
        errorCode: null
      });
    case 'SUCCEED':
      return Object.assign({}, state, {
        isLoading: false,
        errorCode: null,
        data: (_action$data = action.data) != null ? _action$data : null
      });
    case 'FAIL':
      return Object.assign({}, state, {
        isLoading: false,
        errorCode: toErrorCode(action.errorCode)
      });
    case 'RESET':
      return initialState;
    default:
      return state;
  }
};
var useAsyncState = function useAsyncState() {
  var _useReducer = (0, _react.useReducer)(reducer, initialState),
    _useReducer2 = (0, _slicedToArray2.default)(_useReducer, 2),
    state = _useReducer2[0],
    dispatch = _useReducer2[1];
  var start = (0, _react.useCallback)(function () {
    return dispatch({
      type: 'START'
    });
  }, []);
  var succeed = (0, _react.useCallback)(function (data) {
    return dispatch({
      type: 'SUCCEED',
      data: data
    });
  }, []);
  var fail = (0, _react.useCallback)(function (errorCode) {
    return dispatch({
      type: 'FAIL',
      errorCode: errorCode
    });
  }, []);
  var reset = (0, _react.useCallback)(function () {
    return dispatch({
      type: 'RESET'
    });
  }, []);
  return {
    isLoading: state.isLoading,
    errorCode: state.errorCode,
    data: state.data,
    start: start,
    succeed: succeed,
    fail: fail,
    reset: reset
  };
};
var _default = exports.default = useAsyncState;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiREVGQVVMVF9FUlJPUl9DT0RFIiwidG9FcnJvckNvZGUiLCJ2YWx1ZSIsInRyaW0iLCJpbml0aWFsU3RhdGUiLCJpc0xvYWRpbmciLCJlcnJvckNvZGUiLCJkYXRhIiwicmVkdWNlciIsInN0YXRlIiwiYWN0aW9uIiwiX2FjdGlvbiRkYXRhIiwidHlwZSIsIk9iamVjdCIsImFzc2lnbiIsInVzZUFzeW5jU3RhdGUiLCJfdXNlUmVkdWNlciIsInVzZVJlZHVjZXIiLCJfdXNlUmVkdWNlcjIiLCJfc2xpY2VkVG9BcnJheTIiLCJkZWZhdWx0IiwiZGlzcGF0Y2giLCJzdGFydCIsInVzZUNhbGxiYWNrIiwic3VjY2VlZCIsImZhaWwiLCJyZXNldCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInVzZUFzeW5jU3RhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZUFzeW5jU3RhdGUgSG9va1xyXG4gKiBTdGFuZGFyZCBhc3luYyBzdGF0ZSBzaGFwZTogbG9hZGluZyArIGVycm9yQ29kZSArIGRhdGEuXHJcbiAqIEZpbGU6IHVzZUFzeW5jU3RhdGUuanNcclxuICovXHJcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWR1Y2VyIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuY29uc3QgREVGQVVMVF9FUlJPUl9DT0RFID0gJ1VOS05PV05fRVJST1InO1xyXG5cclxuY29uc3QgdG9FcnJvckNvZGUgPSAodmFsdWUpID0+IHtcclxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkpIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgcmV0dXJuIERFRkFVTFRfRVJST1JfQ09ERTtcclxufTtcclxuXHJcbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcclxuICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gIGVycm9yQ29kZTogbnVsbCxcclxuICBkYXRhOiBudWxsLFxyXG59O1xyXG5cclxuY29uc3QgcmVkdWNlciA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XHJcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xyXG4gICAgY2FzZSAnU1RBUlQnOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgaXNMb2FkaW5nOiB0cnVlLCBlcnJvckNvZGU6IG51bGwgfTtcclxuICAgIGNhc2UgJ1NVQ0NFRUQnOlxyXG4gICAgICByZXR1cm4geyAuLi5zdGF0ZSwgaXNMb2FkaW5nOiBmYWxzZSwgZXJyb3JDb2RlOiBudWxsLCBkYXRhOiBhY3Rpb24uZGF0YSA/PyBudWxsIH07XHJcbiAgICBjYXNlICdGQUlMJzpcclxuICAgICAgcmV0dXJuIHsgLi4uc3RhdGUsIGlzTG9hZGluZzogZmFsc2UsIGVycm9yQ29kZTogdG9FcnJvckNvZGUoYWN0aW9uLmVycm9yQ29kZSkgfTtcclxuICAgIGNhc2UgJ1JFU0VUJzpcclxuICAgICAgcmV0dXJuIGluaXRpYWxTdGF0ZTtcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiBzdGF0ZTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCB1c2VBc3luY1N0YXRlID0gKCkgPT4ge1xyXG4gIGNvbnN0IFtzdGF0ZSwgZGlzcGF0Y2hdID0gdXNlUmVkdWNlcihyZWR1Y2VyLCBpbml0aWFsU3RhdGUpO1xyXG5cclxuICBjb25zdCBzdGFydCA9IHVzZUNhbGxiYWNrKCgpID0+IGRpc3BhdGNoKHsgdHlwZTogJ1NUQVJUJyB9KSwgW10pO1xyXG4gIGNvbnN0IHN1Y2NlZWQgPSB1c2VDYWxsYmFjaygoZGF0YSkgPT4gZGlzcGF0Y2goeyB0eXBlOiAnU1VDQ0VFRCcsIGRhdGEgfSksIFtdKTtcclxuICBjb25zdCBmYWlsID0gdXNlQ2FsbGJhY2soKGVycm9yQ29kZSkgPT4gZGlzcGF0Y2goeyB0eXBlOiAnRkFJTCcsIGVycm9yQ29kZSB9KSwgW10pO1xyXG4gIGNvbnN0IHJlc2V0ID0gdXNlQ2FsbGJhY2soKCkgPT4gZGlzcGF0Y2goeyB0eXBlOiAnUkVTRVQnIH0pLCBbXSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyxcclxuICAgIGVycm9yQ29kZTogc3RhdGUuZXJyb3JDb2RlLFxyXG4gICAgZGF0YTogc3RhdGUuZGF0YSxcclxuICAgIHN0YXJ0LFxyXG4gICAgc3VjY2VlZCxcclxuICAgIGZhaWwsXHJcbiAgICByZXNldCxcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXNlQXN5bmNTdGF0ZTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsSUFBTUMsa0JBQWtCLEdBQUcsZUFBZTtBQUUxQyxJQUFNQyxXQUFXLEdBQUcsU0FBZEEsV0FBV0EsQ0FBSUMsS0FBSyxFQUFLO0VBQzdCLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsSUFBSUEsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU9ELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUM7RUFDbEUsT0FBT0gsa0JBQWtCO0FBQzNCLENBQUM7QUFFRCxJQUFNSSxZQUFZLEdBQUc7RUFDbkJDLFNBQVMsRUFBRSxLQUFLO0VBQ2hCQyxTQUFTLEVBQUUsSUFBSTtFQUNmQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRUQsSUFBTUMsT0FBTyxHQUFHLFNBQVZBLE9BQU9BLENBQUlDLEtBQUssRUFBRUMsTUFBTSxFQUFLO0VBQUEsSUFBQUMsWUFBQTtFQUNqQyxRQUFRRCxNQUFNLENBQUNFLElBQUk7SUFDakIsS0FBSyxPQUFPO01BQ1YsT0FBQUMsTUFBQSxDQUFBQyxNQUFBLEtBQVlMLEtBQUs7UUFBRUosU0FBUyxFQUFFLElBQUk7UUFBRUMsU0FBUyxFQUFFO01BQUk7SUFDckQsS0FBSyxTQUFTO01BQ1osT0FBQU8sTUFBQSxDQUFBQyxNQUFBLEtBQVlMLEtBQUs7UUFBRUosU0FBUyxFQUFFLEtBQUs7UUFBRUMsU0FBUyxFQUFFLElBQUk7UUFBRUMsSUFBSSxHQUFBSSxZQUFBLEdBQUVELE1BQU0sQ0FBQ0gsSUFBSSxZQUFBSSxZQUFBLEdBQUk7TUFBSTtJQUNqRixLQUFLLE1BQU07TUFDVCxPQUFBRSxNQUFBLENBQUFDLE1BQUEsS0FBWUwsS0FBSztRQUFFSixTQUFTLEVBQUUsS0FBSztRQUFFQyxTQUFTLEVBQUVMLFdBQVcsQ0FBQ1MsTUFBTSxDQUFDSixTQUFTO01BQUM7SUFDL0UsS0FBSyxPQUFPO01BQ1YsT0FBT0YsWUFBWTtJQUNyQjtNQUNFLE9BQU9LLEtBQUs7RUFDaEI7QUFDRixDQUFDO0FBRUQsSUFBTU0sYUFBYSxHQUFHLFNBQWhCQSxhQUFhQSxDQUFBLEVBQVM7RUFDMUIsSUFBQUMsV0FBQSxHQUEwQixJQUFBQyxpQkFBVSxFQUFDVCxPQUFPLEVBQUVKLFlBQVksQ0FBQztJQUFBYyxZQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixXQUFBO0lBQXBEUCxLQUFLLEdBQUFTLFlBQUE7SUFBRUcsUUFBUSxHQUFBSCxZQUFBO0VBRXRCLElBQU1JLEtBQUssR0FBRyxJQUFBQyxrQkFBVyxFQUFDO0lBQUEsT0FBTUYsUUFBUSxDQUFDO01BQUVULElBQUksRUFBRTtJQUFRLENBQUMsQ0FBQztFQUFBLEdBQUUsRUFBRSxDQUFDO0VBQ2hFLElBQU1ZLE9BQU8sR0FBRyxJQUFBRCxrQkFBVyxFQUFDLFVBQUNoQixJQUFJO0lBQUEsT0FBS2MsUUFBUSxDQUFDO01BQUVULElBQUksRUFBRSxTQUFTO01BQUVMLElBQUksRUFBSkE7SUFBSyxDQUFDLENBQUM7RUFBQSxHQUFFLEVBQUUsQ0FBQztFQUM5RSxJQUFNa0IsSUFBSSxHQUFHLElBQUFGLGtCQUFXLEVBQUMsVUFBQ2pCLFNBQVM7SUFBQSxPQUFLZSxRQUFRLENBQUM7TUFBRVQsSUFBSSxFQUFFLE1BQU07TUFBRU4sU0FBUyxFQUFUQTtJQUFVLENBQUMsQ0FBQztFQUFBLEdBQUUsRUFBRSxDQUFDO0VBQ2xGLElBQU1vQixLQUFLLEdBQUcsSUFBQUgsa0JBQVcsRUFBQztJQUFBLE9BQU1GLFFBQVEsQ0FBQztNQUFFVCxJQUFJLEVBQUU7SUFBUSxDQUFDLENBQUM7RUFBQSxHQUFFLEVBQUUsQ0FBQztFQUVoRSxPQUFPO0lBQ0xQLFNBQVMsRUFBRUksS0FBSyxDQUFDSixTQUFTO0lBQzFCQyxTQUFTLEVBQUVHLEtBQUssQ0FBQ0gsU0FBUztJQUMxQkMsSUFBSSxFQUFFRSxLQUFLLENBQUNGLElBQUk7SUFDaEJlLEtBQUssRUFBTEEsS0FBSztJQUNMRSxPQUFPLEVBQVBBLE9BQU87SUFDUEMsSUFBSSxFQUFKQSxJQUFJO0lBQ0pDLEtBQUssRUFBTEE7RUFDRixDQUFDO0FBQ0gsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBUixPQUFBLEdBRWFMLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=