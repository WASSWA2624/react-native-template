e09887ea6e869aea510fa159ed733a25
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var LogBoxSymbolication = _interopRequireWildcard(require("./LogBoxSymbolication"));
function convertComponentStateToStack(componentStack) {
  return componentStack.map(function (frame) {
    var _frame$location, _frame$location2;
    return {
      column: frame == null || (_frame$location = frame.location) == null ? void 0 : _frame$location.column,
      file: frame.fileName,
      lineNumber: frame == null || (_frame$location2 = frame.location) == null ? void 0 : _frame$location2.row,
      methodName: frame.content,
      collapse: false
    };
  });
}
function convertStackToComponentStack(stack) {
  var componentStack = [];
  for (var i = 0; i < stack.length; i++) {
    var frame = stack[i];
    if (frame.lineNumber != null && frame.column != null) {
      componentStack.push({
        fileName: (frame == null ? void 0 : frame.file) || '',
        location: {
          row: frame.lineNumber,
          column: frame.column
        },
        content: frame.methodName,
        collapse: false
      });
    }
  }
  return componentStack;
}
var LogBoxLog = function () {
  function LogBoxLog(data) {
    (0, _classCallCheck2.default)(this, LogBoxLog);
    this.symbolicated = {
      error: null,
      stack: null,
      status: 'NONE'
    };
    this.symbolicatedComponentStack = {
      error: null,
      componentStack: null,
      status: 'NONE'
    };
    this.level = data.level;
    this.type = data.type;
    this.message = data.message;
    this.stack = data.stack;
    this.category = data.category;
    this.componentStack = data.componentStack;
    this.componentStackType = data.componentStackType || 'legacy';
    this.codeFrame = data.codeFrame;
    this.isComponentError = data.isComponentError;
    this.extraData = data.extraData;
    this.count = 1;
    this.onNotificationPress = data.onNotificationPress;
  }
  return (0, _createClass2.default)(LogBoxLog, [{
    key: "incrementCount",
    value: function incrementCount() {
      this.count += 1;
    }
  }, {
    key: "getAvailableStack",
    value: function getAvailableStack() {
      return this.symbolicated.status === 'COMPLETE' ? this.symbolicated.stack : this.stack;
    }
  }, {
    key: "getAvailableComponentStack",
    value: function getAvailableComponentStack() {
      if (this.componentStackType === 'legacy') {
        return this.componentStack;
      }
      return this.symbolicatedComponentStack.status === 'COMPLETE' ? this.symbolicatedComponentStack.componentStack : this.componentStack;
    }
  }, {
    key: "retrySymbolicate",
    value: function retrySymbolicate(callback) {
      var retry = false;
      if (this.symbolicated.status !== 'COMPLETE') {
        LogBoxSymbolication.deleteStack(this.stack);
        retry = true;
      }
      if (this.symbolicatedComponentStack.status !== 'COMPLETE') {
        LogBoxSymbolication.deleteStack(convertComponentStateToStack(this.componentStack));
        retry = true;
      }
      if (retry) {
        this.handleSymbolicate(callback);
      }
    }
  }, {
    key: "symbolicate",
    value: function symbolicate(callback) {
      if (this.symbolicated.status === 'NONE') {
        this.handleSymbolicate(callback);
      }
    }
  }, {
    key: "handleSymbolicate",
    value: function handleSymbolicate(callback) {
      var _this = this;
      if (this.symbolicated.status !== 'PENDING' && this.symbolicated.status !== 'COMPLETE') {
        this.updateStatus(null, null, null, callback);
        LogBoxSymbolication.symbolicate(this.stack, this.extraData).then(function (data) {
          _this.updateStatus(null, data == null ? void 0 : data.stack, data == null ? void 0 : data.codeFrame, callback);
        }, function (error) {
          _this.updateStatus(error, null, null, callback);
        });
      }
      if (this.componentStack != null && this.componentStackType === 'stack' && this.symbolicatedComponentStack.status !== 'PENDING' && this.symbolicatedComponentStack.status !== 'COMPLETE') {
        this.updateComponentStackStatus(null, null, null, callback);
        var componentStackFrames = convertComponentStateToStack(this.componentStack);
        LogBoxSymbolication.symbolicate(componentStackFrames, []).then(function (data) {
          _this.updateComponentStackStatus(null, convertStackToComponentStack(data.stack), data == null ? void 0 : data.codeFrame, callback);
        }, function (error) {
          _this.updateComponentStackStatus(error, null, null, callback);
        });
      }
    }
  }, {
    key: "updateStatus",
    value: function updateStatus(error, stack, codeFrame, callback) {
      var lastStatus = this.symbolicated.status;
      if (error != null) {
        this.symbolicated = {
          error: error,
          stack: null,
          status: 'FAILED'
        };
      } else if (stack != null) {
        if (codeFrame) {
          this.codeFrame = codeFrame;
        }
        this.symbolicated = {
          error: null,
          stack: stack,
          status: 'COMPLETE'
        };
      } else {
        this.symbolicated = {
          error: null,
          stack: null,
          status: 'PENDING'
        };
      }
      if (callback && lastStatus !== this.symbolicated.status) {
        callback(this.symbolicated.status);
      }
    }
  }, {
    key: "updateComponentStackStatus",
    value: function updateComponentStackStatus(error, componentStack, codeFrame, callback) {
      var lastStatus = this.symbolicatedComponentStack.status;
      if (error != null) {
        this.symbolicatedComponentStack = {
          error: error,
          componentStack: null,
          status: 'FAILED'
        };
      } else if (componentStack != null) {
        if (codeFrame) {
          this.componentCodeFrame = codeFrame;
        }
        this.symbolicatedComponentStack = {
          error: null,
          componentStack: componentStack,
          status: 'COMPLETE'
        };
      } else {
        this.symbolicatedComponentStack = {
          error: null,
          componentStack: null,
          status: 'PENDING'
        };
      }
      if (callback && lastStatus !== this.symbolicatedComponentStack.status) {
        callback(this.symbolicatedComponentStack.status);
      }
    }
  }]);
}();
var _default = exports.default = LogBoxLog;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMb2dCb3hTeW1ib2xpY2F0aW9uIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJyZXF1aXJlIiwiY29udmVydENvbXBvbmVudFN0YXRlVG9TdGFjayIsImNvbXBvbmVudFN0YWNrIiwibWFwIiwiZnJhbWUiLCJfZnJhbWUkbG9jYXRpb24iLCJfZnJhbWUkbG9jYXRpb24yIiwiY29sdW1uIiwibG9jYXRpb24iLCJmaWxlIiwiZmlsZU5hbWUiLCJsaW5lTnVtYmVyIiwicm93IiwibWV0aG9kTmFtZSIsImNvbnRlbnQiLCJjb2xsYXBzZSIsImNvbnZlcnRTdGFja1RvQ29tcG9uZW50U3RhY2siLCJzdGFjayIsImkiLCJsZW5ndGgiLCJwdXNoIiwiTG9nQm94TG9nIiwiZGF0YSIsIl9jbGFzc0NhbGxDaGVjazIiLCJkZWZhdWx0Iiwic3ltYm9saWNhdGVkIiwiZXJyb3IiLCJzdGF0dXMiLCJzeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjayIsImxldmVsIiwidHlwZSIsIm1lc3NhZ2UiLCJjYXRlZ29yeSIsImNvbXBvbmVudFN0YWNrVHlwZSIsImNvZGVGcmFtZSIsImlzQ29tcG9uZW50RXJyb3IiLCJleHRyYURhdGEiLCJjb3VudCIsIm9uTm90aWZpY2F0aW9uUHJlc3MiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJpbmNyZW1lbnRDb3VudCIsImdldEF2YWlsYWJsZVN0YWNrIiwiZ2V0QXZhaWxhYmxlQ29tcG9uZW50U3RhY2siLCJyZXRyeVN5bWJvbGljYXRlIiwiY2FsbGJhY2siLCJyZXRyeSIsImRlbGV0ZVN0YWNrIiwiaGFuZGxlU3ltYm9saWNhdGUiLCJzeW1ib2xpY2F0ZSIsIl90aGlzIiwidXBkYXRlU3RhdHVzIiwidGhlbiIsInVwZGF0ZUNvbXBvbmVudFN0YWNrU3RhdHVzIiwiY29tcG9uZW50U3RhY2tGcmFtZXMiLCJsYXN0U3RhdHVzIiwiY29tcG9uZW50Q29kZUZyYW1lIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiTG9nQm94TG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3RcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7U3RhY2t9IGZyb20gJy4vTG9nQm94U3ltYm9saWNhdGlvbic7XG5pbXBvcnQgdHlwZSB7XG4gIENhdGVnb3J5LFxuICBDb2RlRnJhbWUsXG4gIENvbXBvbmVudFN0YWNrLFxuICBDb21wb25lbnRTdGFja1R5cGUsXG4gIE1lc3NhZ2UsXG59IGZyb20gJy4vcGFyc2VMb2dCb3hMb2cnO1xuXG5pbXBvcnQgKiBhcyBMb2dCb3hTeW1ib2xpY2F0aW9uIGZyb20gJy4vTG9nQm94U3ltYm9saWNhdGlvbic7XG5cbnR5cGUgU3ltYm9saWNhdGlvblN0YXR1cyA9ICdOT05FJyB8ICdQRU5ESU5HJyB8ICdDT01QTEVURScgfCAnRkFJTEVEJztcblxuZXhwb3J0IHR5cGUgTG9nTGV2ZWwgPSAnd2FybicgfCAnZXJyb3InIHwgJ2ZhdGFsJyB8ICdzeW50YXgnO1xuXG4vLyBUT0RPOiBvbmNlIGNvbXBvbmVudCBzdGFja3MgYXJlIGZ1bGx5IHN1cHBvcnRlZCwgd2UgY2FuIHJlZmFjdG9yXG4vLyBDb21wb25lbnRTdGFjayB0byBqdXN0IGJlIFN0YWNrIGFuZCByZW1vdmUgdGhlc2UgY29udmVyc2lvbnMgZm5zLlxuZnVuY3Rpb24gY29udmVydENvbXBvbmVudFN0YXRlVG9TdGFjayhjb21wb25lbnRTdGFjazogQ29tcG9uZW50U3RhY2spOiBTdGFjayB7XG4gIHJldHVybiBjb21wb25lbnRTdGFjay5tYXAoZnJhbWUgPT4gKHtcbiAgICBjb2x1bW46IGZyYW1lPy5sb2NhdGlvbj8uY29sdW1uLFxuICAgIGZpbGU6IGZyYW1lLmZpbGVOYW1lLFxuICAgIGxpbmVOdW1iZXI6IGZyYW1lPy5sb2NhdGlvbj8ucm93LFxuICAgIG1ldGhvZE5hbWU6IGZyYW1lLmNvbnRlbnQsXG4gICAgY29sbGFwc2U6IGZhbHNlLFxuICB9KSk7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRTdGFja1RvQ29tcG9uZW50U3RhY2soc3RhY2s6IFN0YWNrKTogQ29tcG9uZW50U3RhY2sge1xuICBjb25zdCBjb21wb25lbnRTdGFjayA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZnJhbWUgPSBzdGFja1tpXTtcbiAgICAvLyBOT1RFOiBTa2lwIHN0YWNrIGZyYW1lcyBtaXNzaW5nIGxvY2F0aW9uLlxuICAgIGlmIChmcmFtZS5saW5lTnVtYmVyICE9IG51bGwgJiYgZnJhbWUuY29sdW1uICE9IG51bGwpIHtcbiAgICAgIGNvbXBvbmVudFN0YWNrLnB1c2goe1xuICAgICAgICBmaWxlTmFtZTogZnJhbWU/LmZpbGUgfHwgJycsXG4gICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgcm93OiBmcmFtZS5saW5lTnVtYmVyLFxuICAgICAgICAgIGNvbHVtbjogZnJhbWUuY29sdW1uLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBmcmFtZS5tZXRob2ROYW1lLFxuICAgICAgICBjb2xsYXBzZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudFN0YWNrO1xufVxuXG5leHBvcnQgdHlwZSBMb2dCb3hMb2dEYXRhID0gJFJlYWRPbmx5PHtcbiAgbGV2ZWw6IExvZ0xldmVsLFxuICB0eXBlPzogP3N0cmluZyxcbiAgbWVzc2FnZTogTWVzc2FnZSxcbiAgc3RhY2s6IFN0YWNrLFxuICBjYXRlZ29yeTogc3RyaW5nLFxuICBjb21wb25lbnRTdGFja1R5cGU/OiBDb21wb25lbnRTdGFja1R5cGUsXG4gIGNvbXBvbmVudFN0YWNrOiBDb21wb25lbnRTdGFjayxcbiAgY29kZUZyYW1lPzogP0NvZGVGcmFtZSxcbiAgaXNDb21wb25lbnRFcnJvcjogYm9vbGVhbixcbiAgZXh0cmFEYXRhPzogbWl4ZWQsXG4gIG9uTm90aWZpY2F0aW9uUHJlc3M/OiA/KCkgPT4gdm9pZCxcbn0+O1xuXG5jbGFzcyBMb2dCb3hMb2cge1xuICBtZXNzYWdlOiBNZXNzYWdlO1xuICB0eXBlOiA/c3RyaW5nO1xuICBjYXRlZ29yeTogQ2F0ZWdvcnk7XG4gIGNvbXBvbmVudFN0YWNrOiBDb21wb25lbnRTdGFjaztcbiAgY29tcG9uZW50U3RhY2tUeXBlOiBDb21wb25lbnRTdGFja1R5cGU7XG4gIHN0YWNrOiBTdGFjaztcbiAgY291bnQ6IG51bWJlcjtcbiAgbGV2ZWw6IExvZ0xldmVsO1xuICBjb2RlRnJhbWU6ID9Db2RlRnJhbWU7XG4gIGNvbXBvbmVudENvZGVGcmFtZTogP0NvZGVGcmFtZTtcbiAgaXNDb21wb25lbnRFcnJvcjogYm9vbGVhbjtcbiAgZXh0cmFEYXRhOiBtaXhlZCB8IHZvaWQ7XG4gIHN5bWJvbGljYXRlZDpcbiAgICB8ICRSZWFkT25seTx7ZXJyb3I6IG51bGwsIHN0YWNrOiBudWxsLCBzdGF0dXM6ICdOT05FJ30+XG4gICAgfCAkUmVhZE9ubHk8e2Vycm9yOiBudWxsLCBzdGFjazogbnVsbCwgc3RhdHVzOiAnUEVORElORyd9PlxuICAgIHwgJFJlYWRPbmx5PHtlcnJvcjogbnVsbCwgc3RhY2s6IFN0YWNrLCBzdGF0dXM6ICdDT01QTEVURSd9PlxuICAgIHwgJFJlYWRPbmx5PHtlcnJvcjogRXJyb3IsIHN0YWNrOiBudWxsLCBzdGF0dXM6ICdGQUlMRUQnfT4gPSB7XG4gICAgZXJyb3I6IG51bGwsXG4gICAgc3RhY2s6IG51bGwsXG4gICAgc3RhdHVzOiAnTk9ORScsXG4gIH07XG4gIHN5bWJvbGljYXRlZENvbXBvbmVudFN0YWNrOlxuICAgIHwgJFJlYWRPbmx5PHtlcnJvcjogbnVsbCwgY29tcG9uZW50U3RhY2s6IG51bGwsIHN0YXR1czogJ05PTkUnfT5cbiAgICB8ICRSZWFkT25seTx7ZXJyb3I6IG51bGwsIGNvbXBvbmVudFN0YWNrOiBudWxsLCBzdGF0dXM6ICdQRU5ESU5HJ30+XG4gICAgfCAkUmVhZE9ubHk8e1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY29tcG9uZW50U3RhY2s6IENvbXBvbmVudFN0YWNrLFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURScsXG4gICAgICB9PlxuICAgIHwgJFJlYWRPbmx5PHtlcnJvcjogRXJyb3IsIGNvbXBvbmVudFN0YWNrOiBudWxsLCBzdGF0dXM6ICdGQUlMRUQnfT4gPSB7XG4gICAgZXJyb3I6IG51bGwsXG4gICAgY29tcG9uZW50U3RhY2s6IG51bGwsXG4gICAgc3RhdHVzOiAnTk9ORScsXG4gIH07XG4gIG9uTm90aWZpY2F0aW9uUHJlc3M6ID8oKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IExvZ0JveExvZ0RhdGEpIHtcbiAgICB0aGlzLmxldmVsID0gZGF0YS5sZXZlbDtcbiAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGU7XG4gICAgdGhpcy5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xuICAgIHRoaXMuc3RhY2sgPSBkYXRhLnN0YWNrO1xuICAgIHRoaXMuY2F0ZWdvcnkgPSBkYXRhLmNhdGVnb3J5O1xuICAgIHRoaXMuY29tcG9uZW50U3RhY2sgPSBkYXRhLmNvbXBvbmVudFN0YWNrO1xuICAgIHRoaXMuY29tcG9uZW50U3RhY2tUeXBlID0gZGF0YS5jb21wb25lbnRTdGFja1R5cGUgfHwgJ2xlZ2FjeSc7XG4gICAgdGhpcy5jb2RlRnJhbWUgPSBkYXRhLmNvZGVGcmFtZTtcbiAgICB0aGlzLmlzQ29tcG9uZW50RXJyb3IgPSBkYXRhLmlzQ29tcG9uZW50RXJyb3I7XG4gICAgdGhpcy5leHRyYURhdGEgPSBkYXRhLmV4dHJhRGF0YTtcbiAgICB0aGlzLmNvdW50ID0gMTtcbiAgICB0aGlzLm9uTm90aWZpY2F0aW9uUHJlc3MgPSBkYXRhLm9uTm90aWZpY2F0aW9uUHJlc3M7XG4gIH1cblxuICBpbmNyZW1lbnRDb3VudCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvdW50ICs9IDE7XG4gIH1cblxuICBnZXRBdmFpbGFibGVTdGFjaygpOiBTdGFjayB7XG4gICAgcmV0dXJuIHRoaXMuc3ltYm9saWNhdGVkLnN0YXR1cyA9PT0gJ0NPTVBMRVRFJ1xuICAgICAgPyB0aGlzLnN5bWJvbGljYXRlZC5zdGFja1xuICAgICAgOiB0aGlzLnN0YWNrO1xuICB9XG5cbiAgZ2V0QXZhaWxhYmxlQ29tcG9uZW50U3RhY2soKTogQ29tcG9uZW50U3RhY2sge1xuICAgIGlmICh0aGlzLmNvbXBvbmVudFN0YWNrVHlwZSA9PT0gJ2xlZ2FjeScpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFN0YWNrO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjay5zdGF0dXMgPT09ICdDT01QTEVURSdcbiAgICAgID8gdGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjay5jb21wb25lbnRTdGFja1xuICAgICAgOiB0aGlzLmNvbXBvbmVudFN0YWNrO1xuICB9XG5cbiAgcmV0cnlTeW1ib2xpY2F0ZShjYWxsYmFjaz86IChzdGF0dXM6IFN5bWJvbGljYXRpb25TdGF0dXMpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBsZXQgcmV0cnkgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5zeW1ib2xpY2F0ZWQuc3RhdHVzICE9PSAnQ09NUExFVEUnKSB7XG4gICAgICBMb2dCb3hTeW1ib2xpY2F0aW9uLmRlbGV0ZVN0YWNrKHRoaXMuc3RhY2spO1xuICAgICAgcmV0cnkgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjay5zdGF0dXMgIT09ICdDT01QTEVURScpIHtcbiAgICAgIExvZ0JveFN5bWJvbGljYXRpb24uZGVsZXRlU3RhY2soXG4gICAgICAgIGNvbnZlcnRDb21wb25lbnRTdGF0ZVRvU3RhY2sodGhpcy5jb21wb25lbnRTdGFjayksXG4gICAgICApO1xuICAgICAgcmV0cnkgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAocmV0cnkpIHtcbiAgICAgIHRoaXMuaGFuZGxlU3ltYm9saWNhdGUoY2FsbGJhY2spO1xuICAgIH1cbiAgfVxuXG4gIHN5bWJvbGljYXRlKGNhbGxiYWNrPzogKHN0YXR1czogU3ltYm9saWNhdGlvblN0YXR1cykgPT4gdm9pZCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN5bWJvbGljYXRlZC5zdGF0dXMgPT09ICdOT05FJykge1xuICAgICAgdGhpcy5oYW5kbGVTeW1ib2xpY2F0ZShjYWxsYmFjayk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU3ltYm9saWNhdGUoY2FsbGJhY2s/OiAoc3RhdHVzOiBTeW1ib2xpY2F0aW9uU3RhdHVzKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5zeW1ib2xpY2F0ZWQuc3RhdHVzICE9PSAnUEVORElORycgJiZcbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkLnN0YXR1cyAhPT0gJ0NPTVBMRVRFJ1xuICAgICkge1xuICAgICAgdGhpcy51cGRhdGVTdGF0dXMobnVsbCwgbnVsbCwgbnVsbCwgY2FsbGJhY2spO1xuICAgICAgTG9nQm94U3ltYm9saWNhdGlvbi5zeW1ib2xpY2F0ZSh0aGlzLnN0YWNrLCB0aGlzLmV4dHJhRGF0YSkudGhlbihcbiAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXMobnVsbCwgZGF0YT8uc3RhY2ssIGRhdGE/LmNvZGVGcmFtZSwgY2FsbGJhY2spO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXMoZXJyb3IsIG51bGwsIG51bGwsIGNhbGxiYWNrKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuY29tcG9uZW50U3RhY2sgIT0gbnVsbCAmJlxuICAgICAgdGhpcy5jb21wb25lbnRTdGFja1R5cGUgPT09ICdzdGFjaycgJiZcbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkQ29tcG9uZW50U3RhY2suc3RhdHVzICE9PSAnUEVORElORycgJiZcbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkQ29tcG9uZW50U3RhY2suc3RhdHVzICE9PSAnQ09NUExFVEUnXG4gICAgKSB7XG4gICAgICB0aGlzLnVwZGF0ZUNvbXBvbmVudFN0YWNrU3RhdHVzKG51bGwsIG51bGwsIG51bGwsIGNhbGxiYWNrKTtcbiAgICAgIGNvbnN0IGNvbXBvbmVudFN0YWNrRnJhbWVzID0gY29udmVydENvbXBvbmVudFN0YXRlVG9TdGFjayhcbiAgICAgICAgdGhpcy5jb21wb25lbnRTdGFjayxcbiAgICAgICk7XG4gICAgICBMb2dCb3hTeW1ib2xpY2F0aW9uLnN5bWJvbGljYXRlKGNvbXBvbmVudFN0YWNrRnJhbWVzLCBbXSkudGhlbihcbiAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDb21wb25lbnRTdGFja1N0YXR1cyhcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBjb252ZXJ0U3RhY2tUb0NvbXBvbmVudFN0YWNrKGRhdGEuc3RhY2spLFxuICAgICAgICAgICAgZGF0YT8uY29kZUZyYW1lLFxuICAgICAgICAgICAgY2FsbGJhY2ssXG4gICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50U3RhY2tTdGF0dXMoZXJyb3IsIG51bGwsIG51bGwsIGNhbGxiYWNrKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU3RhdHVzKFxuICAgIGVycm9yOiA/RXJyb3IsXG4gICAgc3RhY2s6ID9TdGFjayxcbiAgICBjb2RlRnJhbWU6ID9Db2RlRnJhbWUsXG4gICAgY2FsbGJhY2s/OiAoc3RhdHVzOiBTeW1ib2xpY2F0aW9uU3RhdHVzKSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBsYXN0U3RhdHVzID0gdGhpcy5zeW1ib2xpY2F0ZWQuc3RhdHVzO1xuICAgIGlmIChlcnJvciAhPSBudWxsKSB7XG4gICAgICB0aGlzLnN5bWJvbGljYXRlZCA9IHtcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIHN0YWNrOiBudWxsLFxuICAgICAgICBzdGF0dXM6ICdGQUlMRUQnLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHN0YWNrICE9IG51bGwpIHtcbiAgICAgIGlmIChjb2RlRnJhbWUpIHtcbiAgICAgICAgdGhpcy5jb2RlRnJhbWUgPSBjb2RlRnJhbWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkID0ge1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgc3RhY2ssXG4gICAgICAgIHN0YXR1czogJ0NPTVBMRVRFJyxcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkID0ge1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgc3RhY2s6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoY2FsbGJhY2sgJiYgbGFzdFN0YXR1cyAhPT0gdGhpcy5zeW1ib2xpY2F0ZWQuc3RhdHVzKSB7XG4gICAgICBjYWxsYmFjayh0aGlzLnN5bWJvbGljYXRlZC5zdGF0dXMpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUNvbXBvbmVudFN0YWNrU3RhdHVzKFxuICAgIGVycm9yOiA/RXJyb3IsXG4gICAgY29tcG9uZW50U3RhY2s6ID9Db21wb25lbnRTdGFjayxcbiAgICBjb2RlRnJhbWU6ID9Db2RlRnJhbWUsXG4gICAgY2FsbGJhY2s/OiAoc3RhdHVzOiBTeW1ib2xpY2F0aW9uU3RhdHVzKSA9PiB2b2lkLFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBsYXN0U3RhdHVzID0gdGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjay5zdGF0dXM7XG4gICAgaWYgKGVycm9yICE9IG51bGwpIHtcbiAgICAgIHRoaXMuc3ltYm9saWNhdGVkQ29tcG9uZW50U3RhY2sgPSB7XG4gICAgICAgIGVycm9yLFxuICAgICAgICBjb21wb25lbnRTdGFjazogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAnRkFJTEVEJyxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChjb21wb25lbnRTdGFjayAhPSBudWxsKSB7XG4gICAgICBpZiAoY29kZUZyYW1lKSB7XG4gICAgICAgIHRoaXMuY29tcG9uZW50Q29kZUZyYW1lID0gY29kZUZyYW1lO1xuICAgICAgfVxuICAgICAgdGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjayA9IHtcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGNvbXBvbmVudFN0YWNrLFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURScsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN5bWJvbGljYXRlZENvbXBvbmVudFN0YWNrID0ge1xuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgY29tcG9uZW50U3RhY2s6IG51bGwsXG4gICAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoY2FsbGJhY2sgJiYgbGFzdFN0YXR1cyAhPT0gdGhpcy5zeW1ib2xpY2F0ZWRDb21wb25lbnRTdGFjay5zdGF0dXMpIHtcbiAgICAgIGNhbGxiYWNrKHRoaXMuc3ltYm9saWNhdGVkQ29tcG9uZW50U3RhY2suc3RhdHVzKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9nQm94TG9nO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQW1CQSxJQUFBQSxtQkFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBUUEsU0FBU0MsNEJBQTRCQSxDQUFDQyxjQUE4QixFQUFTO0VB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QSxTQUFTO1FBQzVCO1FBRUEsSUFBSSxDQUFDVCxZQUFZLEdBQUc7VUFDbEJDLEtBQUssRUFBRSxJQUFJO1VBQ1hULEtBQUssRUFBTEEsS0FBSztVQUNMVSxNQUFNLEVBQUU7UUFDVixDQUFDO01BQ0gsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDRixZQUFZLEdBQUc7VUFDbEJDLEtBQUssRUFBRSxJQUFJO1VBQ1hULEtBQUssRUFBRSxJQUFJO1VBQ1hVLE1BQU0sRUFBRTtRQUNWLENBQUM7TUFDSDtNQUVBLElBQUltQixRQUFRLElBQUlVLFVBQVUsS0FBSyxJQUFJLENBQUMvQixZQUFZLENBQUNFLE1BQU0sRUFBRTtRQUN2RG1CLFFBQVEsQ0FBQyxJQUFJLENBQUNyQixZQUFZLENBQUNFLE1BQU0sQ0FBQztNQUNwQztJQUNGO0VBQUM7SUFBQWEsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQWEsMEJBQTBCQSxDQUN4QjVCLEtBQWEsRUFDYnhCLGNBQStCLEVBQy9CZ0MsU0FBcUIsRUFDckJZLFFBQWdELEVBQzFDO01BQ04sSUFBTVUsVUFBVSxHQUFHLElBQUksQ0FBQzVCLDBCQUEwQixDQUFDRCxNQUFNO01BQ3pELElBQUlELEtBQUssSUFBSSxJQUFJLEVBQUU7UUFDakIsSUFBSSxDQUFDRSwwQkFBMEIsR0FBRztVQUNoQ0YsS0FBSyxFQUFMQSxLQUFLO1VBQ0x4QixjQUFjLEVBQUUsSUFBSTtVQUNwQnlCLE1BQU0sRUFBRTtRQUNWLENBQUM7TUFDSCxDQUFDLE1BQU0sSUFBSXpCLGNBQWMsSUFBSSxJQUFJLEVBQUU7UUFDakMsSUFBSWdDLFNBQVMsRUFBRTtVQUNiLElBQUksQ0FBQ3VCLGtCQUFrQixHQUFHdkIsU0FBUztRQUNyQztRQUNBLElBQUksQ0FBQ04sMEJBQTBCLEdBQUc7VUFDaENGLEtBQUssRUFBRSxJQUFJO1VBQ1h4QixjQUFjLEVBQWRBLGNBQWM7VUFDZHlCLE1BQU0sRUFBRTtRQUNWLENBQUM7TUFDSCxDQUFDLE1BQU07UUFDTCxJQUFJLENBQUNDLDBCQUEwQixHQUFHO1VBQ2hDRixLQUFLLEVBQUUsSUFBSTtVQUNYeEIsY0FBYyxFQUFFLElBQUk7VUFDcEJ5QixNQUFNLEVBQUU7UUFDVixDQUFDO01BQ0g7TUFFQSxJQUFJbUIsUUFBUSxJQUFJVSxVQUFVLEtBQUssSUFBSSxDQUFDNUIsMEJBQTBCLENBQUNELE1BQU0sRUFBRTtRQUNyRW1CLFFBQVEsQ0FBQyxJQUFJLENBQUNsQiwwQkFBMEIsQ0FBQ0QsTUFBTSxDQUFDO01BQ2xEO0lBQ0Y7RUFBQztBQUFBO0FBQUEsSUFBQStCLFFBQUEsR0FBQUMsT0FBQSxDQUFBbkMsT0FBQSxHQUdZSCxTQUFTIiwiaWdub3JlTGlzdCI6W119