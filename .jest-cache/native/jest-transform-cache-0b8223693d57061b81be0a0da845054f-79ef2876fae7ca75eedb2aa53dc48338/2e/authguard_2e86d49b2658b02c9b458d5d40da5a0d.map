{"version":3,"names":["_react","require","_reactRedux","_expoRouter","_selectors","useAuthGuard","options","arguments","length","undefined","_options$redirectPath","redirectPath","_options$skipRedirect","skipRedirect","router","useRouter","isAuthenticated","useSelector","selectIsAuthenticated","user","selectUser","hasRedirected","useRef","useEffect","current","id","requestAnimationFrame","replace","cancelAnimationFrame","authenticated"],"sources":["auth.guard.js"],"sourcesContent":["/**\r\n * Auth Guard Hook\r\n * \r\n * Checks authentication state and redirects unauthenticated users.\r\n * \r\n * @param {Object} options - Configuration options\r\n * @param {string} [options.redirectPath='/home'] - Path to redirect to if unauthenticated\r\n * @param {boolean} [options.skipRedirect=false] - If true, skip automatic redirect (useful for auth layouts that need to redirect authenticated users)\r\n * @returns {Object} Auth state object with { authenticated, user }\r\n * \r\n * @example\r\n * const { authenticated, user } = useAuthGuard();\r\n * const { authenticated, user } = useAuthGuard({ redirectPath: '/custom-login' });\r\n * const { authenticated, user } = useAuthGuard({ skipRedirect: true }); // For auth layouts\r\n */\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useRouter } from 'expo-router';\r\nimport { selectIsAuthenticated, selectUser } from '@store/selectors';\r\n\r\nexport function useAuthGuard(options = {}) {\r\n  const { redirectPath = '/home', skipRedirect = false } = options;\r\n  \r\n  const router = useRouter();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n  \r\n  // Use ref to track if redirect has been performed to prevent multiple redirects\r\n  const hasRedirected = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    if (skipRedirect) {\r\n      return;\r\n    }\r\n    if (isAuthenticated) {\r\n      hasRedirected.current = false;\r\n      return;\r\n    }\r\n    if (hasRedirected.current) return;\r\n    hasRedirected.current = true;\r\n    const id = requestAnimationFrame(() => {\r\n      requestAnimationFrame(() => {\r\n        router.replace(redirectPath);\r\n      });\r\n    });\r\n    return () => cancelAnimationFrame(id);\r\n  }, [isAuthenticated, redirectPath, router, skipRedirect]);\r\n  \r\n  return {\r\n    authenticated: isAuthenticated,\r\n    user: user || null,\r\n  };\r\n}\r\n\r\n"],"mappings":";;;;AAgBA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AAEO,SAASI,YAAYA,CAAA,EAAe;EAAA,IAAdC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACvC,IAAAG,qBAAA,GAAyDJ,OAAO,CAAxDK,YAAY;IAAZA,YAAY,GAAAD,qBAAA,cAAG,OAAO,GAAAA,qBAAA;IAAAE,qBAAA,GAA2BN,OAAO,CAAhCO,YAAY;IAAZA,YAAY,GAAAD,qBAAA,cAAG,KAAK,GAAAA,qBAAA;EAEpD,IAAME,MAAM,GAAG,IAAAC,qBAAS,EAAC,CAAC;EAC1B,IAAMC,eAAe,GAAG,IAAAC,uBAAW,EAACC,gCAAqB,CAAC;EAC1D,IAAMC,IAAI,GAAG,IAAAF,uBAAW,EAACG,qBAAU,CAAC;EAGpC,IAAMC,aAAa,GAAG,IAAAC,aAAM,EAAC,KAAK,CAAC;EAEnC,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAIV,YAAY,EAAE;MAChB;IACF;IACA,IAAIG,eAAe,EAAE;MACnBK,aAAa,CAACG,OAAO,GAAG,KAAK;MAC7B;IACF;IACA,IAAIH,aAAa,CAACG,OAAO,EAAE;IAC3BH,aAAa,CAACG,OAAO,GAAG,IAAI;IAC5B,IAAMC,EAAE,GAAGC,qBAAqB,CAAC,YAAM;MACrCA,qBAAqB,CAAC,YAAM;QAC1BZ,MAAM,CAACa,OAAO,CAAChB,YAAY,CAAC;MAC9B,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,OAAO;MAAA,OAAMiB,oBAAoB,CAACH,EAAE,CAAC;IAAA;EACvC,CAAC,EAAE,CAACT,eAAe,EAAEL,YAAY,EAAEG,MAAM,EAAED,YAAY,CAAC,CAAC;EAEzD,OAAO;IACLgB,aAAa,EAAEb,eAAe;IAC9BG,IAAI,EAAEA,IAAI,IAAI;EAChB,CAAC;AACH","ignoreList":[]}