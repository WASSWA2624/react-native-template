{"version":3,"names":["_getJestObj","mock","useI18n","jest","fn","t","k","useNetwork","isOffline","useUserSession","useRouter","push","mockPush","_interopRequireDefault","require","default","_asyncToGenerator2","_require2","_require","renderHook","act","useUserSessionListScreen","describe","mockList","mockRevoke","mockReset","beforeEach","clearAllMocks","mockReturnValue","list","revoke","data","items","pagination","isLoading","errorCode","reset","it","_renderHook","result","expect","current","toEqual","onRetry","toBe","onSessionPress","onRevoke","toHaveBeenCalled","toHaveBeenCalledWith","page","limit","_renderHook2","mockClear","_renderHook3","_renderHook4","hasError","errorMessage","toBeDefined","mockResolvedValue","undefined","_renderHook5","stopPropagation","_renderHook6","mockRejectedValue","Error","_renderHook7","not"],"sources":["useUserSessionListScreen.test.js"],"sourcesContent":["/**\r\n * useUserSessionListScreen Hook Tests\r\n */\r\nconst { renderHook, act } = require('@testing-library/react-native');\r\nconst useUserSessionListScreen = require('@platform/screens/settings/UserSessionListScreen/useUserSessionListScreen').default;\r\n\r\nconst mockPush = jest.fn();\r\njest.mock('@hooks', () => ({\r\n  useI18n: jest.fn(() => ({ t: (k) => k })),\r\n  useNetwork: jest.fn(() => ({ isOffline: false })),\r\n  useUserSession: jest.fn(),\r\n}));\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: () => ({ push: mockPush }),\r\n}));\r\n\r\nconst useUserSession = require('@hooks').useUserSession;\r\n\r\ndescribe('useUserSessionListScreen', () => {\r\n  const mockList = jest.fn();\r\n  const mockRevoke = jest.fn();\r\n  const mockReset = jest.fn();\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useUserSession.mockReturnValue({\r\n      list: mockList,\r\n      revoke: mockRevoke,\r\n      data: { items: [], pagination: {} },\r\n      isLoading: false,\r\n      errorCode: null,\r\n      reset: mockReset,\r\n    });\r\n  });\r\n\r\n  it('returns items, handlers, and state', () => {\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    expect(result.current.items).toEqual([]);\r\n    expect(typeof result.current.onRetry).toBe('function');\r\n    expect(typeof result.current.onSessionPress).toBe('function');\r\n    expect(typeof result.current.onRevoke).toBe('function');\r\n  });\r\n\r\n  it('calls list on mount', () => {\r\n    renderHook(() => useUserSessionListScreen());\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onRetry calls fetchList', () => {\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    mockReset.mockClear();\r\n    mockList.mockClear();\r\n    result.current.onRetry();\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onSessionPress pushes route with id', () => {\r\n    mockPush.mockClear();\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    result.current.onSessionPress('sid-1');\r\n    expect(mockPush).toHaveBeenCalledWith('/settings/user-sessions/sid-1');\r\n  });\r\n\r\n  it('exposes errorMessage when errorCode set', () => {\r\n    useUserSession.mockReturnValue({\r\n      list: mockList,\r\n      revoke: mockRevoke,\r\n      data: { items: [] },\r\n      isLoading: false,\r\n      errorCode: 'SESSION_NOT_FOUND',\r\n      reset: mockReset,\r\n    });\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    expect(result.current.hasError).toBe(true);\r\n    expect(result.current.errorMessage).toBeDefined();\r\n  });\r\n\r\n  it('onRevoke calls revoke then fetchList', async () => {\r\n    mockRevoke.mockResolvedValue(undefined);\r\n    mockReset.mockClear();\r\n    mockList.mockClear();\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    await act(async () => {\r\n      await result.current.onRevoke('sid-1');\r\n    });\r\n    expect(mockRevoke).toHaveBeenCalledWith('sid-1');\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onRevoke calls stopPropagation when event provided', async () => {\r\n    const stopPropagation = jest.fn();\r\n    mockRevoke.mockResolvedValue(undefined);\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    await act(async () => {\r\n      await result.current.onRevoke('sid-1', { stopPropagation });\r\n    });\r\n    expect(stopPropagation).toHaveBeenCalled();\r\n  });\r\n\r\n  it('onRevoke does not throw or refetch when revoke rejects', async () => {\r\n    mockRevoke.mockRejectedValue(new Error('revoke failed'));\r\n    const { result } = renderHook(() => useUserSessionListScreen());\r\n    mockList.mockClear();\r\n    await act(async () => {\r\n      await result.current.onRevoke('sid-1');\r\n    });\r\n    expect(mockRevoke).toHaveBeenCalledWith('sid-1');\r\n    expect(mockList).not.toHaveBeenCalled();\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}