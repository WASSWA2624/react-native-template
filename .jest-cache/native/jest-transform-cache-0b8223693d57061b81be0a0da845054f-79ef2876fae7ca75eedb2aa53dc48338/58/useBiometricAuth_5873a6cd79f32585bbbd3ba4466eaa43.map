{"version":3,"names":["useCallback","useEffect","useMemo","useState","useI18n","authenticateBiometric","isBiometricEnrolled","isBiometricSupported","cov_2i5nhnvb0w","s","useBiometricAuth","f","_ref","t","_ref2","_ref3","_slicedToArray","isAvailable","setIsAvailable","_ref4","_ref5","isChecking","setIsChecking","_ref6","_ref7","errorMessage","setErrorMessage","checkAvailability","_asyncToGenerator","_ref9","Promise","all","_ref0","supported","enrolled","Boolean","b","isMounted","load","_ref1","_ref10","_ref11","apply","arguments","authenticate","result","promptMessage","cancelLabel","fallbackLabel","success","refreshAvailability"],"sources":["useBiometricAuth.js"],"sourcesContent":["/**\r\n * useBiometricAuth Hook\r\n * Exposes biometric availability and authentication helpers.\r\n * File: useBiometricAuth.js\r\n */\r\nimport { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { useI18n } from '@hooks';\r\nimport { authenticateBiometric, isBiometricEnrolled, isBiometricSupported } from '@security';\r\n\r\nconst useBiometricAuth = () => {\r\n  const { t } = useI18n();\r\n  const [isAvailable, setIsAvailable] = useState(false);\r\n  const [isChecking, setIsChecking] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const checkAvailability = useCallback(async () => {\r\n    setIsChecking(true);\r\n    const [supported, enrolled] = await Promise.all([\r\n      isBiometricSupported(),\r\n      isBiometricEnrolled(),\r\n    ]);\r\n    setIsAvailable(Boolean(supported && enrolled));\r\n    setIsChecking(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const load = async () => {\r\n      const [supported, enrolled] = await Promise.all([\r\n        isBiometricSupported(),\r\n        isBiometricEnrolled(),\r\n      ]);\r\n      if (!isMounted) return;\r\n      setIsAvailable(Boolean(supported && enrolled));\r\n      setIsChecking(false);\r\n    };\r\n    load();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const authenticate = useCallback(async () => {\r\n    setErrorMessage(null);\r\n    const result = await authenticateBiometric({\r\n      promptMessage: t('auth.login.biometric.prompt'),\r\n      cancelLabel: t('auth.login.biometric.cancel'),\r\n      fallbackLabel: t('auth.login.biometric.fallback'),\r\n    });\r\n    if (!result?.success) {\r\n      setErrorMessage(t('auth.login.biometric.error'));\r\n      return false;\r\n    }\r\n    return true;\r\n  }, [t]);\r\n\r\n  return useMemo(() => ({\r\n    isAvailable,\r\n    isChecking,\r\n    errorMessage,\r\n    authenticate,\r\n    refreshAvailability: checkAvailability,\r\n  }), [authenticate, checkAvailability, errorMessage, isAvailable, isChecking]);\r\n};\r\n\r\nexport default useBiometricAuth;\r\n"],"mappings":"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","ignoreList":[]}