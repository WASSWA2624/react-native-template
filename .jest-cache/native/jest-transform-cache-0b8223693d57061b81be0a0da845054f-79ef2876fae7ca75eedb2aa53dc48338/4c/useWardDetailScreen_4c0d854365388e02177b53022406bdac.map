{"version":3,"names":["useCallback","useEffect","useMemo","useRouter","useLocalSearchParams","useI18n","useNetwork","useWard","cov_1vlygm13rl","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","useWardDetailScreen","_ref","router","_ref2","id","_ref3","isOffline","_ref4","get","remove","data","isLoading","reset","ward","Array","isArray","errorMessage","fetchDetail","handleRetry","handleBack","push","handleDelete","_asyncToGenerator","_unused","hasError","Boolean","onRetry","onBack","onDelete"],"sources":["useWardDetailScreen.js"],"sourcesContent":["/**\r\n * useWardDetailScreen Hook\r\n * Shared logic for WardDetailScreen across platforms.\r\n * File: useWardDetailScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo } from 'react';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { useI18n, useNetwork, useWard } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useWardDetailScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { id } = useLocalSearchParams();\r\n  const { isOffline } = useNetwork();\r\n  const { get, remove, data, isLoading, errorCode, reset } = useWard();\r\n\r\n  const ward = data && typeof data === 'object' && !Array.isArray(data) ? data : null;\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [t, errorCode]\r\n  );\r\n\r\n  const fetchDetail = useCallback(() => {\r\n    if (!id) return;\r\n    reset();\r\n    get(id);\r\n  }, [id, get, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchDetail();\r\n  }, [fetchDetail]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    fetchDetail();\r\n  }, [fetchDetail]);\r\n\r\n  const handleBack = useCallback(() => {\r\n    router.push('/settings/wards');\r\n  }, [router]);\r\n\r\n  const handleDelete = useCallback(async () => {\r\n    if (!id) return;\r\n    try {\r\n      await remove(id);\r\n      handleBack();\r\n    } catch {\r\n      /* error handled by hook */\r\n    }\r\n  }, [id, remove, handleBack]);\r\n\r\n  return {\r\n    id,\r\n    ward,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    errorMessage,\r\n    isOffline,\r\n    onRetry: handleRetry,\r\n    onBack: handleBack,\r\n    onDelete: handleDelete,\r\n  };\r\n};\r\n\r\nexport default useWardDetailScreen;\r\n"],"mappings":"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","ignoreList":[]}