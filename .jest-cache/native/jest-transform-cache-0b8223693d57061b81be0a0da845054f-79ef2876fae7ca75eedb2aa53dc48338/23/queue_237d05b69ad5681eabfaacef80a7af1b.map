{"version":3,"names":["_errors","require","_security","_storage","cov_3yryk4iw5","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","QUEUE_KEY","reportQueueError","error","context","handleError","Object","assign","scope","asSafeArray","value","Array","isArray","persistEncryptedQueue","_ref","_asyncToGenerator2","default","queue","json","JSON","stringify","encrypted","encryption","encrypt","asyncStorage","setItem","op","key","_x","apply","arguments","getQueue","exports","_ref2","stored","getItem","migrated","removeItem","decrypt","parsed","parse","addToQueue","_ref3","request","now","Date","push","id","String","timestamp","_x2","removeFromQueue","_ref4","requestId","filtered","filter","item","_x3","clearQueue","_ref5","_default"],"sources":["queue.js"],"sourcesContent":["/**\r\n * Offline Queue\r\n * Stores failed/deferred requests\r\n * File: queue.js\r\n */\r\nimport { handleError } from '@errors';\r\nimport { encryption } from '@security';\r\nimport { async as asyncStorage } from '@services/storage';\r\n\r\nconst QUEUE_KEY = 'offline_queue';\r\n\r\nconst reportQueueError = (error, context) => {\r\n  handleError(error, {\r\n    scope: 'offline.queue',\r\n    ...context,\r\n  });\r\n};\r\n\r\nconst asSafeArray = (value) => {\r\n  return Array.isArray(value) ? value : [];\r\n};\r\n\r\nconst persistEncryptedQueue = async (queue) => {\r\n  try {\r\n    const json = JSON.stringify(asSafeArray(queue));\r\n    const encrypted = await encryption.encrypt(json);\r\n    return await asyncStorage.setItem(QUEUE_KEY, encrypted);\r\n  } catch (error) {\r\n    reportQueueError(error, { op: 'persistEncryptedQueue', key: QUEUE_KEY });\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Read queue from storage, decrypting if available.\r\n * Security-first: queue is never persisted unencrypted.\r\n */\r\nexport const getQueue = async () => {\r\n  const stored = await asyncStorage.getItem(QUEUE_KEY);\r\n  if (!stored) return [];\r\n\r\n  // Legacy (non-compliant) format: array stored unencrypted.\r\n  // We never keep this around â€” migrate to encrypted if possible; otherwise clear it.\r\n  if (Array.isArray(stored)) {\r\n    try {\r\n      const migrated = await persistEncryptedQueue(stored);\r\n      if (!migrated) {\r\n        await asyncStorage.removeItem(QUEUE_KEY);\r\n        return [];\r\n      }\r\n      return stored;\r\n    } catch (error) {\r\n      reportQueueError(error, { op: 'migrateLegacyQueue', key: QUEUE_KEY });\r\n      await asyncStorage.removeItem(QUEUE_KEY);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  if (typeof stored !== 'string') {\r\n    await asyncStorage.removeItem(QUEUE_KEY);\r\n    return [];\r\n  }\r\n\r\n  try {\r\n    const json = await encryption.decrypt(stored);\r\n    const parsed = JSON.parse(json);\r\n    return asSafeArray(parsed);\r\n  } catch (error) {\r\n    reportQueueError(error, { op: 'decryptQueue', key: QUEUE_KEY });\r\n    await asyncStorage.removeItem(QUEUE_KEY);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const addToQueue = async (request) => {\r\n  const queue = await getQueue();\r\n  const now = Date.now();\r\n  queue.push({\r\n    ...request,\r\n    id: String(now),\r\n    timestamp: now,\r\n  });\r\n  return await persistEncryptedQueue(queue);\r\n};\r\n\r\nexport const removeFromQueue = async (requestId) => {\r\n  const queue = await getQueue();\r\n  const filtered = queue.filter((item) => item?.id !== requestId);\r\n  return await persistEncryptedQueue(filtered);\r\n};\r\n\r\nexport const clearQueue = async () => {\r\n  // Removing the key is safe and avoids persisting even an empty queue when crypto is unavailable.\r\n  return await asyncStorage.removeItem(QUEUE_KEY);\r\n};\r\n\r\nexport default {\r\n  getQueue,\r\n  addToQueue,\r\n  removeFromQueue,\r\n  clearQueue,\r\n};\r\n\r\n"],"mappings":";;;;;;AAKA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AACA,IAAAE,QAAA,GAAAF,OAAA;AAA0D,SAAAG,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UA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","ignoreList":[]}