{"version":3,"names":["AsyncStorage","Platform","handleError","cov_15ydhcetn2","s","reportStorageError","error","context","f","Object","assign","scope","getItem","_ref","_asyncToGenerator","key","value","OS","b","window","localStorage","parsed","JSON","parse","op","_x","apply","arguments","setItem","_ref2","serialized","stringify","_x2","_x3","removeItem","_ref3","_x4"],"sources":["async.js"],"sourcesContent":["/**\r\n * AsyncStorage Service\r\n * Non-sensitive data storage\r\n * File: async.js\r\n * \r\n * Uses AsyncStorage for native platforms and localStorage for web\r\n */\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport { Platform } from 'react-native';\r\nimport { handleError } from '@errors';\r\n\r\nconst reportStorageError = (error, context) => {\r\n  handleError(error, {\r\n    scope: 'services.storage.async',\r\n    ...context,\r\n  });\r\n};\r\n\r\nconst getItem = async (key) => {\r\n  try {\r\n    let value;\r\n    if (Platform.OS === 'web') {\r\n      // Check localStorage availability right before use (inside try block)\r\n      if (typeof window !== 'undefined' && window.localStorage) {\r\n        value = window.localStorage.getItem(key);\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      // Use AsyncStorage for native\r\n      value = await AsyncStorage.getItem(key);\r\n    }\r\n    const parsed = value ? JSON.parse(value) : null;\r\n    return parsed;\r\n  } catch (error) {\r\n    reportStorageError(error, { op: 'getItem', key });\r\n    return null;\r\n  }\r\n};\r\n\r\nconst setItem = async (key, value) => {\r\n  try {\r\n    const serialized = JSON.stringify(value);\r\n    if (Platform.OS === 'web') {\r\n      // Check localStorage availability right before use (inside try block)\r\n      if (typeof window !== 'undefined' && window.localStorage) {\r\n        window.localStorage.setItem(key, serialized);\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      // Use AsyncStorage for native\r\n      await AsyncStorage.setItem(key, serialized);\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    reportStorageError(error, { op: 'setItem', key });\r\n    return false;\r\n  }\r\n};\r\n\r\nconst removeItem = async (key) => {\r\n  try {\r\n    if (Platform.OS === 'web') {\r\n      // Check localStorage availability right before use (inside try block)\r\n      if (typeof window !== 'undefined' && window.localStorage) {\r\n        window.localStorage.removeItem(key);\r\n      } else {\r\n        return false;\r\n      }\r\n    } else {\r\n      // Use AsyncStorage for native\r\n      await AsyncStorage.removeItem(key);\r\n    }\r\n    return true;\r\n  } catch (error) {\r\n    reportStorageError(error, { op: 'removeItem', key });\r\n    return false;\r\n  }\r\n};\r\n\r\nexport { getItem, setItem, removeItem };\r\n\r\n"],"mappings":"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","ignoreList":[]}