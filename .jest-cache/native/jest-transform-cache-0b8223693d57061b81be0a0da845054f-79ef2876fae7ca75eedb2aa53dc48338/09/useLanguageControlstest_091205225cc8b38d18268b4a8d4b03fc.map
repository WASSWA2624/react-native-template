{"version":3,"names":["_getJestObj","mock","useI18n","t","key","locale","createI18n","supportedLocales","getDeviceLocale","async","setItem","jest","fn","_interopRequireDefault","require","default","_react","_reactTestRenderer","_reactRedux","_toolkit","_rootReducer","_useLanguageControls","_storage","_jsxRuntime","_require","act","TestRenderer","createStore","preloadedState","configureStore","reducer","rootReducer","renderHook","hook","_ref","arguments","length","undefined","initialState","result","store","HookHarness","hookResult","Object","assign","renderer","create","jsx","Provider","children","current","rerender","update","describe","beforeEach","clearAllMocks","it","_renderHook","useLanguageControls","ui","theme","isLoading","expect","toBe","options","toHaveLength","value","_renderHook2","_renderHook3","setLocale","getState","asyncStorage","toHaveBeenCalledWith","_renderHook4","not","toHaveBeenCalled","_renderHook5"],"sources":["useLanguageControls.test.js"],"sourcesContent":["/**\r\n * useLanguageControls Hook Tests\r\n * File: useLanguageControls.test.js\r\n */\r\nimport React from 'react';\r\nimport TestRenderer from 'react-test-renderer';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport rootReducer from '@store/rootReducer';\r\nimport useLanguageControls from '@platform/components/navigation/LanguageControls/useLanguageControls';\r\nimport { async as asyncStorage } from '@services/storage';\r\n\r\nconst act = TestRenderer.act;\r\n\r\njest.mock('@hooks', () => ({\r\n  useI18n: () => ({\r\n    t: (key) => key,\r\n    locale: 'en',\r\n  }),\r\n}));\r\n\r\njest.mock('@i18n', () => ({\r\n  createI18n: () => ({\r\n    supportedLocales: ['en', 'fr'],\r\n  }),\r\n  getDeviceLocale: () => 'en',\r\n}));\r\n\r\njest.mock('@services/storage', () => ({\r\n  async: {\r\n    setItem: jest.fn(),\r\n  },\r\n}));\r\n\r\nconst createStore = (preloadedState) =>\r\n  configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState,\r\n  });\r\n\r\nconst renderHook = (hook, { initialState } = {}) => {\r\n  const result = {};\r\n  const store = createStore(initialState);\r\n\r\n  const HookHarness = () => {\r\n    const hookResult = hook();\r\n    Object.assign(result, hookResult);\r\n    return null;\r\n  };\r\n\r\n  let renderer;\r\n  act(() => {\r\n    renderer = TestRenderer.create(\r\n      <Provider store={store}>\r\n        <HookHarness />\r\n      </Provider>\r\n    );\r\n  });\r\n\r\n  return {\r\n    result: { current: result },\r\n    store,\r\n    rerender: () => {\r\n      act(() => {\r\n        renderer.update(\r\n          <Provider store={store}>\r\n            <HookHarness />\r\n          </Provider>\r\n        );\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\ndescribe('useLanguageControls', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('returns locale and supported options', () => {\r\n    const { result } = renderHook(useLanguageControls, {\r\n      initialState: {\r\n        ui: { theme: 'light', locale: 'en', isLoading: false },\r\n      },\r\n    });\r\n\r\n    expect(result.current.locale).toBe('en');\r\n    expect(result.current.options).toHaveLength(2);\r\n    expect(result.current.options[0].value).toBe('en');\r\n  });\r\n\r\n  it('falls back to default when stored locale is unsupported', () => {\r\n    const { result } = renderHook(useLanguageControls, {\r\n      initialState: {\r\n        ui: { theme: 'light', locale: 'xx', isLoading: false },\r\n      },\r\n    });\r\n\r\n    expect(result.current.locale).toBe('en');\r\n  });\r\n\r\n  it('persists and dispatches when setting a valid locale', () => {\r\n    const { result, store } = renderHook(useLanguageControls, {\r\n      initialState: {\r\n        ui: { theme: 'light', locale: 'en', isLoading: false },\r\n      },\r\n    });\r\n\r\n    act(() => {\r\n      result.current.setLocale('fr');\r\n    });\r\n\r\n    expect(store.getState().ui.locale).toBe('fr');\r\n    expect(asyncStorage.setItem).toHaveBeenCalledWith('user_locale', 'fr');\r\n  });\r\n\r\n  it('ignores invalid locale values', () => {\r\n    const { result, store } = renderHook(useLanguageControls, {\r\n      initialState: {\r\n        ui: { theme: 'light', locale: 'en', isLoading: false },\r\n      },\r\n    });\r\n\r\n    act(() => {\r\n      result.current.setLocale('invalid');\r\n    });\r\n\r\n    expect(store.getState().ui.locale).toBe('en');\r\n    expect(asyncStorage.setItem).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('avoids persisting when locale is unchanged', () => {\r\n    const { result, store } = renderHook(useLanguageControls, {\r\n      initialState: {\r\n        ui: { theme: 'light', locale: 'en', isLoading: false },\r\n      },\r\n    });\r\n\r\n    act(() => {\r\n      result.current.setLocale('en');\r\n    });\r\n\r\n    expect(store.getState().ui.locale).toBe('en');\r\n    expect(asyncStorage.setItem).not.toHaveBeenCalled();\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}