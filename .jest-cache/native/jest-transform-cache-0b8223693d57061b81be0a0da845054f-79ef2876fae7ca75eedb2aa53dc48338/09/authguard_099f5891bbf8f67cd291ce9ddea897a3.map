{"version":3,"names":["useEffect","useRef","useSelector","useRouter","selectIsAuthenticated","selectUser","useAuthGuard","options","arguments","length","undefined","cov_nkx2d88az","b","f","_ref","s","_ref$redirectPath","redirectPath","_ref$skipRedirect","skipRedirect","router","isAuthenticated","user","hasRedirected","current","replace","authenticated"],"sources":["auth.guard.js"],"sourcesContent":["/**\r\n * Auth Guard Hook\r\n * \r\n * Checks authentication state and redirects unauthenticated users.\r\n * \r\n * @param {Object} options - Configuration options\r\n * @param {string} [options.redirectPath='/login'] - Path to redirect to if unauthenticated\r\n * @param {boolean} [options.skipRedirect=false] - If true, skip automatic redirect (useful for auth layouts that need to redirect authenticated users)\r\n * @returns {Object} Auth state object with { authenticated, user }\r\n * \r\n * @example\r\n * const { authenticated, user } = useAuthGuard();\r\n * const { authenticated, user } = useAuthGuard({ redirectPath: '/custom-login' });\r\n * const { authenticated, user } = useAuthGuard({ skipRedirect: true }); // For auth layouts\r\n */\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useRouter } from 'expo-router';\r\nimport { selectIsAuthenticated, selectUser } from '@store/selectors';\r\n\r\nexport function useAuthGuard(options = {}) {\r\n  const { redirectPath = '/login', skipRedirect = false } = options;\r\n  \r\n  const router = useRouter();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n  \r\n  // Use ref to track if redirect has been performed to prevent multiple redirects\r\n  const hasRedirected = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    if (skipRedirect) {\r\n      // Skip automatic redirect - let the calling component handle redirects\r\n      return;\r\n    }\r\n    \r\n    if (isAuthenticated) {\r\n      // Reset redirect flag when authenticated\r\n      hasRedirected.current = false;\r\n    } else if (!hasRedirected.current) {\r\n      // Only redirect if not authenticated and haven't redirected yet\r\n      hasRedirected.current = true;\r\n      router.replace(redirectPath);\r\n    }\r\n  }, [isAuthenticated, redirectPath, router, skipRedirect]);\r\n  \r\n  return {\r\n    authenticated: isAuthenticated,\r\n    user: user || null,\r\n  };\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}