{"version":3,"names":["_getJestObj","mock","actual","jest","requireActual","Object","assign","apiClient","fn","_interopRequireDefault","require","default","_asyncToGenerator2","_endpoints","_api","_notification","_require","describe","it","params","page","limit","mockResolvedValue","data","listNotificationsApi","expect","toHaveBeenCalledWith","url","endpoints","NOTIFICATIONS","LIST","buildQueryString","method","id","getNotificationApi","GET","markNotificationReadApi","MARK_READ","markNotificationUnreadApi","MARK_UNREAD","getNotificationTargetsApi","GET_TARGETS","getNotificationPreferencesApi","GET_PREFERENCES","payload","channel","updateNotificationPreferencesApi","UPDATE_PREFERENCES","body"],"sources":["notification.api.test.js"],"sourcesContent":["/**\r\n * Notification API Tests\r\n * File: notification.api.test.js\r\n */\r\nimport { endpoints } from '@config/endpoints';\r\nimport { apiClient, buildQueryString } from '@services/api';\r\nimport {\r\n  getNotificationApi,\r\n  getNotificationPreferencesApi,\r\n  getNotificationTargetsApi,\r\n  listNotificationsApi,\r\n  markNotificationReadApi,\r\n  markNotificationUnreadApi,\r\n  updateNotificationPreferencesApi,\r\n} from '@features/notification/notification.api';\r\n\r\njest.mock('@services/api', () => {\r\n  const actual = jest.requireActual('@services/api');\r\n  return {\r\n    ...actual,\r\n    apiClient: jest.fn(),\r\n  };\r\n});\r\n\r\ndescribe('notification.api', () => {\r\n  it('lists notifications', async () => {\r\n    const params = { page: 1, limit: 10 };\r\n    apiClient.mockResolvedValue({ data: [] });\r\n    await listNotificationsApi(params);\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: `${endpoints.NOTIFICATIONS.LIST}${buildQueryString(params)}`,\r\n      method: 'GET',\r\n    });\r\n  });\r\n\r\n  it('gets a notification', async () => {\r\n    apiClient.mockResolvedValue({ data: { id: '1' } });\r\n    await getNotificationApi('1');\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.GET('1'),\r\n      method: 'GET',\r\n    });\r\n  });\r\n\r\n  it('marks a notification read', async () => {\r\n    apiClient.mockResolvedValue({ data: { id: '1' } });\r\n    await markNotificationReadApi('1');\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.MARK_READ('1'),\r\n      method: 'POST',\r\n    });\r\n  });\r\n\r\n  it('marks a notification unread', async () => {\r\n    apiClient.mockResolvedValue({ data: { id: '1' } });\r\n    await markNotificationUnreadApi('1');\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.MARK_UNREAD('1'),\r\n      method: 'POST',\r\n    });\r\n  });\r\n\r\n  it('fetches notification targets', async () => {\r\n    apiClient.mockResolvedValue({ data: [] });\r\n    await getNotificationTargetsApi();\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.GET_TARGETS,\r\n      method: 'GET',\r\n    });\r\n  });\r\n\r\n  it('fetches notification preferences', async () => {\r\n    apiClient.mockResolvedValue({ data: {} });\r\n    await getNotificationPreferencesApi();\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.GET_PREFERENCES,\r\n      method: 'GET',\r\n    });\r\n  });\r\n\r\n  it('updates notification preferences', async () => {\r\n    const payload = { channel: 'email' };\r\n    apiClient.mockResolvedValue({ data: payload });\r\n    await updateNotificationPreferencesApi(payload);\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: endpoints.NOTIFICATIONS.UPDATE_PREFERENCES,\r\n      method: 'PUT',\r\n      body: payload,\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}