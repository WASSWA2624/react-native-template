214d32a5ecf75ec7fba49a68d70519c2
_getJestObj().mock("../../../services/api", function () {
  var actual = jest.requireActual("../../../services/api");
  return Object.assign({}, actual, {
    apiClient: jest.fn()
  });
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _endpoints = require("../../../config/endpoints");
var _api = require("../../../services/api");
var _notification = require("../../../features/notification/notification.api");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('notification.api', function () {
  it('lists notifications', (0, _asyncToGenerator2.default)(function* () {
    var params = {
      page: 1,
      limit: 10
    };
    _api.apiClient.mockResolvedValue({
      data: []
    });
    yield (0, _notification.listNotificationsApi)(params);
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: `${_endpoints.endpoints.NOTIFICATIONS.LIST}${(0, _api.buildQueryString)(params)}`,
      method: 'GET'
    });
  }));
  it('gets a notification', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    yield (0, _notification.getNotificationApi)('1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.GET('1'),
      method: 'GET'
    });
  }));
  it('marks a notification read', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    yield (0, _notification.markNotificationReadApi)('1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.MARK_READ('1'),
      method: 'POST'
    });
  }));
  it('marks a notification unread', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    yield (0, _notification.markNotificationUnreadApi)('1');
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.MARK_UNREAD('1'),
      method: 'POST'
    });
  }));
  it('fetches notification targets', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: []
    });
    yield (0, _notification.getNotificationTargetsApi)();
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.GET_TARGETS,
      method: 'GET'
    });
  }));
  it('fetches notification preferences', (0, _asyncToGenerator2.default)(function* () {
    _api.apiClient.mockResolvedValue({
      data: {}
    });
    yield (0, _notification.getNotificationPreferencesApi)();
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.GET_PREFERENCES,
      method: 'GET'
    });
  }));
  it('updates notification preferences', (0, _asyncToGenerator2.default)(function* () {
    var payload = {
      channel: 'email'
    };
    _api.apiClient.mockResolvedValue({
      data: payload
    });
    yield (0, _notification.updateNotificationPreferencesApi)(payload);
    expect(_api.apiClient).toHaveBeenCalledWith({
      url: _endpoints.endpoints.NOTIFICATIONS.UPDATE_PREFERENCES,
      method: 'PUT',
      body: payload
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhY3R1YWwiLCJqZXN0IiwicmVxdWlyZUFjdHVhbCIsIk9iamVjdCIsImFzc2lnbiIsImFwaUNsaWVudCIsImZuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2VuZHBvaW50cyIsIl9hcGkiLCJfbm90aWZpY2F0aW9uIiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwicGFyYW1zIiwicGFnZSIsImxpbWl0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJkYXRhIiwibGlzdE5vdGlmaWNhdGlvbnNBcGkiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInVybCIsImVuZHBvaW50cyIsIk5PVElGSUNBVElPTlMiLCJMSVNUIiwiYnVpbGRRdWVyeVN0cmluZyIsIm1ldGhvZCIsImlkIiwiZ2V0Tm90aWZpY2F0aW9uQXBpIiwiR0VUIiwibWFya05vdGlmaWNhdGlvblJlYWRBcGkiLCJNQVJLX1JFQUQiLCJtYXJrTm90aWZpY2F0aW9uVW5yZWFkQXBpIiwiTUFSS19VTlJFQUQiLCJnZXROb3RpZmljYXRpb25UYXJnZXRzQXBpIiwiR0VUX1RBUkdFVFMiLCJnZXROb3RpZmljYXRpb25QcmVmZXJlbmNlc0FwaSIsIkdFVF9QUkVGRVJFTkNFUyIsInBheWxvYWQiLCJjaGFubmVsIiwidXBkYXRlTm90aWZpY2F0aW9uUHJlZmVyZW5jZXNBcGkiLCJVUERBVEVfUFJFRkVSRU5DRVMiLCJib2R5Il0sInNvdXJjZXMiOlsibm90aWZpY2F0aW9uLmFwaS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBOb3RpZmljYXRpb24gQVBJIFRlc3RzXHJcbiAqIEZpbGU6IG5vdGlmaWNhdGlvbi5hcGkudGVzdC5qc1xyXG4gKi9cclxuaW1wb3J0IHsgZW5kcG9pbnRzIH0gZnJvbSAnQGNvbmZpZy9lbmRwb2ludHMnO1xyXG5pbXBvcnQgeyBhcGlDbGllbnQsIGJ1aWxkUXVlcnlTdHJpbmcgfSBmcm9tICdAc2VydmljZXMvYXBpJztcclxuaW1wb3J0IHtcclxuICBnZXROb3RpZmljYXRpb25BcGksXHJcbiAgZ2V0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXNBcGksXHJcbiAgZ2V0Tm90aWZpY2F0aW9uVGFyZ2V0c0FwaSxcclxuICBsaXN0Tm90aWZpY2F0aW9uc0FwaSxcclxuICBtYXJrTm90aWZpY2F0aW9uUmVhZEFwaSxcclxuICBtYXJrTm90aWZpY2F0aW9uVW5yZWFkQXBpLFxyXG4gIHVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzQXBpLFxyXG59IGZyb20gJ0BmZWF0dXJlcy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLmFwaSc7XHJcblxyXG5qZXN0Lm1vY2soJ0BzZXJ2aWNlcy9hcGknLCAoKSA9PiB7XHJcbiAgY29uc3QgYWN0dWFsID0gamVzdC5yZXF1aXJlQWN0dWFsKCdAc2VydmljZXMvYXBpJyk7XHJcbiAgcmV0dXJuIHtcclxuICAgIC4uLmFjdHVhbCxcclxuICAgIGFwaUNsaWVudDogamVzdC5mbigpLFxyXG4gIH07XHJcbn0pO1xyXG5cclxuZGVzY3JpYmUoJ25vdGlmaWNhdGlvbi5hcGknLCAoKSA9PiB7XHJcbiAgaXQoJ2xpc3RzIG5vdGlmaWNhdGlvbnMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7IHBhZ2U6IDEsIGxpbWl0OiAxMCB9O1xyXG4gICAgYXBpQ2xpZW50Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW10gfSk7XHJcbiAgICBhd2FpdCBsaXN0Tm90aWZpY2F0aW9uc0FwaShwYXJhbXMpO1xyXG4gICAgZXhwZWN0KGFwaUNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICB1cmw6IGAke2VuZHBvaW50cy5OT1RJRklDQVRJT05TLkxJU1R9JHtidWlsZFF1ZXJ5U3RyaW5nKHBhcmFtcyl9YCxcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnZ2V0cyBhIG5vdGlmaWNhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgIGFwaUNsaWVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgaWQ6ICcxJyB9IH0pO1xyXG4gICAgYXdhaXQgZ2V0Tm90aWZpY2F0aW9uQXBpKCcxJyk7XHJcbiAgICBleHBlY3QoYXBpQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgIHVybDogZW5kcG9pbnRzLk5PVElGSUNBVElPTlMuR0VUKCcxJyksXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ21hcmtzIGEgbm90aWZpY2F0aW9uIHJlYWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhcGlDbGllbnQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB7IGlkOiAnMScgfSB9KTtcclxuICAgIGF3YWl0IG1hcmtOb3RpZmljYXRpb25SZWFkQXBpKCcxJyk7XHJcbiAgICBleHBlY3QoYXBpQ2xpZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XHJcbiAgICAgIHVybDogZW5kcG9pbnRzLk5PVElGSUNBVElPTlMuTUFSS19SRUFEKCcxJyksXHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdtYXJrcyBhIG5vdGlmaWNhdGlvbiB1bnJlYWQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBhcGlDbGllbnQubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB7IGlkOiAnMScgfSB9KTtcclxuICAgIGF3YWl0IG1hcmtOb3RpZmljYXRpb25VbnJlYWRBcGkoJzEnKTtcclxuICAgIGV4cGVjdChhcGlDbGllbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgdXJsOiBlbmRwb2ludHMuTk9USUZJQ0FUSU9OUy5NQVJLX1VOUkVBRCgnMScpLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnZmV0Y2hlcyBub3RpZmljYXRpb24gdGFyZ2V0cycsIGFzeW5jICgpID0+IHtcclxuICAgIGFwaUNsaWVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IFtdIH0pO1xyXG4gICAgYXdhaXQgZ2V0Tm90aWZpY2F0aW9uVGFyZ2V0c0FwaSgpO1xyXG4gICAgZXhwZWN0KGFwaUNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICB1cmw6IGVuZHBvaW50cy5OT1RJRklDQVRJT05TLkdFVF9UQVJHRVRTLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdmZXRjaGVzIG5vdGlmaWNhdGlvbiBwcmVmZXJlbmNlcycsIGFzeW5jICgpID0+IHtcclxuICAgIGFwaUNsaWVudC5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHt9IH0pO1xyXG4gICAgYXdhaXQgZ2V0Tm90aWZpY2F0aW9uUHJlZmVyZW5jZXNBcGkoKTtcclxuICAgIGV4cGVjdChhcGlDbGllbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcclxuICAgICAgdXJsOiBlbmRwb2ludHMuTk9USUZJQ0FUSU9OUy5HRVRfUFJFRkVSRU5DRVMsXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3VwZGF0ZXMgbm90aWZpY2F0aW9uIHByZWZlcmVuY2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcGF5bG9hZCA9IHsgY2hhbm5lbDogJ2VtYWlsJyB9O1xyXG4gICAgYXBpQ2xpZW50Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogcGF5bG9hZCB9KTtcclxuICAgIGF3YWl0IHVwZGF0ZU5vdGlmaWNhdGlvblByZWZlcmVuY2VzQXBpKHBheWxvYWQpO1xyXG4gICAgZXhwZWN0KGFwaUNsaWVudCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xyXG4gICAgICB1cmw6IGVuZHBvaW50cy5OT1RJRklDQVRJT05TLlVQREFURV9QUkVGRVJFTkNFUyxcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgYm9keTogcGF5bG9hZCxcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiQUFnQkFBLFdBQUEsR0FBS0MsSUFBSSwwQkFBa0IsWUFBTTtFQUMvQixJQUFNQyxNQUFNLEdBQUdDLElBQUksQ0FBQ0MsYUFBYSx3QkFBZ0IsQ0FBQztFQUNsRCxPQUFBQyxNQUFBLENBQUFDLE1BQUEsS0FDS0osTUFBTTtJQUNUSyxTQUFTLEVBQUVKLElBQUksQ0FBQ0ssRUFBRSxDQUFDO0VBQUM7QUFFeEIsQ0FBQyxDQUFDO0FBQUMsSUFBQUMsc0JBQUEsR0FBQUMsT0FBQSxpREFBQUMsT0FBQTtBQUFBLElBQUFDLGtCQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFsQkgsSUFBQUcsVUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksSUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssYUFBQSxHQUFBTCxPQUFBO0FBUWlELFNBQUFWLFlBQUE7RUFBQSxJQUFBZ0IsUUFBQSxHQUFBTixPQUFBO0lBQUFQLElBQUEsR0FBQWEsUUFBQSxDQUFBYixJQUFBO0VBQUFILFdBQUEsWUFBQUEsWUFBQTtJQUFBLE9BQUFHLElBQUE7RUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQVVqRGMsUUFBUSxDQUFDLGtCQUFrQixFQUFFLFlBQU07RUFDakNDLEVBQUUsQ0FBQyxxQkFBcUIsTUFBQU4sa0JBQUEsQ0FBQUQsT0FBQSxFQUFFLGFBQVk7SUFDcEMsSUFBTVEsTUFBTSxHQUFHO01BQUVDLElBQUksRUFBRSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUFHLENBQUM7SUFDckNkLGNBQVMsQ0FBQ2UsaUJBQWlCLENBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQUcsQ0FBQyxDQUFDO0lBQ3pDLE1BQU0sSUFBQUMsa0NBQW9CLEVBQUNMLE1BQU0sQ0FBQztJQUNsQ00sTUFBTSxDQUFDbEIsY0FBUyxDQUFD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