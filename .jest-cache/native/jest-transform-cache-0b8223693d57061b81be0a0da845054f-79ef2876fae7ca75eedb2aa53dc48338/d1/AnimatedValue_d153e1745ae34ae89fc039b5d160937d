a3d6b7222702f6111ae0a7ec8e103a58
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
exports.flushValue = flushValue;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _callSuper2 = _interopRequireDefault(require("@babel/runtime/helpers/callSuper"));
var _superPropGet2 = _interopRequireDefault(require("@babel/runtime/helpers/superPropGet"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _classPrivateFieldLooseBase2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseBase"));
var _classPrivateFieldLooseKey2 = _interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldLooseKey"));
var _NativeAnimatedHelper = _interopRequireDefault(require("../../../src/private/animated/NativeAnimatedHelper"));
var _InteractionManager = _interopRequireDefault(require("../../Interaction/InteractionManager"));
var _AnimatedInterpolation = _interopRequireDefault(require("./AnimatedInterpolation"));
var _AnimatedWithChildren2 = _interopRequireDefault(require("./AnimatedWithChildren"));
var NativeAnimatedAPI = _NativeAnimatedHelper.default.API;
function flushValue(rootNode) {
  var leaves = new Set();
  function findAnimatedStyles(node) {
    if (typeof node.update === 'function') {
      leaves.add(node);
    } else {
      node.__getChildren().forEach(findAnimatedStyles);
    }
  }
  findAnimatedStyles(rootNode);
  leaves.forEach(function (leaf) {
    return leaf.update();
  });
}
function _executeAsAnimatedBatch(id, operation) {
  NativeAnimatedAPI.setWaitingForIdentifier(id);
  operation();
  NativeAnimatedAPI.unsetWaitingForIdentifier(id);
}
var _listenerCount = (0, _classPrivateFieldLooseKey2.default)("listenerCount");
var _updateSubscription = (0, _classPrivateFieldLooseKey2.default)("updateSubscription");
var _ensureUpdateSubscriptionExists = (0, _classPrivateFieldLooseKey2.default)("ensureUpdateSubscriptionExists");
var AnimatedValue = exports.default = function (_AnimatedWithChildren) {
  function AnimatedValue(value, config) {
    var _this;
    (0, _classCallCheck2.default)(this, AnimatedValue);
    _this = (0, _callSuper2.default)(this, AnimatedValue, [config]);
    Object.defineProperty(_this, _ensureUpdateSubscriptionExists, {
      value: _ensureUpdateSubscriptionExists2
    });
    Object.defineProperty(_this, _listenerCount, {
      writable: true,
      value: void 0
    });
    Object.defineProperty(_this, _updateSubscription, {
      writable: true,
      value: void 0
    });
    if (typeof value !== 'number') {
      throw new Error('AnimatedValue: Attempting to set value to undefined');
    }
    (0, _classPrivateFieldLooseBase2.default)(_this, _listenerCount)[_listenerCount] = 0;
    (0, _classPrivateFieldLooseBase2.default)(_this, _updateSubscription)[_updateSubscription] = null;
    _this._startingValue = _this._value = value;
    _this._offset = 0;
    _this._animation = null;
    if (config && config.useNativeDriver) {
      _this.__makeNative();
    }
    return _this;
  }
  (0, _inherits2.default)(AnimatedValue, _AnimatedWithChildren);
  return (0, _createClass2.default)(AnimatedValue, [{
    key: "__detach",
    value: function __detach() {
      var _this2 = this;
      if (this.__isNative) {
        NativeAnimatedAPI.getValue(this.__getNativeTag(), function (value) {
          _this2._value = value - _this2._offset;
        });
      }
      this.stopAnimation();
      (0, _superPropGet2.default)(AnimatedValue, "__detach", this, 3)([]);
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return this._value + this._offset;
    }
  }, {
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      (0, _superPropGet2.default)(AnimatedValue, "__makeNative", this, 3)([platformConfig]);
      if ((0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] > 0) {
        (0, _classPrivateFieldLooseBase2.default)(this, _ensureUpdateSubscriptionExists)[_ensureUpdateSubscriptionExists]();
      }
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var id = (0, _superPropGet2.default)(AnimatedValue, "addListener", this, 3)([callback]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount]++;
      if (this.__isNative) {
        (0, _classPrivateFieldLooseBase2.default)(this, _ensureUpdateSubscriptionExists)[_ensureUpdateSubscriptionExists]();
      }
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      (0, _superPropGet2.default)(AnimatedValue, "removeListener", this, 3)([id]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount]--;
      if (this.__isNative && (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] === 0) {
        var _classPrivateFieldLoo;
        (_classPrivateFieldLoo = (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription]) == null || _classPrivateFieldLoo.remove();
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners() {
      (0, _superPropGet2.default)(AnimatedValue, "removeAllListeners", this, 3)([]);
      (0, _classPrivateFieldLooseBase2.default)(this, _listenerCount)[_listenerCount] = 0;
      if (this.__isNative) {
        var _classPrivateFieldLoo2;
        (_classPrivateFieldLoo2 = (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription]) == null || _classPrivateFieldLoo2.remove();
      }
    }
  }, {
    key: "setValue",
    value: function setValue(value) {
      var _this3 = this;
      if (this._animation) {
        this._animation.stop();
        this._animation = null;
      }
      this._updateValue(value, !this.__isNative);
      if (this.__isNative) {
        _executeAsAnimatedBatch(this.__getNativeTag().toString(), function () {
          return NativeAnimatedAPI.setAnimatedNodeValue(_this3.__getNativeTag(), value);
        });
      }
    }
  }, {
    key: "setOffset",
    value: function setOffset(offset) {
      this._offset = offset;
      if (this.__isNative) {
        NativeAnimatedAPI.setAnimatedNodeOffset(this.__getNativeTag(), offset);
      }
    }
  }, {
    key: "flattenOffset",
    value: function flattenOffset() {
      this._value += this._offset;
      this._offset = 0;
      if (this.__isNative) {
        NativeAnimatedAPI.flattenAnimatedNodeOffset(this.__getNativeTag());
      }
    }
  }, {
    key: "extractOffset",
    value: function extractOffset() {
      var _this4 = this;
      this._offset += this._value;
      this._value = 0;
      if (this.__isNative) {
        _executeAsAnimatedBatch(this.__getNativeTag().toString(), function () {
          return NativeAnimatedAPI.extractAnimatedNodeOffset(_this4.__getNativeTag());
        });
      }
    }
  }, {
    key: "stopAnimation",
    value: function stopAnimation(callback) {
      this.stopTracking();
      this._animation && this._animation.stop();
      this._animation = null;
      if (callback) {
        if (this.__isNative) {
          NativeAnimatedAPI.getValue(this.__getNativeTag(), callback);
        } else {
          callback(this.__getValue());
        }
      }
    }
  }, {
    key: "resetAnimation",
    value: function resetAnimation(callback) {
      this.stopAnimation(callback);
      this._value = this._startingValue;
      if (this.__isNative) {
        NativeAnimatedAPI.setAnimatedNodeValue(this.__getNativeTag(), this._startingValue);
      }
    }
  }, {
    key: "__onAnimatedValueUpdateReceived",
    value: function __onAnimatedValueUpdateReceived(value, offset) {
      this._updateValue(value, false);
      if (offset != null) {
        this._offset = offset;
      }
    }
  }, {
    key: "interpolate",
    value: function interpolate(config) {
      return new _AnimatedInterpolation.default(this, config);
    }
  }, {
    key: "animate",
    value: function animate(animation, callback) {
      var _this5 = this;
      var handle = null;
      if (animation.__isInteraction) {
        handle = _InteractionManager.default.createInteractionHandle();
      }
      var previousAnimation = this._animation;
      this._animation && this._animation.stop();
      this._animation = animation;
      animation.start(this._value, function (value) {
        _this5._updateValue(value, true);
      }, function (result) {
        _this5._animation = null;
        if (handle !== null) {
          _InteractionManager.default.clearInteractionHandle(handle);
        }
        callback && callback(result);
      }, previousAnimation, this);
    }
  }, {
    key: "stopTracking",
    value: function stopTracking() {
      this._tracking && this._tracking.__detach();
      this._tracking = null;
    }
  }, {
    key: "track",
    value: function track(tracking) {
      this.stopTracking();
      this._tracking = tracking;
      this._tracking && this._tracking.update();
    }
  }, {
    key: "_updateValue",
    value: function _updateValue(value, flush) {
      if (value === undefined) {
        throw new Error('AnimatedValue: Attempting to set value to undefined');
      }
      this._value = value;
      if (flush) {
        flushValue(this);
      }
      this.__callListeners(this.__getValue());
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      return {
        type: 'value',
        value: this._value,
        offset: this._offset,
        debugID: this.__getDebugID()
      };
    }
  }]);
}(_AnimatedWithChildren2.default);
function _ensureUpdateSubscriptionExists2() {
  var _this6 = this;
  if ((0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription] != null) {
    return;
  }
  var nativeTag = this.__getNativeTag();
  NativeAnimatedAPI.startListeningToAnimatedNodeValue(nativeTag);
  var subscription = _NativeAnimatedHelper.default.nativeEventEmitter.addListener('onAnimatedValueUpdate', function (data) {
    if (data.tag === nativeTag) {
      _this6.__onAnimatedValueUpdateReceived(data.value, data.offset);
    }
  });
  (0, _classPrivateFieldLooseBase2.default)(this, _updateSubscription)[_updateSubscription] = {
    remove: function remove() {
      if ((0, _classPrivateFieldLooseBase2.default)(_this6, _updateSubscription)[_updateSubscription] == null) {
        return;
      }
      (0, _classPrivateFieldLooseBase2.default)(_this6, _updateSubscription)[_updateSubscription] = null;
      subscription.remove();
      NativeAnimatedAPI.stopListeningToAnimatedNodeValue(nativeTag);
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9JbnRlcmFjdGlvbk1hbmFnZXIiLCJfQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuMiIsIk5hdGl2ZUFuaW1hdGVkQVBJIiwiTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJBUEkiLCJmbHVzaFZhbHVlIiwicm9vdE5vZGUiLCJsZWF2ZXMiLCJTZXQiLCJmaW5kQW5pbWF0ZWRTdHlsZXMiLCJub2RlIiwidXBkYXRlIiwiYWRkIiwiX19nZXRDaGlsZHJlbiIsImZvckVhY2giLCJsZWFmIiwiX2V4ZWN1dGVBc0FuaW1hdGVkQmF0Y2giLCJpZCIsIm9wZXJhdGlvbiIsInNldFdhaXRpbmdGb3JJZGVudGlmaWVyIiwidW5zZXRXYWl0aW5nRm9ySWRlbnRpZmllciIsIl9saXN0ZW5lckNvdW50IiwiX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkyIiwiZGVmYXVsdCIsIl91cGRhdGVTdWJzY3JpcHRpb24iLCJfZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzIiwiQW5pbWF0ZWRWYWx1ZSIsImV4cG9ydHMiLCJfQW5pbWF0ZWRXaXRoQ2hpbGRyZW4iLCJ2YWx1ZSIsImNvbmZpZyIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9jYWxsU3VwZXIyIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJfZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzMiIsIndyaXRhYmxlIiwiRXJyb3IiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2UyIiwiX3N0YXJ0aW5nVmFsdWUiLCJfdmFsdWUiLCJfb2Zmc2V0IiwiX2FuaW1hdGlvbiIsInVzZU5hdGl2ZURyaXZlciIsIl9fbWFrZU5hdGl2ZSIsIl9pbmhlcml0czIiLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwiX19kZXRhY2giLCJfdGhpczIiLCJfX2lzTmF0aXZlIiwiZ2V0VmFsdWUiLCJfX2dldE5hdGl2ZVRhZyIsInN0b3BBbmltYXRpb24iLCJfc3VwZXJQcm9wR2V0MiIsIl9fZ2V0VmFsdWUiLCJwbGF0Zm9ybUNvbmZpZyIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJyZW1vdmVMaXN0ZW5lciIsIl9jbGFzc1ByaXZhdGVGaWVsZExvbyIsInJlbW92ZSIsInJlbW92ZUFsbExpc3RlbmVycyIsIl9jbGFzc1ByaXZhdGVGaWVsZExvbzIiLCJzZXRWYWx1ZSIsIl90aGlzMyIsInN0b3AiLCJfdXBkYXRlVmFsdWUiLCJ0b1N0cmluZyIsInNldEFuaW1hdGVkTm9kZVZhbHVlIiwic2V0T2Zmc2V0Iiwib2Zmc2V0Iiwic2V0QW5pbWF0ZWROb2RlT2Zmc2V0IiwiZmxhdHRlbk9mZnNldCIsImZsYXR0ZW5BbmltYXRlZE5vZGVPZmZzZXQiLCJleHRyYWN0T2Zmc2V0IiwiX3RoaXM0IiwiZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCIsInN0b3BUcmFja2luZyIsInJlc2V0QW5pbWF0aW9uIiwiX19vbkFuaW1hdGVkVmFsdWVVcGRhdGVSZWNlaXZlZCIsImludGVycG9sYXRlIiwiQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIiwiYW5pbWF0ZSIsImFuaW1hdGlvbiIsIl90aGlzNSIsImhhbmRsZSIsIl9faXNJbnRlcmFjdGlvbiIsIkludGVyYWN0aW9uTWFuYWdlciIsImNyZWF0ZUludGVyYWN0aW9uSGFuZGxlIiwicHJldmlvdXNBbmltYXRpb24iLCJzdGFydCIsInJlc3VsdCIsImNsZWFySW50ZXJhY3Rpb25IYW5kbGUiLCJfdHJhY2tpbmciLCJ0cmFjayIsInRyYWNraW5nIiwiZmx1c2giLCJ1bmRlZmluZWQiLCJfX2NhbGxMaXN0ZW5lcnMiLCJfX2dldE5hdGl2ZUNvbmZpZyIsInR5cGUiLCJkZWJ1Z0lEIiwiX19nZXREZWJ1Z0lEIiwiQW5pbWF0ZWRXaXRoQ2hpbGRyZW4iLCJfdGhpczYiLCJuYXRpdmVUYWciLCJzdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiLCJzdWJzY3JpcHRpb24iLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJkYXRhIiwidGFnIiwic3RvcExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUiXSwic291cmNlcyI6WyJBbmltYXRlZFZhbHVlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtFdmVudFN1YnNjcmlwdGlvbn0gZnJvbSAnLi4vLi4vdmVuZG9yL2VtaXR0ZXIvRXZlbnRFbWl0dGVyJztcbmltcG9ydCB0eXBlIHtQbGF0Zm9ybUNvbmZpZ30gZnJvbSAnLi4vQW5pbWF0ZWRQbGF0Zm9ybUNvbmZpZyc7XG5pbXBvcnQgdHlwZSBBbmltYXRpb24gZnJvbSAnLi4vYW5pbWF0aW9ucy9BbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge0VuZENhbGxiYWNrfSBmcm9tICcuLi9hbmltYXRpb25zL0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7SW50ZXJwb2xhdGlvbkNvbmZpZ1R5cGV9IGZyb20gJy4vQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJztcbmltcG9ydCB0eXBlIEFuaW1hdGVkTm9kZSBmcm9tICcuL0FuaW1hdGVkTm9kZSc7XG5pbXBvcnQgdHlwZSB7QW5pbWF0ZWROb2RlQ29uZmlnfSBmcm9tICcuL0FuaW1hdGVkTm9kZSc7XG5pbXBvcnQgdHlwZSBBbmltYXRlZFRyYWNraW5nIGZyb20gJy4vQW5pbWF0ZWRUcmFja2luZyc7XG5cbmltcG9ydCBOYXRpdmVBbmltYXRlZEhlbHBlciBmcm9tICcuLi8uLi8uLi9zcmMvcHJpdmF0ZS9hbmltYXRlZC9OYXRpdmVBbmltYXRlZEhlbHBlcic7XG5pbXBvcnQgSW50ZXJhY3Rpb25NYW5hZ2VyIGZyb20gJy4uLy4uL0ludGVyYWN0aW9uL0ludGVyYWN0aW9uTWFuYWdlcic7XG5pbXBvcnQgQW5pbWF0ZWRJbnRlcnBvbGF0aW9uIGZyb20gJy4vQW5pbWF0ZWRJbnRlcnBvbGF0aW9uJztcbmltcG9ydCBBbmltYXRlZFdpdGhDaGlsZHJlbiBmcm9tICcuL0FuaW1hdGVkV2l0aENoaWxkcmVuJztcblxuZXhwb3J0IHR5cGUgQW5pbWF0ZWRWYWx1ZUNvbmZpZyA9ICRSZWFkT25seTx7XG4gIC4uLkFuaW1hdGVkTm9kZUNvbmZpZyxcbiAgdXNlTmF0aXZlRHJpdmVyOiBib29sZWFuLFxufT47XG5cbmNvbnN0IE5hdGl2ZUFuaW1hdGVkQVBJID0gTmF0aXZlQW5pbWF0ZWRIZWxwZXIuQVBJO1xuXG4vKipcbiAqIEFuaW1hdGVkIHdvcmtzIGJ5IGJ1aWxkaW5nIGEgZGlyZWN0ZWQgYWN5Y2xpYyBncmFwaCBvZiBkZXBlbmRlbmNpZXNcbiAqIHRyYW5zcGFyZW50bHkgd2hlbiB5b3UgcmVuZGVyIHlvdXIgQW5pbWF0ZWQgY29tcG9uZW50cy5cbiAqXG4gKiAgICAgICAgICAgICAgIG5ldyBBbmltYXRlZC5WYWx1ZSgwKVxuICogICAgIC5pbnRlcnBvbGF0ZSgpICAgICAgICAuaW50ZXJwb2xhdGUoKSAgICBuZXcgQW5pbWF0ZWQuVmFsdWUoMSlcbiAqICAgICAgICAgb3BhY2l0eSAgICAgICAgICAgICAgIHRyYW5zbGF0ZVkgICAgICBzY2FsZVxuICogICAgICAgICAgc3R5bGUgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtXG4gKiAgICAgICAgIFZpZXcjMjM0ICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmlldyMxMjNcbiAqXG4gKiBBKSBUb3AgRG93biBwaGFzZVxuICogV2hlbiBhbiBBbmltYXRlZC5WYWx1ZSBpcyB1cGRhdGVkLCB3ZSByZWN1cnNpdmVseSBnbyBkb3duIHRocm91Z2ggdGhpc1xuICogZ3JhcGggaW4gb3JkZXIgdG8gZmluZCBsZWFmIG5vZGVzOiB0aGUgdmlld3MgdGhhdCB3ZSBmbGFnIGFzIG5lZWRpbmdcbiAqIGFuIHVwZGF0ZS5cbiAqXG4gKiBCKSBCb3R0b20gVXAgcGhhc2VcbiAqIFdoZW4gYSB2aWV3IGlzIGZsYWdnZWQgYXMgbmVlZGluZyBhbiB1cGRhdGUsIHdlIHJlY3Vyc2l2ZWx5IGdvIGJhY2sgdXBcbiAqIGluIG9yZGVyIHRvIGJ1aWxkIHRoZSBuZXcgdmFsdWUgdGhhdCBpdCBuZWVkcy4gVGhlIHJlYXNvbiB3aHkgd2UgbmVlZFxuICogdGhpcyB0d28tcGhhc2VzIHByb2Nlc3MgaXMgdG8gZGVhbCB3aXRoIGNvbXBvc2l0ZSBwcm9wcyBzdWNoIGFzXG4gKiB0cmFuc2Zvcm0gd2hpY2ggY2FuIHJlY2VpdmUgdmFsdWVzIGZyb20gbXVsdGlwbGUgcGFyZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoVmFsdWUocm9vdE5vZGU6IEFuaW1hdGVkTm9kZSk6IHZvaWQge1xuICBjb25zdCBsZWF2ZXMgPSBuZXcgU2V0PHt1cGRhdGU6ICgpID0+IHZvaWQsIC4uLn0+KCk7XG4gIGZ1bmN0aW9uIGZpbmRBbmltYXRlZFN0eWxlcyhub2RlOiBBbmltYXRlZE5vZGUpIHtcbiAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICBpZiAodHlwZW9mIG5vZGUudXBkYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsZWF2ZXMuYWRkKChub2RlOiBhbnkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5fX2dldENoaWxkcmVuKCkuZm9yRWFjaChmaW5kQW5pbWF0ZWRTdHlsZXMpO1xuICAgIH1cbiAgfVxuICBmaW5kQW5pbWF0ZWRTdHlsZXMocm9vdE5vZGUpO1xuICBsZWF2ZXMuZm9yRWFjaChsZWFmID0+IGxlYWYudXBkYXRlKCkpO1xufVxuXG4vKipcbiAqIFNvbWUgb3BlcmF0aW9ucyBhcmUgZXhlY3V0ZWQgb25seSBvbiBiYXRjaCBlbmQsIHdoaWNoIGlzIF9tb3N0bHlfIHNjaGVkdWxlZCB3aGVuXG4gKiBBbmltYXRlZCBjb21wb25lbnQgcHJvcHMgY2hhbmdlLiBGb3Igc29tZSBvZiB0aGUgY2hhbmdlcyB3aGljaCByZXF1aXJlIGltbWVkaWF0ZSBleGVjdXRpb25cbiAqIChlLmcuIHNldFZhbHVlKSwgd2UgY3JlYXRlIGEgc2VwYXJhdGUgYmF0Y2ggaW4gY2FzZSBub25lIGlzIHNjaGVkdWxlZC5cbiAqL1xuZnVuY3Rpb24gX2V4ZWN1dGVBc0FuaW1hdGVkQmF0Y2goaWQ6IHN0cmluZywgb3BlcmF0aW9uOiAoKSA9PiB2b2lkKSB7XG4gIE5hdGl2ZUFuaW1hdGVkQVBJLnNldFdhaXRpbmdGb3JJZGVudGlmaWVyKGlkKTtcbiAgb3BlcmF0aW9uKCk7XG4gIE5hdGl2ZUFuaW1hdGVkQVBJLnVuc2V0V2FpdGluZ0ZvcklkZW50aWZpZXIoaWQpO1xufVxuXG4vKipcbiAqIFN0YW5kYXJkIHZhbHVlIGZvciBkcml2aW5nIGFuaW1hdGlvbnMuICBPbmUgYEFuaW1hdGVkLlZhbHVlYCBjYW4gZHJpdmVcbiAqIG11bHRpcGxlIHByb3BlcnRpZXMgaW4gYSBzeW5jaHJvbml6ZWQgZmFzaGlvbiwgYnV0IGNhbiBvbmx5IGJlIGRyaXZlbiBieSBvbmVcbiAqIG1lY2hhbmlzbSBhdCBhIHRpbWUuICBVc2luZyBhIG5ldyBtZWNoYW5pc20gKGUuZy4gc3RhcnRpbmcgYSBuZXcgYW5pbWF0aW9uLFxuICogb3IgY2FsbGluZyBgc2V0VmFsdWVgKSB3aWxsIHN0b3AgYW55IHByZXZpb3VzIG9uZXMuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmltYXRlZFZhbHVlIGV4dGVuZHMgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ge1xuICAjbGlzdGVuZXJDb3VudDogbnVtYmVyO1xuICAjdXBkYXRlU3Vic2NyaXB0aW9uOiA/RXZlbnRTdWJzY3JpcHRpb247XG5cbiAgX3ZhbHVlOiBudW1iZXI7XG4gIF9zdGFydGluZ1ZhbHVlOiBudW1iZXI7XG4gIF9vZmZzZXQ6IG51bWJlcjtcbiAgX2FuaW1hdGlvbjogP0FuaW1hdGlvbjtcbiAgX3RyYWNraW5nOiA/QW5pbWF0ZWRUcmFja2luZztcblxuICBjb25zdHJ1Y3Rvcih2YWx1ZTogbnVtYmVyLCBjb25maWc/OiA/QW5pbWF0ZWRWYWx1ZUNvbmZpZykge1xuICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQW5pbWF0ZWRWYWx1ZTogQXR0ZW1wdGluZyB0byBzZXQgdmFsdWUgdG8gdW5kZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudCA9IDA7XG4gICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0gbnVsbDtcblxuICAgIHRoaXMuX3N0YXJ0aW5nVmFsdWUgPSB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuX29mZnNldCA9IDA7XG4gICAgdGhpcy5fYW5pbWF0aW9uID0gbnVsbDtcbiAgICBpZiAoY29uZmlnICYmIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIpIHtcbiAgICAgIHRoaXMuX19tYWtlTmF0aXZlKCk7XG4gICAgfVxuICB9XG5cbiAgX19kZXRhY2goKSB7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZ2V0VmFsdWUodGhpcy5fX2dldE5hdGl2ZVRhZygpLCB2YWx1ZSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWUgLSB0aGlzLl9vZmZzZXQ7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5zdG9wQW5pbWF0aW9uKCk7XG4gICAgc3VwZXIuX19kZXRhY2goKTtcbiAgfVxuXG4gIF9fZ2V0VmFsdWUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWUgKyB0aGlzLl9vZmZzZXQ7XG4gIH1cblxuICBfX21ha2VOYXRpdmUocGxhdGZvcm1Db25maWc6ID9QbGF0Zm9ybUNvbmZpZyk6IHZvaWQge1xuICAgIHN1cGVyLl9fbWFrZU5hdGl2ZShwbGF0Zm9ybUNvbmZpZyk7XG4gICAgaWYgKHRoaXMuI2xpc3RlbmVyQ291bnQgPiAwKSB7XG4gICAgICB0aGlzLiNlbnN1cmVVcGRhdGVTdWJzY3JpcHRpb25FeGlzdHMoKTtcbiAgICB9XG4gIH1cblxuICBhZGRMaXN0ZW5lcihjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IG1peGVkKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZCA9IHN1cGVyLmFkZExpc3RlbmVyKGNhbGxiYWNrKTtcbiAgICB0aGlzLiNsaXN0ZW5lckNvdW50Kys7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy4jZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzKCk7XG4gICAgfVxuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIHJlbW92ZUxpc3RlbmVyKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzdXBlci5yZW1vdmVMaXN0ZW5lcihpZCk7XG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudC0tO1xuICAgIGlmICh0aGlzLl9faXNOYXRpdmUgJiYgdGhpcy4jbGlzdGVuZXJDb3VudCA9PT0gMCkge1xuICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uPy5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgc3VwZXIucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgdGhpcy4jbGlzdGVuZXJDb3VudCA9IDA7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uPy5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICAjZW5zdXJlVXBkYXRlU3Vic2NyaXB0aW9uRXhpc3RzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLiN1cGRhdGVTdWJzY3JpcHRpb24gIT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBuYXRpdmVUYWcgPSB0aGlzLl9fZ2V0TmF0aXZlVGFnKCk7XG4gICAgTmF0aXZlQW5pbWF0ZWRBUEkuc3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlKG5hdGl2ZVRhZyk7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uOiBFdmVudFN1YnNjcmlwdGlvbiA9XG4gICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5uYXRpdmVFdmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoXG4gICAgICAgICdvbkFuaW1hdGVkVmFsdWVVcGRhdGUnLFxuICAgICAgICBkYXRhID0+IHtcbiAgICAgICAgICBpZiAoZGF0YS50YWcgPT09IG5hdGl2ZVRhZykge1xuICAgICAgICAgICAgdGhpcy5fX29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVJlY2VpdmVkKGRhdGEudmFsdWUsIGRhdGEub2Zmc2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICApO1xuXG4gICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB7XG4gICAgICAgIC8vIE9ubHkgdGhpcyBmdW5jdGlvbiBhc3NpZ25zIHRvIGB0aGlzLiN1cGRhdGVTdWJzY3JpcHRpb25gLlxuICAgICAgICBpZiAodGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jdXBkYXRlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnJlbW92ZSgpO1xuICAgICAgICBOYXRpdmVBbmltYXRlZEFQSS5zdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZShuYXRpdmVUYWcpO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIERpcmVjdGx5IHNldCB0aGUgdmFsdWUuICBUaGlzIHdpbGwgc3RvcCBhbnkgYW5pbWF0aW9ucyBydW5uaW5nIG9uIHRoZSB2YWx1ZVxuICAgKiBhbmQgdXBkYXRlIGFsbCB0aGUgYm91bmQgcHJvcGVydGllcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZSNzZXR2YWx1ZVxuICAgKi9cbiAgc2V0VmFsdWUodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbmltYXRpb24pIHtcbiAgICAgIHRoaXMuX2FuaW1hdGlvbi5zdG9wKCk7XG4gICAgICB0aGlzLl9hbmltYXRpb24gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVWYWx1ZShcbiAgICAgIHZhbHVlLFxuICAgICAgIXRoaXMuX19pc05hdGl2ZSAvKiBkb24ndCBwZXJmb3JtIGEgZmx1c2ggZm9yIG5hdGl2ZWx5IGRyaXZlbiB2YWx1ZXMgKi8sXG4gICAgKTtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBfZXhlY3V0ZUFzQW5pbWF0ZWRCYXRjaCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkudG9TdHJpbmcoKSwgKCkgPT5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuc2V0QW5pbWF0ZWROb2RlVmFsdWUodGhpcy5fX2dldE5hdGl2ZVRhZygpLCB2YWx1ZSksXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIG9mZnNldCB0aGF0IGlzIGFwcGxpZWQgb24gdG9wIG9mIHdoYXRldmVyIHZhbHVlIGlzIHNldCwgd2hldGhlciB2aWFcbiAgICogYHNldFZhbHVlYCwgYW4gYW5pbWF0aW9uLCBvciBgQW5pbWF0ZWQuZXZlbnRgLiAgVXNlZnVsIGZvciBjb21wZW5zYXRpbmdcbiAgICogdGhpbmdzIGxpa2UgdGhlIHN0YXJ0IG9mIGEgcGFuIGdlc3R1cmUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkdmFsdWUjc2V0b2Zmc2V0XG4gICAqL1xuICBzZXRPZmZzZXQob2Zmc2V0OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9vZmZzZXQgPSBvZmZzZXQ7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuc2V0QW5pbWF0ZWROb2RlT2Zmc2V0KHRoaXMuX19nZXROYXRpdmVUYWcoKSwgb2Zmc2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBvZmZzZXQgdmFsdWUgaW50byB0aGUgYmFzZSB2YWx1ZSBhbmQgcmVzZXRzIHRoZSBvZmZzZXQgdG8gemVyby5cbiAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2ZsYXR0ZW5vZmZzZXRcbiAgICovXG4gIGZsYXR0ZW5PZmZzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fdmFsdWUgKz0gdGhpcy5fb2Zmc2V0O1xuICAgIHRoaXMuX29mZnNldCA9IDA7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZmxhdHRlbkFuaW1hdGVkTm9kZU9mZnNldCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBvZmZzZXQgdmFsdWUgdG8gdGhlIGJhc2UgdmFsdWUsIGFuZCByZXNldHMgdGhlIGJhc2UgdmFsdWUgdG8gemVyby5cbiAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2V4dHJhY3RvZmZzZXRcbiAgICovXG4gIGV4dHJhY3RPZmZzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fb2Zmc2V0ICs9IHRoaXMuX3ZhbHVlO1xuICAgIHRoaXMuX3ZhbHVlID0gMDtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBfZXhlY3V0ZUFzQW5pbWF0ZWRCYXRjaCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkudG9TdHJpbmcoKSwgKCkgPT5cbiAgICAgICAgTmF0aXZlQW5pbWF0ZWRBUEkuZXh0cmFjdEFuaW1hdGVkTm9kZU9mZnNldCh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkpLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgYW55IHJ1bm5pbmcgYW5pbWF0aW9uIG9yIHRyYWNraW5nLiBgY2FsbGJhY2tgIGlzIGludm9rZWQgd2l0aCB0aGVcbiAgICogZmluYWwgdmFsdWUgYWZ0ZXIgc3RvcHBpbmcgdGhlIGFuaW1hdGlvbiwgd2hpY2ggaXMgdXNlZnVsIGZvciB1cGRhdGluZ1xuICAgKiBzdGF0ZSB0byBtYXRjaCB0aGUgYW5pbWF0aW9uIHBvc2l0aW9uIHdpdGggbGF5b3V0LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI3N0b3BhbmltYXRpb25cbiAgICovXG4gIHN0b3BBbmltYXRpb24oY2FsbGJhY2s/OiA/KHZhbHVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BUcmFja2luZygpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiAmJiB0aGlzLl9hbmltYXRpb24uc3RvcCgpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiA9IG51bGw7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICAgIE5hdGl2ZUFuaW1hdGVkQVBJLmdldFZhbHVlKHRoaXMuX19nZXROYXRpdmVUYWcoKSwgY2FsbGJhY2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2sodGhpcy5fX2dldFZhbHVlKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wcyBhbnkgYW5pbWF0aW9uIGFuZCByZXNldHMgdGhlIHZhbHVlIHRvIGl0cyBvcmlnaW5hbC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWR2YWx1ZSNyZXNldGFuaW1hdGlvblxuICAgKi9cbiAgcmVzZXRBbmltYXRpb24oY2FsbGJhY2s/OiA/KHZhbHVlOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3BBbmltYXRpb24oY2FsbGJhY2spO1xuICAgIHRoaXMuX3ZhbHVlID0gdGhpcy5fc3RhcnRpbmdWYWx1ZTtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlKSB7XG4gICAgICBOYXRpdmVBbmltYXRlZEFQSS5zZXRBbmltYXRlZE5vZGVWYWx1ZShcbiAgICAgICAgdGhpcy5fX2dldE5hdGl2ZVRhZygpLFxuICAgICAgICB0aGlzLl9zdGFydGluZ1ZhbHVlLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfX29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVJlY2VpdmVkKHZhbHVlOiBudW1iZXIsIG9mZnNldD86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZVZhbHVlKHZhbHVlLCBmYWxzZSAvKmZsdXNoKi8pO1xuICAgIGlmIChvZmZzZXQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZXMgdGhlIHZhbHVlIGJlZm9yZSB1cGRhdGluZyB0aGUgcHJvcGVydHksIGUuZy4gbWFwcGluZyAwLTEgdG9cbiAgICogMC0xMC5cbiAgICovXG4gIGludGVycG9sYXRlPE91dHB1dFQ6IG51bWJlciB8IHN0cmluZz4oXG4gICAgY29uZmlnOiBJbnRlcnBvbGF0aW9uQ29uZmlnVHlwZTxPdXRwdXRUPixcbiAgKTogQW5pbWF0ZWRJbnRlcnBvbGF0aW9uPE91dHB1dFQ+IHtcbiAgICByZXR1cm4gbmV3IEFuaW1hdGVkSW50ZXJwb2xhdGlvbih0aGlzLCBjb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGljYWxseSBvbmx5IHVzZWQgaW50ZXJuYWxseSwgYnV0IGNvdWxkIGJlIHVzZWQgYnkgYSBjdXN0b20gQW5pbWF0aW9uXG4gICAqIGNsYXNzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2FuaW1hdGVcbiAgICovXG4gIGFuaW1hdGUoYW5pbWF0aW9uOiBBbmltYXRpb24sIGNhbGxiYWNrOiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICBsZXQgaGFuZGxlID0gbnVsbDtcbiAgICBpZiAoYW5pbWF0aW9uLl9faXNJbnRlcmFjdGlvbikge1xuICAgICAgaGFuZGxlID0gSW50ZXJhY3Rpb25NYW5hZ2VyLmNyZWF0ZUludGVyYWN0aW9uSGFuZGxlKCk7XG4gICAgfVxuICAgIGNvbnN0IHByZXZpb3VzQW5pbWF0aW9uID0gdGhpcy5fYW5pbWF0aW9uO1xuICAgIHRoaXMuX2FuaW1hdGlvbiAmJiB0aGlzLl9hbmltYXRpb24uc3RvcCgpO1xuICAgIHRoaXMuX2FuaW1hdGlvbiA9IGFuaW1hdGlvbjtcbiAgICBhbmltYXRpb24uc3RhcnQoXG4gICAgICB0aGlzLl92YWx1ZSxcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgLy8gTmF0aXZlbHkgZHJpdmVuIGFuaW1hdGlvbnMgd2lsbCBuZXZlciBjYWxsIGludG8gdGhhdCBjYWxsYmFjaywgdGhlcmVmb3JlIHdlIGNhbiBhbHdheXNcbiAgICAgICAgLy8gcGFzcyBmbHVzaCA9IHRydWUgdG8gYWxsb3cgdGhlIHVwZGF0ZWQgdmFsdWUgdG8gcHJvcGFnYXRlIHRvIG5hdGl2ZSB3aXRoIHNldE5hdGl2ZVByb3BzXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZhbHVlKHZhbHVlLCB0cnVlIC8qIGZsdXNoICovKTtcbiAgICAgIH0sXG4gICAgICByZXN1bHQgPT4ge1xuICAgICAgICB0aGlzLl9hbmltYXRpb24gPSBudWxsO1xuICAgICAgICBpZiAoaGFuZGxlICE9PSBudWxsKSB7XG4gICAgICAgICAgSW50ZXJhY3Rpb25NYW5hZ2VyLmNsZWFySW50ZXJhY3Rpb25IYW5kbGUoaGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayhyZXN1bHQpO1xuICAgICAgfSxcbiAgICAgIHByZXZpb3VzQW5pbWF0aW9uLFxuICAgICAgdGhpcyxcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGljYWxseSBvbmx5IHVzZWQgaW50ZXJuYWxseS5cbiAgICovXG4gIHN0b3BUcmFja2luZygpOiB2b2lkIHtcbiAgICB0aGlzLl90cmFja2luZyAmJiB0aGlzLl90cmFja2luZy5fX2RldGFjaCgpO1xuICAgIHRoaXMuX3RyYWNraW5nID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUeXBpY2FsbHkgb25seSB1c2VkIGludGVybmFsbHkuXG4gICAqL1xuICB0cmFjayh0cmFja2luZzogQW5pbWF0ZWRUcmFja2luZyk6IHZvaWQge1xuICAgIHRoaXMuc3RvcFRyYWNraW5nKCk7XG4gICAgdGhpcy5fdHJhY2tpbmcgPSB0cmFja2luZztcbiAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgdHJhY2tpbmcgYW5pbWF0aW9uIHN0YXJ0cyBleGVjdXRpbmdcbiAgICB0aGlzLl90cmFja2luZyAmJiB0aGlzLl90cmFja2luZy51cGRhdGUoKTtcbiAgfVxuXG4gIF91cGRhdGVWYWx1ZSh2YWx1ZTogbnVtYmVyLCBmbHVzaDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FuaW1hdGVkVmFsdWU6IEF0dGVtcHRpbmcgdG8gc2V0IHZhbHVlIHRvIHVuZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgaWYgKGZsdXNoKSB7XG4gICAgICBmbHVzaFZhbHVlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLl9fY2FsbExpc3RlbmVycyh0aGlzLl9fZ2V0VmFsdWUoKSk7XG4gIH1cblxuICBfX2dldE5hdGl2ZUNvbmZpZygpOiBPYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgdmFsdWU6IHRoaXMuX3ZhbHVlLFxuICAgICAgb2Zmc2V0OiB0aGlzLl9vZmZzZXQsXG4gICAgICBkZWJ1Z0lEOiB0aGlzLl9fZ2V0RGVidWdJRCgpLFxuICAgIH07XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQW1CQSxJQUFBQSxxQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsbUJBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLHNCQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxzQkFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBT0EsSUFBTUksaUJBQWlCLEdBQUdDLDZCQUFvQixDQUFDQyxHQUFHO0FBd0IzQyxTQUFTQyxVQUFVQSxDQUFDQyxRQUFzQixFQUFRO0VBQ3ZELElBQU1DLE1BQU0sR0FBRyxJQUFJQyxHQUFHLENBQTRCLENBQUM7RUFDbkQsU0FBU0Msa0JBQWtCQSxDQUFDQyxJQUFrQixFQUFFO0lBRTlDLElBQUksT0FBT0EsSUFBSSxDQUFDQyxNQUFNLEtBQUssVUFBVSxFQUFFO01BQ3JDSixNQUFNLENBQUNLLEdBQUcsQ0FBRUYsSUFBVSxDQUFDO0lBQ3pCLENBQUMsTUFBTTtNQUNMQSxJQUFJLENBQUNHLGFBQWEsQ0FBQyxDQUFDLENBQUNDLE9BQU8sQ0FBQ0wsa0JBQWtCLENBQUM7SUFDbEQ7RUFDRjtFQUNBQSxrQkFBa0IsQ0FBQ0gsUUFBUSxDQUFDO0VBQzVCQyxNQUFNLENBQUNPLE9BQU8sQ0FBQyxVQUFBQyxJQUFJO0lBQUEsT0FBSUEsSUFBSSxDQUFDSixNQUFNLENBQUMsQ0FBQztFQUFBLEVBQUM7QUFDdkM7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