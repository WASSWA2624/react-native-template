{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactRedux","_toolkit","_useNetworkBanner","_rootReducer","_network","_networkQuality","_jsxRuntime","createMockStore","preloadedState","arguments","length","undefined","configureStore","reducer","rootReducer","TestComponent","_ref","onResult","duration","result","useNetworkBanner","React","useEffect","describe","beforeEach","jest","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","it","_asyncToGenerator2","default","store","network","isOnline","isSyncing","quality","NETWORK_QUALITY","UNKNOWN","render","jsx","Provider","children","value","waitFor","expect","isOffline","toBe","showOnlineBanner","act","dispatch","networkActions","setOnline","advanceTimersByTime"],"sources":["useNetworkBanner.test.js"],"sourcesContent":["/**\r\n * useNetworkBanner Hook Tests\r\n * File: useNetworkBanner.test.js\r\n */\r\nimport React from 'react';\r\nimport { act, render, waitFor } from '@testing-library/react-native';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport useNetworkBanner from '@hooks/useNetworkBanner';\r\nimport rootReducer from '@store/rootReducer';\r\nimport { actions as networkActions } from '@store/slices/network.slice';\r\nimport { NETWORK_QUALITY } from '@utils/networkQuality';\r\n\r\nconst createMockStore = (preloadedState = {}) =>\r\n  configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState,\r\n  });\r\n\r\nconst TestComponent = ({ onResult, duration }) => {\r\n  const result = useNetworkBanner({ duration });\r\n\r\n  React.useEffect(() => {\r\n    onResult(result);\r\n  });\r\n\r\n  return null;\r\n};\r\n\r\ndescribe('useNetworkBanner', () => {\r\n  beforeEach(() => {\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.runOnlyPendingTimers();\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it('shows online banner after reconnect and hides it', async () => {\r\n    const store = createMockStore({\r\n      network: { isOnline: false, isSyncing: false, quality: NETWORK_QUALITY.UNKNOWN },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent duration={2000} onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.isOffline).toBe(true);\r\n      expect(result.showOnlineBanner).toBe(false);\r\n    });\r\n\r\n    act(() => {\r\n      store.dispatch(networkActions.setOnline(true));\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(result.isOnline).toBe(true);\r\n      expect(result.showOnlineBanner).toBe(true);\r\n    });\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(2000);\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(result.showOnlineBanner).toBe(false);\r\n    });\r\n  });\r\n\r\n  it('clears online banner when offline', async () => {\r\n    const store = createMockStore({\r\n      network: { isOnline: true, isSyncing: false, quality: NETWORK_QUALITY.UNKNOWN },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent duration={1000} onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.isOnline).toBe(true);\r\n      expect(result.showOnlineBanner).toBe(false);\r\n    });\r\n\r\n    act(() => {\r\n      store.dispatch(networkActions.setOnline(false));\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(result.isOffline).toBe(true);\r\n      expect(result.showOnlineBanner).toBe(false);\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}