8def5d85eae07bd21200dacd82db79f4
_getJestObj().mock("../../offline", function () {
  return {
    networkListener: {
      startListening: jest.fn(),
      subscribe: jest.fn(),
      checkConnectivity: jest.fn()
    },
    syncManager: {
      startSync: jest.fn()
    },
    hydration: {
      hydrate: jest.fn()
    }
  };
});
_getJestObj().mock("../../store", function () {
  return {
    dispatch: jest.fn()
  };
});
_getJestObj().mock("../../store/slices/network.slice", function () {
  return {
    actions: {
      setOnline: jest.fn(function (isOnline) {
        return {
          type: 'network/setOnline',
          payload: isOnline
        };
      }),
      setQuality: jest.fn(function (quality) {
        return {
          type: 'network/setQuality',
          payload: quality
        };
      })
    }
  };
});
_getJestObj().mock("../../logging", function () {
  return {
    logger: {
      info: jest.fn(),
      error: jest.fn(),
      debug: jest.fn(),
      warn: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _init = require("../../bootstrap/init.offline");
var _offline = require("../../offline");
var _store = _interopRequireDefault(require("../../store"));
var _network = require("../../store/slices/network.slice");
var _logging = require("../../logging");
var _networkQuality = require("../../utils/networkQuality");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('Offline Initialization', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    _offline.networkListener.checkConnectivity.mockResolvedValue({
      isOnline: true,
      quality: _networkQuality.NETWORK_QUALITY.GOOD
    });
    _offline.hydration.hydrate.mockResolvedValue({
      queue: []
    });
  });
  it('initializes network listener and sync manager', (0, _asyncToGenerator2.default)(function* () {
    yield (0, _init.initOffline)();
    expect(_offline.networkListener.startListening).toHaveBeenCalledTimes(1);
    expect(_offline.syncManager.startSync).toHaveBeenCalledTimes(1);
  }));
  it('subscribes to network changes and updates Redux store', (0, _asyncToGenerator2.default)(function* () {
    var networkChangeCallback;
    _offline.networkListener.subscribe.mockImplementation(function (callback) {
      networkChangeCallback = callback;
      return jest.fn();
    });
    yield (0, _init.initOffline)();
    expect(_offline.networkListener.subscribe).toHaveBeenCalledTimes(1);
    expect(_offline.networkListener.subscribe).toHaveBeenCalledWith(expect.any(Function));
    networkChangeCallback({
      isOnline: false,
      quality: _networkQuality.NETWORK_QUALITY.UNKNOWN
    });
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setOnline(false));
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setQuality(_networkQuality.NETWORK_QUALITY.UNKNOWN));
    networkChangeCallback({
      isOnline: true,
      quality: _networkQuality.NETWORK_QUALITY.GOOD
    });
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setOnline(true));
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setQuality(_networkQuality.NETWORK_QUALITY.GOOD));
  }));
  it('initializes current network status in Redux store', (0, _asyncToGenerator2.default)(function* () {
    _offline.networkListener.checkConnectivity.mockResolvedValue({
      isOnline: true,
      quality: _networkQuality.NETWORK_QUALITY.GOOD
    });
    yield (0, _init.initOffline)();
    expect(_offline.networkListener.checkConnectivity).toHaveBeenCalledTimes(1);
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setOnline(true));
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setQuality(_networkQuality.NETWORK_QUALITY.GOOD));
  }));
  it('initializes network status as offline when connectivity check returns false', (0, _asyncToGenerator2.default)(function* () {
    _offline.networkListener.checkConnectivity.mockResolvedValue({
      isOnline: false,
      quality: _networkQuality.NETWORK_QUALITY.UNKNOWN
    });
    yield (0, _init.initOffline)();
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setOnline(false));
    expect(_store.default.dispatch).toHaveBeenCalledWith(_network.actions.setQuality(_networkQuality.NETWORK_QUALITY.UNKNOWN));
  }));
  it('triggers state hydration', (0, _asyncToGenerator2.default)(function* () {
    var mockQueue = [{
      id: '1',
      url: '/api/test'
    }];
    _offline.hydration.hydrate.mockResolvedValue({
      queue: mockQueue
    });
    yield (0, _init.initOffline)();
    expect(_offline.hydration.hydrate).toHaveBeenCalledTimes(1);
  }));
  it('handles errors gracefully without throwing', (0, _asyncToGenerator2.default)(function* () {
    var error = new Error('Offline initialization error');
    _offline.networkListener.startListening.mockImplementation(function () {
      throw error;
    });
    yield expect((0, _init.initOffline)()).resolves.not.toThrow();
    expect(_logging.logger.error).toHaveBeenCalledWith('Offline initialization failed', {
      error: 'Offline initialization error'
    });
  }));
  it('handles network connectivity check errors gracefully', (0, _asyncToGenerator2.default)(function* () {
    _offline.networkListener.startListening.mockReturnValue(undefined);
    _offline.networkListener.subscribe.mockReturnValue(jest.fn());
    _offline.networkListener.checkConnectivity.mockRejectedValue(new Error('Connectivity check failed'));
    yield expect((0, _init.initOffline)()).resolves.not.toThrow();
    expect(_logging.logger.error).toHaveBeenCalledWith('Offline initialization failed', {
      error: 'Connectivity check failed'
    });
  }));
  it('handles hydration errors gracefully', (0, _asyncToGenerator2.default)(function* () {
    _offline.networkListener.startListening.mockReturnValue(undefined);
    _offline.networkListener.subscribe.mockReturnValue(jest.fn());
    _offline.networkListener.checkConnectivity.mockResolvedValue(true);
    _offline.hydration.hydrate.mockRejectedValue(new Error('Hydration failed'));
    yield expect((0, _init.initOffline)()).resolves.not.toThrow();
    expect(_logging.logger.error).toHaveBeenCalledWith('Offline initialization failed', {
      error: 'Hydration failed'
    });
  }));
  it('logs success when initialization completes', (0, _asyncToGenerator2.default)(function* () {
    yield (0, _init.initOffline)();
    expect(_logging.logger.info).toHaveBeenCalledWith('Offline system initialized successfully');
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJuZXR3b3JrTGlzdGVuZXIiLCJzdGFydExpc3RlbmluZyIsImplc3QiLCJmbiIsInN1YnNjcmliZSIsImNoZWNrQ29ubmVjdGl2aXR5Iiwic3luY01hbmFnZXIiLCJzdGFydFN5bmMiLCJoeWRyYXRpb24iLCJoeWRyYXRlIiwiZGlzcGF0Y2giLCJhY3Rpb25zIiwic2V0T25saW5lIiwiaXNPbmxpbmUiLCJ0eXBlIiwicGF5bG9hZCIsInNldFF1YWxpdHkiLCJxdWFsaXR5IiwibG9nZ2VyIiwiaW5mbyIsImVycm9yIiwiZGVidWciLCJ3YXJuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2luaXQiLCJfb2ZmbGluZSIsIl9zdG9yZSIsIl9uZXR3b3JrIiwiX2xvZ2dpbmciLCJfbmV0d29ya1F1YWxpdHkiLCJfcmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIk5FVFdPUktfUVVBTElUWSIsIkdPT0QiLCJxdWV1ZSIsIml0IiwiaW5pdE9mZmxpbmUiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJuZXR3b3JrQ2hhbmdlQ2FsbGJhY2siLCJtb2NrSW1wbGVtZW50YXRpb24iLCJjYWxsYmFjayIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYW55IiwiRnVuY3Rpb24iLCJVTktOT1dOIiwic3RvcmUiLCJtb2NrUXVldWUiLCJpZCIsInVybCIsIkVycm9yIiwicmVzb2x2ZXMiLCJub3QiLCJ0b1Rocm93IiwibW9ja1JldHVyblZhbHVlIiwidW5kZWZpbmVkIiwibW9ja1JlamVjdGVkVmFsdWUiXSwic291cmNlcyI6WyJpbml0Lm9mZmxpbmUudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogT2ZmbGluZSBJbml0aWFsaXphdGlvbiBUZXN0c1xyXG4gKiBGaWxlOiBpbml0Lm9mZmxpbmUudGVzdC5qc1xyXG4gKi9cclxuaW1wb3J0IHsgaW5pdE9mZmxpbmUgfSBmcm9tICdAYm9vdHN0cmFwL2luaXQub2ZmbGluZSc7XHJcbmltcG9ydCB7IG5ldHdvcmtMaXN0ZW5lciwgc3luY01hbmFnZXIsIGh5ZHJhdGlvbiB9IGZyb20gJ0BvZmZsaW5lJztcclxuaW1wb3J0IHN0b3JlIGZyb20gJ0BzdG9yZSc7XHJcbmltcG9ydCB7IGFjdGlvbnMgfSBmcm9tICdAc3RvcmUvc2xpY2VzL25ldHdvcmsuc2xpY2UnO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAbG9nZ2luZyc7XHJcbmltcG9ydCB7IE5FVFdPUktfUVVBTElUWSB9IGZyb20gJ0B1dGlscy9uZXR3b3JrUXVhbGl0eSc7XHJcblxyXG5qZXN0Lm1vY2soJ0BvZmZsaW5lJywgKCkgPT4gKHtcclxuICBuZXR3b3JrTGlzdGVuZXI6IHtcclxuICAgIHN0YXJ0TGlzdGVuaW5nOiBqZXN0LmZuKCksXHJcbiAgICBzdWJzY3JpYmU6IGplc3QuZm4oKSxcclxuICAgIGNoZWNrQ29ubmVjdGl2aXR5OiBqZXN0LmZuKCksXHJcbiAgfSxcclxuICBzeW5jTWFuYWdlcjoge1xyXG4gICAgc3RhcnRTeW5jOiBqZXN0LmZuKCksXHJcbiAgfSxcclxuICBoeWRyYXRpb246IHtcclxuICAgIGh5ZHJhdGU6IGplc3QuZm4oKSxcclxuICB9LFxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0BzdG9yZScsICgpID0+ICh7XHJcbiAgZGlzcGF0Y2g6IGplc3QuZm4oKSxcclxufSkpO1xyXG5cclxuamVzdC5tb2NrKCdAc3RvcmUvc2xpY2VzL25ldHdvcmsuc2xpY2UnLCAoKSA9PiAoe1xyXG4gIGFjdGlvbnM6IHtcclxuICAgIHNldE9ubGluZTogamVzdC5mbigoaXNPbmxpbmUpID0+ICh7IHR5cGU6ICduZXR3b3JrL3NldE9ubGluZScsIHBheWxvYWQ6IGlzT25saW5lIH0pKSxcclxuICAgIHNldFF1YWxpdHk6IGplc3QuZm4oKHF1YWxpdHkpID0+ICh7IHR5cGU6ICduZXR3b3JrL3NldFF1YWxpdHknLCBwYXlsb2FkOiBxdWFsaXR5IH0pKSxcclxuICB9LFxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0Bsb2dnaW5nJywgKCkgPT4gKHtcclxuICBsb2dnZXI6IHtcclxuICAgIGluZm86IGplc3QuZm4oKSxcclxuICAgIGVycm9yOiBqZXN0LmZuKCksXHJcbiAgICBkZWJ1ZzogamVzdC5mbigpLFxyXG4gICAgd2FybjogamVzdC5mbigpLFxyXG4gIH0sXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdPZmZsaW5lIEluaXRpYWxpemF0aW9uJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuY2hlY2tDb25uZWN0aXZpdHkubW9ja1Jlc29sdmVkVmFsdWUoe1xyXG4gICAgICBpc09ubGluZTogdHJ1ZSxcclxuICAgICAgcXVhbGl0eTogTkVUV09SS19RVUFMSVRZLkdPT0QsXHJcbiAgICB9KTtcclxuICAgIGh5ZHJhdGlvbi5oeWRyYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHsgcXVldWU6IFtdIH0pO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaW5pdGlhbGl6ZXMgbmV0d29yayBsaXN0ZW5lciBhbmQgc3luYyBtYW5hZ2VyJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgYXdhaXQgaW5pdE9mZmxpbmUoKTtcclxuXHJcbiAgICBleHBlY3QobmV0d29ya0xpc3RlbmVyLnN0YXJ0TGlzdGVuaW5nKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICBleHBlY3Qoc3luY01hbmFnZXIuc3RhcnRTeW5jKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdzdWJzY3JpYmVzIHRvIG5ldHdvcmsgY2hhbmdlcyBhbmQgdXBkYXRlcyBSZWR1eCBzdG9yZScsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBuZXR3b3JrQ2hhbmdlQ2FsbGJhY2s7XHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3Vic2NyaWJlLm1vY2tJbXBsZW1lbnRhdGlvbigoY2FsbGJhY2spID0+IHtcclxuICAgICAgbmV0d29ya0NoYW5nZUNhbGxiYWNrID0gY2FsbGJhY2s7XHJcbiAgICAgIHJldHVybiBqZXN0LmZuKCk7IC8vIHVuc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBpbml0T2ZmbGluZSgpO1xyXG5cclxuICAgIGV4cGVjdChuZXR3b3JrTGlzdGVuZXIuc3Vic2NyaWJlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XHJcbiAgICBleHBlY3QobmV0d29ya0xpc3RlbmVyLnN1YnNjcmliZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShGdW5jdGlvbikpO1xyXG5cclxuICAgIC8vIFNpbXVsYXRlIG5ldHdvcmsgc3RhdHVzIGNoYW5nZVxyXG4gICAgbmV0d29ya0NoYW5nZUNhbGxiYWNrKHsgaXNPbmxpbmU6IGZhbHNlLCBxdWFsaXR5OiBORVRXT1JLX1FVQUxJVFkuVU5LTk9XTiB9KTtcclxuICAgIGV4cGVjdChzdG9yZS5kaXNwYXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYWN0aW9ucy5zZXRPbmxpbmUoZmFsc2UpKTtcclxuICAgIGV4cGVjdChzdG9yZS5kaXNwYXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYWN0aW9ucy5zZXRRdWFsaXR5KE5FVFdPUktfUVVBTElUWS5VTktOT1dOKSk7XHJcblxyXG4gICAgbmV0d29ya0NoYW5nZUNhbGxiYWNrKHsgaXNPbmxpbmU6IHRydWUsIHF1YWxpdHk6IE5FVFdPUktfUVVBTElUWS5HT09EIH0pO1xyXG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChhY3Rpb25zLnNldE9ubGluZSh0cnVlKSk7XHJcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGFjdGlvbnMuc2V0UXVhbGl0eShORVRXT1JLX1FVQUxJVFkuR09PRCkpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaW5pdGlhbGl6ZXMgY3VycmVudCBuZXR3b3JrIHN0YXR1cyBpbiBSZWR1eCBzdG9yZScsIGFzeW5jICgpID0+IHtcclxuICAgIG5ldHdvcmtMaXN0ZW5lci5jaGVja0Nvbm5lY3Rpdml0eS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XHJcbiAgICAgIGlzT25saW5lOiB0cnVlLFxyXG4gICAgICBxdWFsaXR5OiBORVRXT1JLX1FVQUxJVFkuR09PRCxcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IGluaXRPZmZsaW5lKCk7XHJcblxyXG4gICAgZXhwZWN0KG5ldHdvcmtMaXN0ZW5lci5jaGVja0Nvbm5lY3Rpdml0eSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChhY3Rpb25zLnNldE9ubGluZSh0cnVlKSk7XHJcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGFjdGlvbnMuc2V0UXVhbGl0eShORVRXT1JLX1FVQUxJVFkuR09PRCkpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnaW5pdGlhbGl6ZXMgbmV0d29yayBzdGF0dXMgYXMgb2ZmbGluZSB3aGVuIGNvbm5lY3Rpdml0eSBjaGVjayByZXR1cm5zIGZhbHNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgbmV0d29ya0xpc3RlbmVyLmNoZWNrQ29ubmVjdGl2aXR5Lm1vY2tSZXNvbHZlZFZhbHVlKHtcclxuICAgICAgaXNPbmxpbmU6IGZhbHNlLFxyXG4gICAgICBxdWFsaXR5OiBORVRXT1JLX1FVQUxJVFkuVU5LTk9XTixcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IGluaXRPZmZsaW5lKCk7XHJcblxyXG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChhY3Rpb25zLnNldE9ubGluZShmYWxzZSkpO1xyXG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChhY3Rpb25zLnNldFF1YWxpdHkoTkVUV09SS19RVUFMSVRZLlVOS05PV04pKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ3RyaWdnZXJzIHN0YXRlIGh5ZHJhdGlvbicsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IG1vY2tRdWV1ZSA9IFt7IGlkOiAnMScsIHVybDogJy9hcGkvdGVzdCcgfV07XHJcbiAgICBoeWRyYXRpb24uaHlkcmF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHF1ZXVlOiBtb2NrUXVldWUgfSk7XHJcblxyXG4gICAgYXdhaXQgaW5pdE9mZmxpbmUoKTtcclxuXHJcbiAgICBleHBlY3QoaHlkcmF0aW9uLmh5ZHJhdGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2hhbmRsZXMgZXJyb3JzIGdyYWNlZnVsbHkgd2l0aG91dCB0aHJvd2luZycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdPZmZsaW5lIGluaXRpYWxpemF0aW9uIGVycm9yJyk7XHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3RhcnRMaXN0ZW5pbmcubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhd2FpdCBleHBlY3QoaW5pdE9mZmxpbmUoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuXHJcbiAgICBleHBlY3QobG9nZ2VyLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnT2ZmbGluZSBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7XHJcbiAgICAgIGVycm9yOiAnT2ZmbGluZSBpbml0aWFsaXphdGlvbiBlcnJvcicsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2hhbmRsZXMgbmV0d29yayBjb25uZWN0aXZpdHkgY2hlY2sgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3RhcnRMaXN0ZW5pbmcubW9ja1JldHVyblZhbHVlKHVuZGVmaW5lZCk7XHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3Vic2NyaWJlLm1vY2tSZXR1cm5WYWx1ZShqZXN0LmZuKCkpO1xyXG4gICAgbmV0d29ya0xpc3RlbmVyLmNoZWNrQ29ubmVjdGl2aXR5Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ29ubmVjdGl2aXR5IGNoZWNrIGZhaWxlZCcpKTtcclxuXHJcbiAgICBhd2FpdCBleHBlY3QoaW5pdE9mZmxpbmUoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuXHJcbiAgICBleHBlY3QobG9nZ2VyLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnT2ZmbGluZSBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7XHJcbiAgICAgIGVycm9yOiAnQ29ubmVjdGl2aXR5IGNoZWNrIGZhaWxlZCcsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2hhbmRsZXMgaHlkcmF0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgbmV0d29ya0xpc3RlbmVyLnN0YXJ0TGlzdGVuaW5nLm1vY2tSZXR1cm5WYWx1ZSh1bmRlZmluZWQpO1xyXG4gICAgbmV0d29ya0xpc3RlbmVyLnN1YnNjcmliZS5tb2NrUmV0dXJuVmFsdWUoamVzdC5mbigpKTtcclxuICAgIG5ldHdvcmtMaXN0ZW5lci5jaGVja0Nvbm5lY3Rpdml0eS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcclxuICAgIGh5ZHJhdGlvbi5oeWRyYXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignSHlkcmF0aW9uIGZhaWxlZCcpKTtcclxuXHJcbiAgICBhd2FpdCBleHBlY3QoaW5pdE9mZmxpbmUoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuXHJcbiAgICBleHBlY3QobG9nZ2VyLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnT2ZmbGluZSBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7XHJcbiAgICAgIGVycm9yOiAnSHlkcmF0aW9uIGZhaWxlZCcsXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2xvZ3Mgc3VjY2VzcyB3aGVuIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlcycsIGFzeW5jICgpID0+IHtcclxuICAgIGF3YWl0IGluaXRPZmZsaW5lKCk7XHJcblxyXG4gICAgZXhwZWN0KGxvZ2dlci5pbmZvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnT2ZmbGluZSBzeXN0ZW0gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFXQUEsV0FBQSxHQUFLQyxJQUFJLGtCQUFhO0VBQUEsT0FBTztJQUMzQkMsZUFBZSxFQUFFO01BQ2ZDLGNBQWMsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUN6QkMsU0FBUyxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3BCRSxpQkFBaUIsRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDN0IsQ0FBQztJQUNERyxXQUFXLEVBQUU7TUFDWEMsU0FBUyxFQUFFTCxJQUFJLENBQUNDLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBQ0RLLFNBQVMsRUFBRTtNQUNUQyxPQUFPLEVBQUVQLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ25CO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVITCxXQUFBLEdBQUtDLElBQUksZ0JBQVc7RUFBQSxPQUFPO0lBQ3pCVyxRQUFRLEVBQUVSLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0VBQ3BCLENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSEwsV0FBQSxHQUFLQyxJQUFJLHFDQUFnQztFQUFBLE9BQU87SUFDOUNZLE9BQU8sRUFBRTtNQUNQQyxTQUFTLEVBQUVWLElBQUksQ0FBQ0Ms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