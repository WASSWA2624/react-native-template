673cfafad7ed8f3c341759b4d150ca88
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.logger = void 0;
var _config = require("../config");
var _levels = require("./levels");
var safeStringify = function safeStringify(value) {
  try {
    return JSON.stringify(value);
  } catch (_unused) {
    return JSON.stringify({
      level: _levels.ERROR,
      message: 'Failed to serialize log entry'
    });
  }
};
var log = function log(level, message) {
  var _console, _console2;
  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  if (_config.NODE_ENV === 'production' && level === _levels.DEBUG) {
    return;
  }
  var timestamp = new Date().toISOString();
  var logEntry = Object.assign({
    timestamp: timestamp,
    level: level,
    message: message
  }, data);
  var consoleMethod = level === _levels.FATAL ? 'error' : level;
  var fn = ((_console = console) == null ? void 0 : _console[consoleMethod]) || ((_console2 = console) == null ? void 0 : _console2.log);
  if (typeof fn === 'function') {
    fn(safeStringify(logEntry));
  }
};
var logger = exports.logger = {
  debug: function debug(message, data) {
    return log(_levels.DEBUG, message, data);
  },
  info: function info(message, data) {
    return log(_levels.INFO, message, data);
  },
  warn: function warn(message, data) {
    return log(_levels.WARN, message, data);
  },
  error: function error(message, data) {
    return log(_levels.ERROR, message, data);
  },
  fatal: function fatal(message, data) {
    return log(_levels.FATAL, message, data);
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwicmVxdWlyZSIsIl9sZXZlbHMiLCJzYWZlU3RyaW5naWZ5IiwidmFsdWUiLCJKU09OIiwic3RyaW5naWZ5IiwiX3VudXNlZCIsImxldmVsIiwiRVJST1IiLCJtZXNzYWdlIiwibG9nIiwiX2NvbnNvbGUiLCJfY29uc29sZTIiLCJkYXRhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiTk9ERV9FTlYiLCJERUJVRyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImxvZ0VudHJ5IiwiT2JqZWN0IiwiYXNzaWduIiwiY29uc29sZU1ldGhvZCIsIkZBVEFMIiwiZm4iLCJjb25zb2xlIiwibG9nZ2VyIiwiZXhwb3J0cyIsImRlYnVnIiwiaW5mbyIsIklORk8iLCJ3YXJuIiwiV0FSTiIsImVycm9yIiwiZmF0YWwiXSwic291cmNlcyI6WyJsb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIExvZ2dlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBDZW50cmFsaXplZCBsb2dnaW5nIHdpdGggbGV2ZWxzXHJcbiAqIEZpbGU6IGxvZ2dlci5qc1xyXG4gKi9cclxuaW1wb3J0IHsgTk9ERV9FTlYgfSBmcm9tICdAY29uZmlnJztcclxuaW1wb3J0IHsgREVCVUcsIElORk8sIFdBUk4sIEVSUk9SLCBGQVRBTCB9IGZyb20gJy4vbGV2ZWxzJztcclxuXHJcbmNvbnN0IHNhZmVTdHJpbmdpZnkgPSAodmFsdWUpID0+IHtcclxuICB0cnkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICB9IGNhdGNoIHtcclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIGxldmVsOiBFUlJPUixcclxuICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZXJpYWxpemUgbG9nIGVudHJ5JyxcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGxvZyA9IChsZXZlbCwgbWVzc2FnZSwgZGF0YSA9IHt9KSA9PiB7XHJcbiAgaWYgKE5PREVfRU5WID09PSAncHJvZHVjdGlvbicgJiYgbGV2ZWwgPT09IERFQlVHKSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgY29uc3QgbG9nRW50cnkgPSB7XHJcbiAgICB0aW1lc3RhbXAsXHJcbiAgICBsZXZlbCxcclxuICAgIG1lc3NhZ2UsXHJcbiAgICAuLi5kYXRhLFxyXG4gIH07XHJcblxyXG4gIC8vIEluIHByb2R1Y3Rpb24sIHNlbmQgdG8gbW9uaXRvcmluZyBzZXJ2aWNlXHJcbiAgLy8gRm9yIG5vdywgY29uc29sZSBsb2dnaW5nXHJcbiAgY29uc3QgY29uc29sZU1ldGhvZCA9IGxldmVsID09PSBGQVRBTCA/ICdlcnJvcicgOiBsZXZlbDtcclxuICBjb25zdCBmbiA9IGNvbnNvbGU/Lltjb25zb2xlTWV0aG9kXSB8fCBjb25zb2xlPy5sb2c7XHJcbiAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgZm4oc2FmZVN0cmluZ2lmeShsb2dFbnRyeSkpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGxvZ2dlciA9IHtcclxuICBkZWJ1ZzogKG1lc3NhZ2UsIGRhdGEpID0+IGxvZyhERUJVRywgbWVzc2FnZSwgZGF0YSksXHJcbiAgaW5mbzogKG1lc3NhZ2UsIGRhdGEpID0+IGxvZyhJTkZPLCBtZXNzYWdlLCBkYXRhKSxcclxuICB3YXJuOiAobWVzc2FnZSwgZGF0YSkgPT4gbG9nKFdBUk4sIG1lc3NhZ2UsIGRhdGEpLFxyXG4gIGVycm9yOiAobWVzc2FnZSwgZGF0YSkgPT4gbG9nKEVSUk9SLCBtZXNzYWdlLCBkYXRhKSxcclxuICBmYXRhbDogKG1lc3NhZ2UsIGRhdGEpID0+IGxvZyhGQVRBTCwgbWVzc2FnZSwgZGF0YSksXHJcbn07XHJcblxyXG5leHBvcnQgeyBsb2dnZXIgfTtcclxuXHJcbiJdLCJtYXBw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