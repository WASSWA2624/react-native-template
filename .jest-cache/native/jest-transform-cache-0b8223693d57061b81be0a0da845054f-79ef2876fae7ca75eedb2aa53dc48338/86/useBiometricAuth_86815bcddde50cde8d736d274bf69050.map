{"version":3,"names":["_react","require","_useI18n2","_interopRequireDefault","_security","useBiometricAuth","_useI18n","useI18n","t","_useState","useState","_useState2","_slicedToArray2","default","isAvailable","setIsAvailable","_useState3","_useState4","isChecking","setIsChecking","_useState5","_useState6","errorMessage","setErrorMessage","checkAvailability","useCallback","_asyncToGenerator2","_yield$Promise$all","Promise","all","isBiometricSupported","isBiometricEnrolled","_yield$Promise$all2","supported","enrolled","Boolean","useEffect","isMounted","load","_ref2","_yield$Promise$all3","_yield$Promise$all4","apply","arguments","authenticate","result","authenticateBiometric","promptMessage","cancelLabel","fallbackLabel","success","useMemo","refreshAvailability","_default","exports"],"sources":["useBiometricAuth.js"],"sourcesContent":["/**\r\n * useBiometricAuth Hook\r\n * Exposes biometric availability and authentication helpers.\r\n * File: useBiometricAuth.js\r\n */\r\nimport { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport useI18n from './useI18n';\r\nimport { authenticateBiometric, isBiometricEnrolled, isBiometricSupported } from '@security';\r\n\r\nconst useBiometricAuth = () => {\r\n  const { t } = useI18n();\r\n  const [isAvailable, setIsAvailable] = useState(false);\r\n  const [isChecking, setIsChecking] = useState(true);\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n  const checkAvailability = useCallback(async () => {\r\n    setIsChecking(true);\r\n    const [supported, enrolled] = await Promise.all([\r\n      isBiometricSupported(),\r\n      isBiometricEnrolled(),\r\n    ]);\r\n    setIsAvailable(Boolean(supported && enrolled));\r\n    setIsChecking(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const load = async () => {\r\n      const [supported, enrolled] = await Promise.all([\r\n        isBiometricSupported(),\r\n        isBiometricEnrolled(),\r\n      ]);\r\n      if (!isMounted) return;\r\n      setIsAvailable(Boolean(supported && enrolled));\r\n      setIsChecking(false);\r\n    };\r\n    load();\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const authenticate = useCallback(async () => {\r\n    setErrorMessage(null);\r\n    const result = await authenticateBiometric({\r\n      promptMessage: t('auth.login.biometric.prompt'),\r\n      cancelLabel: t('auth.login.biometric.cancel'),\r\n      fallbackLabel: t('auth.login.biometric.fallback'),\r\n    });\r\n    if (!result?.success) {\r\n      setErrorMessage(t('auth.login.biometric.error'));\r\n      return false;\r\n    }\r\n    return true;\r\n  }, [t]);\r\n\r\n  return useMemo(() => ({\r\n    isAvailable,\r\n    isChecking,\r\n    errorMessage,\r\n    authenticate,\r\n    refreshAvailability: checkAvailability,\r\n  }), [authenticate, checkAvailability, errorMessage, isAvailable, isChecking]);\r\n};\r\n\r\nexport default useBiometricAuth;\r\n"],"mappings":";;;;;;;AAKA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,SAAA,GAAAH,OAAA;AAEA,IAAMI,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA,EAAS;EAC7B,IAAAC,QAAA,GAAc,IAAAC,iBAAO,EAAC,CAAC;IAAfC,CAAC,GAAAF,QAAA,CAADE,CAAC;EACT,IAAAC,SAAA,GAAsC,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAJ,SAAA;IAA9CK,WAAW,GAAAH,UAAA;IAAEI,cAAc,GAAAJ,UAAA;EAClC,IAAAK,UAAA,GAAoC,IAAAN,eAAQ,EAAC,IAAI,CAAC;IAAAO,UAAA,OAAAL,eAAA,CAAAC,OAAA,EAAAG,UAAA;IAA3CE,UAAU,GAAAD,UAAA;IAAEE,aAAa,GAAAF,UAAA;EAChC,IAAAG,UAAA,GAAwC,IAAAV,eAAQ,EAAC,IAAI,CAAC;IAAAW,UAAA,OAAAT,eAAA,CAAAC,OAAA,EAAAO,UAAA;IAA/CE,YAAY,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EAEpC,IAAMG,iBAAiB,GAAG,IAAAC,kBAAW,MAAAC,kBAAA,CAAAb,OAAA,EAAC,aAAY;IAChDM,aAAa,CAAC,IAAI,CAAC;IACnB,IAAAQ,kBAAA,SAAoCC,OAAO,CAACC,GAAG,CAAC,CAC9C,IAAAC,8BAAoB,EAAC,CAAC,EACtB,IAAAC,6BAAmB,EAAC,CAAC,CACtB,CAAC;MAAAC,mBAAA,OAAApB,eAAA,CAAAC,OAAA,EAAAc,kBAAA;MAHKM,SAAS,GAAAD,mBAAA;MAAEE,QAAQ,GAAAF,mBAAA;IAI1BjB,cAAc,CAACoB,OAAO,CAACF,SAAS,IAAIC,QAAQ,CAAC,CAAC;IAC9Cf,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC,GAAE,EAAE,CAAC;EAEN,IAAAiB,gBAAS,EAAC,YAAM;IACd,IAAIC,SAAS,GAAG,IAAI;IACpB,IAAMC,IAAI;MAAA,IAAAC,KAAA,OAAAb,kBAAA,CAAAb,OAAA,EAAG,aAAY;QACvB,IAAA2B,mBAAA,SAAoCZ,OAAO,CAACC,GAAG,CAAC,CAC9C,IAAAC,8BAAoB,EAAC,CAAC,EACtB,IAAAC,6BAAmB,EAAC,CAAC,CACtB,CAAC;UAAAU,mBAAA,OAAA7B,eAAA,CAAAC,OAAA,EAAA2B,mBAAA;UAHKP,SAAS,GAAAQ,mBAAA;UAAEP,QAAQ,GAAAO,mBAAA;QAI1B,IAAI,CAACJ,SAAS,EAAE;QAChBtB,cAAc,CAACoB,OAAO,CAACF,SAAS,IAAIC,QAAQ,CAAC,CAAC;QAC9Cf,aAAa,CAAC,KAAK,CAAC;MACtB,CAAC;MAAA,gBARKmB,IAAIA,CAAA;QAAA,OAAAC,KAAA,CAAAG,KAAA,OAAAC,SAAA;MAAA;IAAA,GAQT;IACDL,IAAI,CAAC,CAAC;IACN,OAAO,YAAM;MACXD,SAAS,GAAG,KAAK;IACnB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMO,YAAY,GAAG,IAAAnB,kBAAW,MAAAC,kBAAA,CAAAb,OAAA,EAAC,aAAY;IAC3CU,eAAe,CAAC,IAAI,CAAC;IACrB,IAAMsB,MAAM,SAAS,IAAAC,+BAAqB,EAAC;MACzCC,aAAa,EAAEvC,CAAC,CAAC,6BAA6B,CAAC;MAC/CwC,WAAW,EAAExC,CAAC,CAAC,6BAA6B,CAAC;MAC7CyC,aAAa,EAAEzC,CAAC,CAAC,+BAA+B;IAClD,CAAC,CAAC;IACF,IAAI,EAACqC,MAAM,YAANA,MAAM,CAAEK,OAAO,GAAE;MACpB3B,eAAe,CAACf,CAAC,CAAC,4BAA4B,CAAC,CAAC;MAChD,OAAO,KAAK;IACd;IACA,OAAO,IAAI;EACb,CAAC,GAAE,CAACA,CAAC,CAAC,CAAC;EAEP,OAAO,IAAA2C,cAAO,EAAC;IAAA,OAAO;MACpBrC,WAAW,EAAXA,WAAW;MACXI,UAAU,EAAVA,UAAU;MACVI,YAAY,EAAZA,YAAY;MACZsB,YAAY,EAAZA,YAAY;MACZQ,mBAAmB,EAAE5B;IACvB,CAAC;EAAA,CAAC,EAAE,CAACoB,YAAY,EAAEpB,iBAAiB,EAAEF,YAAY,EAAER,WAAW,EAAEI,UAAU,CAAC,CAAC;AAC/E,CAAC;AAAC,IAAAmC,QAAA,GAAAC,OAAA,CAAAzC,OAAA,GAEaR,gBAAgB","ignoreList":[]}