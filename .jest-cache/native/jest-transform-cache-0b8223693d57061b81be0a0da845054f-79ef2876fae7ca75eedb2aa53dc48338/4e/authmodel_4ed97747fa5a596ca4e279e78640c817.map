{"version":3,"names":["normalizeAuthUser","exports","value","_value$id","id","rest","_objectWithoutProperties2","default","_excluded","Object","assign","normalizeAuthTokens","accessToken","access_token","refreshToken","refresh_token","normalizeAuthResponse","console","log","JSON","stringify","user","tokens","userSource","profile","tokensSource","hasAccessToken","Boolean","hasRefreshToken","result","hasUser","hasTokens"],"sources":["auth.model.js"],"sourcesContent":["/**\r\n * Auth Model\r\n * Normalizes auth responses\r\n * File: auth.model.js\r\n */\r\n\r\nconst normalizeAuthUser = (value) => {\r\n  if (!value || typeof value !== 'object') return null;\r\n  const { id = null, ...rest } = value;\r\n  return { id, ...rest };\r\n};\r\n\r\nconst normalizeAuthTokens = (value) => {\r\n  if (!value || typeof value !== 'object') return null;\r\n  const accessToken = value.accessToken || value.access_token || null;\r\n  const refreshToken = value.refreshToken || value.refresh_token || null;\r\n  if (!accessToken && !refreshToken) return null;\r\n  return { accessToken, refreshToken };\r\n};\r\n\r\nconst normalizeAuthResponse = (value) => {\r\n  console.log('[NORMALIZE_AUTH] Input value:', JSON.stringify(value, null, 2));\r\n  if (!value || typeof value !== 'object') {\r\n    console.log('[NORMALIZE_AUTH] Invalid input, returning null');\r\n    return { user: null, tokens: null };\r\n  }\r\n  const userSource = value.user || value.profile || value;\r\n  console.log('[NORMALIZE_AUTH] User source:', JSON.stringify(userSource, null, 2));\r\n  const user = normalizeAuthUser(userSource);\r\n  console.log('[NORMALIZE_AUTH] Normalized user:', JSON.stringify(user, null, 2));\r\n  \r\n  const tokensSource = value.tokens || value;\r\n  console.log('[NORMALIZE_AUTH] Tokens source:', tokensSource ? { hasAccessToken: Boolean(tokensSource.accessToken || tokensSource.access_token), hasRefreshToken: Boolean(tokensSource.refreshToken || tokensSource.refresh_token) } : null);\r\n  const tokens = normalizeAuthTokens(tokensSource);\r\n  console.log('[NORMALIZE_AUTH] Normalized tokens:', tokens ? { hasAccessToken: Boolean(tokens.accessToken), hasRefreshToken: Boolean(tokens.refreshToken) } : null);\r\n  \r\n  const result = { user, tokens };\r\n  console.log('[NORMALIZE_AUTH] Final result:', { hasUser: Boolean(user), hasTokens: Boolean(tokens) });\r\n  return result;\r\n};\r\n\r\nexport { normalizeAuthUser, normalizeAuthTokens, normalizeAuthResponse };\r\n"],"mappings":";;;;;;;AAMA,IAAMA,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAApBA,iBAAiBA,CAAIE,KAAK,EAAK;EACnC,IAAI,CAACA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,IAAI;EACpD,IAAAC,SAAA,GAA+BD,KAAK,CAA5BE,EAAE;IAAFA,EAAE,GAAAD,SAAA,cAAG,IAAI,GAAAA,SAAA;IAAKE,IAAI,OAAAC,yBAAA,CAAAC,OAAA,EAAKL,KAAK,EAAAM,SAAA;EACpC,OAAAC,MAAA,CAAAC,MAAA;IAASN,EAAE,EAAFA;EAAE,GAAKC,IAAI;AACtB,CAAC;AAED,IAAMM,mBAAmB,GAAAV,OAAA,CAAAU,mBAAA,GAAG,SAAtBA,mBAAmBA,CAAIT,KAAK,EAAK;EACrC,IAAI,CAACA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE,OAAO,IAAI;EACpD,IAAMU,WAAW,GAAGV,KAAK,CAACU,WAAW,IAAIV,KAAK,CAACW,YAAY,IAAI,IAAI;EACnE,IAAMC,YAAY,GAAGZ,KAAK,CAACY,YAAY,IAAIZ,KAAK,CAACa,aAAa,IAAI,IAAI;EACtE,IAAI,CAACH,WAAW,IAAI,CAACE,YAAY,EAAE,OAAO,IAAI;EAC9C,OAAO;IAAEF,WAAW,EAAXA,WAAW;IAAEE,YAAY,EAAZA;EAAa,CAAC;AACtC,CAAC;AAED,IAAME,qBAAqB,GAAAf,OAAA,CAAAe,qBAAA,GAAG,SAAxBA,qBAAqBA,CAAId,KAAK,EAAK;EACvCe,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEC,IAAI,CAACC,SAAS,CAAClB,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC5E,IAAI,CAACA,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IACvCe,OAAO,CAACC,GAAG,CAAC,gDAAgD,CAAC;IAC7D,OAAO;MAAEG,IAAI,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAK,CAAC;EACrC;EACA,IAAMC,UAAU,GAAGrB,KAAK,CAACmB,IAAI,IAAInB,KAAK,CAACsB,OAAO,IAAItB,KAAK;EACvDe,OAAO,CAACC,GAAG,CAAC,+BAA+B,EAAEC,IAAI,CAACC,SAAS,CAACG,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EACjF,IAAMF,IAAI,GAAGrB,iBAAiB,CAACuB,UAAU,CAAC;EAC1CN,OAAO,CAACC,GAAG,CAAC,mCAAmC,EAAEC,IAAI,CAACC,SAAS,CAACC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAE/E,IAAMI,YAAY,GAAGvB,KAAK,CAACoB,MAAM,IAAIpB,KAAK;EAC1Ce,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEO,YAAY,GAAG;IAAEC,cAAc,EAAEC,OAAO,CAACF,YAAY,CAACb,WAAW,IAAIa,YAAY,CAACZ,YAAY,CAAC;IAAEe,eAAe,EAAED,OAAO,CAACF,YAAY,CAACX,YAAY,IAAIW,YAAY,CAACV,aAAa;EAAE,CAAC,GAAG,IAAI,CAAC;EAC3O,IAAMO,MAAM,GAAGX,mBAAmB,CAACc,YAAY,CAAC;EAChDR,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEI,MAAM,GAAG;IAAEI,cAAc,EAAEC,OAAO,CAACL,MAAM,CAACV,WAAW,CAAC;IAAEgB,eAAe,EAAED,OAAO,CAACL,MAAM,CAACR,YAAY;EAAE,CAAC,GAAG,IAAI,CAAC;EAElK,IAAMe,MAAM,GAAG;IAAER,IAAI,EAAJA,IAAI;IAAEC,MAAM,EAANA;EAAO,CAAC;EAC/BL,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAE;IAAEY,OAAO,EAAEH,OAAO,CAACN,IAAI,CAAC;IAAEU,SAAS,EAAEJ,OAAO,CAACL,MAAM;EAAE,CAAC,CAAC;EACrG,OAAOO,MAAM;AACf,CAAC","ignoreList":[]}