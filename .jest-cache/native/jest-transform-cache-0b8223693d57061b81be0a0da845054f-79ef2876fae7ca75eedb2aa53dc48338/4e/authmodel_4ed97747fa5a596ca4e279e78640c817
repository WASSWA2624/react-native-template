c6419b2ac4267ca9e65226d30c2b307a
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.normalizeAuthUser = exports.normalizeAuthTokens = exports.normalizeAuthResponse = void 0;
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _excluded = ["id"];
var normalizeAuthUser = exports.normalizeAuthUser = function normalizeAuthUser(value) {
  if (!value || typeof value !== 'object') return null;
  var _value$id = value.id,
    id = _value$id === void 0 ? null : _value$id,
    rest = (0, _objectWithoutProperties2.default)(value, _excluded);
  return Object.assign({
    id: id
  }, rest);
};
var normalizeAuthTokens = exports.normalizeAuthTokens = function normalizeAuthTokens(value) {
  if (!value || typeof value !== 'object') return null;
  var accessToken = value.accessToken || value.access_token || null;
  var refreshToken = value.refreshToken || value.refresh_token || null;
  if (!accessToken && !refreshToken) return null;
  return {
    accessToken: accessToken,
    refreshToken: refreshToken
  };
};
var normalizeAuthResponse = exports.normalizeAuthResponse = function normalizeAuthResponse(value) {
  console.log('[NORMALIZE_AUTH] Input value:', JSON.stringify(value, null, 2));
  if (!value || typeof value !== 'object') {
    console.log('[NORMALIZE_AUTH] Invalid input, returning null');
    return {
      user: null,
      tokens: null
    };
  }
  var userSource = value.user || value.profile || value;
  console.log('[NORMALIZE_AUTH] User source:', JSON.stringify(userSource, null, 2));
  var user = normalizeAuthUser(userSource);
  console.log('[NORMALIZE_AUTH] Normalized user:', JSON.stringify(user, null, 2));
  var tokensSource = value.tokens || value;
  console.log('[NORMALIZE_AUTH] Tokens source:', tokensSource ? {
    hasAccessToken: Boolean(tokensSource.accessToken || tokensSource.access_token),
    hasRefreshToken: Boolean(tokensSource.refreshToken || tokensSource.refresh_token)
  } : null);
  var tokens = normalizeAuthTokens(tokensSource);
  console.log('[NORMALIZE_AUTH] Normalized tokens:', tokens ? {
    hasAccessToken: Boolean(tokens.accessToken),
    hasRefreshToken: Boolean(tokens.refreshToken)
  } : null);
  var result = {
    user: user,
    tokens: tokens
  };
  console.log('[NORMALIZE_AUTH] Final result:', {
    hasUser: Boolean(user),
    hasTokens: Boolean(tokens)
  });
  return result;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub3JtYWxpemVBdXRoVXNlciIsImV4cG9ydHMiLCJ2YWx1ZSIsIl92YWx1ZSRpZCIsImlkIiwicmVzdCIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJkZWZhdWx0IiwiX2V4Y2x1ZGVkIiwiT2JqZWN0IiwiYXNzaWduIiwibm9ybWFsaXplQXV0aFRva2VucyIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaFRva2VuIiwicmVmcmVzaF90b2tlbiIsIm5vcm1hbGl6ZUF1dGhSZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwidXNlciIsInRva2VucyIsInVzZXJTb3VyY2UiLCJwcm9maWxlIiwidG9rZW5zU291cmNlIiwiaGFzQWNjZXNzVG9rZW4iLCJCb29sZWFuIiwiaGFzUmVmcmVzaFRva2VuIiwicmVzdWx0IiwiaGFzVXNlciIsImhhc1Rva2VucyJdLCJzb3VyY2VzIjpbImF1dGgubW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEF1dGggTW9kZWxcclxuICogTm9ybWFsaXplcyBhdXRoIHJlc3BvbnNlc1xyXG4gKiBGaWxlOiBhdXRoLm1vZGVsLmpzXHJcbiAqL1xyXG5cclxuY29uc3Qgbm9ybWFsaXplQXV0aFVzZXIgPSAodmFsdWUpID0+IHtcclxuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IHsgaWQgPSBudWxsLCAuLi5yZXN0IH0gPSB2YWx1ZTtcclxuICByZXR1cm4geyBpZCwgLi4ucmVzdCB9O1xyXG59O1xyXG5cclxuY29uc3Qgbm9ybWFsaXplQXV0aFRva2VucyA9ICh2YWx1ZSkgPT4ge1xyXG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgcmV0dXJuIG51bGw7XHJcbiAgY29uc3QgYWNjZXNzVG9rZW4gPSB2YWx1ZS5hY2Nlc3NUb2tlbiB8fCB2YWx1ZS5hY2Nlc3NfdG9rZW4gfHwgbnVsbDtcclxuICBjb25zdCByZWZyZXNoVG9rZW4gPSB2YWx1ZS5yZWZyZXNoVG9rZW4gfHwgdmFsdWUucmVmcmVzaF90b2tlbiB8fCBudWxsO1xyXG4gIGlmICghYWNjZXNzVG9rZW4gJiYgIXJlZnJlc2hUb2tlbikgcmV0dXJuIG51bGw7XHJcbiAgcmV0dXJuIHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiB9O1xyXG59O1xyXG5cclxuY29uc3Qgbm9ybWFsaXplQXV0aFJlc3BvbnNlID0gKHZhbHVlKSA9PiB7XHJcbiAgY29uc29sZS5sb2coJ1tOT1JNQUxJWkVfQVVUSF0gSW5wdXQgdmFsdWU6JywgSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIDIpKTtcclxuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcclxuICAgIGNvbnNvbGUubG9nKCdbTk9STUFMSVpFX0FVVEhdIEludmFsaWQgaW5wdXQsIHJldHVybmluZyBudWxsJyk7XHJcbiAgICByZXR1cm4geyB1c2VyOiBudWxsLCB0b2tlbnM6IG51bGwgfTtcclxuICB9XHJcbiAgY29uc3QgdXNlclNvdXJjZSA9IHZhbHVlLnVzZXIgfHwgdmFsdWUucHJvZmlsZSB8fCB2YWx1ZTtcclxuICBjb25zb2xlLmxvZygnW05PUk1BTElaRV9BVVRIXSBVc2VyIHNvdXJjZTonLCBKU09OLnN0cmluZ2lmeSh1c2VyU291cmNlLCBudWxsLCAyKSk7XHJcbiAgY29uc3QgdXNlciA9IG5vcm1hbGl6ZUF1dGhVc2VyKHVzZXJTb3VyY2UpO1xyXG4gIGNvbnNvbGUubG9nKCdbTk9STUFMSVpFX0FVVEhdIE5vcm1hbGl6ZWQgdXNlcjonLCBKU09OLnN0cmluZ2lmeSh1c2VyLCBudWxsLCAyKSk7XHJcbiAgXHJcbiAgY29uc3QgdG9rZW5zU291cmNlID0gdmFsdWUudG9rZW5zIHx8IHZhbHVlO1xyXG4gIGNvbnNvbGUubG9nKCdbTk9STUFMSVpFX0FVVEhdIFRva2VucyBzb3VyY2U6JywgdG9rZW5zU291cmNlID8geyBoYXNBY2Nlc3NUb2tlbjogQm9vbGVhbih0b2tlbnNTb3VyY2UuYWNjZXNzVG9rZW4gfHwgdG9rZW5zU291cmNlLmFjY2Vzc190b2tlbiksIGhhc1JlZnJlc2hUb2tlbjogQm9vbGVhbih0b2tlbnNTb3VyY2UucmVmcmVzaFRva2VuIHx8IHRva2Vuc1NvdXJjZS5yZWZyZXNoX3Rva2VuKSB9IDogbnVsbCk7XHJcbiAgY29uc3QgdG9rZW5zID0gbm9ybWFsaXplQXV0aFRva2Vucyh0b2tlbnNTb3VyY2UpO1xyXG4gIGNvbnNvbGUubG9nKCdbTk9STUFMSVpFX0FVVEhdIE5vcm1hbGl6ZWQgdG9rZW5zOicsIHRva2VucyA/IHsgaGFzQWNjZXNzVG9rZW46IEJvb2xlYW4odG9rZW5zLmFjY2Vzc1Rva2VuKSwgaGFzUmVmcmVzaFRva2VuOiBCb29sZWFuKHRva2Vucy5yZWZyZXNoVG9rZW4pIH0gOiBudWxsKTtcclxuICBcclxuICBjb25zdCByZXN1bHQgPSB7IHVzZXIsIHRva2VucyB9O1xyXG4gIGNvbnNvbGUubG9nKCdbTk9STUFMSVpFX0FVVEhdIEZpbmFsIHJlc3VsdDonLCB7IGhhc1VzZXI6IEJvb2xlYW4odXNlciksIGhhc1Rva2VuczogQm9vbGVhbih0b2tlbnMpIH0pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn07XHJcblxyXG5leHBvcnQgeyBub3JtYWxpemVBdXRoVXNlciwgbm9ybWFsaXplQXV0aFRva2Vucywgbm9ybWFsaXplQXV0aFJlc3BvbnNlIH07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU1BLElBQU1BLGlCQUFpQixHQUFBQyxPQUFBLENBQUFELGlCQUFBLEdBQUcsU0FBcEJBLGlCQUFpQkEsQ0FBSUUsS0FBSyxFQUFLO0VBQ25DLElBQUksQ0FBQ0EsS0FBSyxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLEVBQUUsT0FBTyxJQUFJO0VBQ3BELElBQUFDLFNBQUEsR0FBK0JELEtBQUssQ0FBNUJFLEVBQUU7SUFBRkEsRUFBRSxHQUFBRCxTQUFBLGNBQUcs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