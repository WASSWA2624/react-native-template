1ddb9d8662221a8f82fec8ed7346acbc
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var _types = require("./types");
var normalizeRole = function normalizeRole(role) {
  if (typeof role !== 'string') return null;
  var normalized = role.trim().toLowerCase();
  return normalized.length > 0 ? normalized : null;
};
var isActionVisible = function isActionVisible(action, currentRole) {
  if (!action || action.isVisible === false) return false;
  var roles = Array.isArray(action.roles) ? action.roles : [];
  if (roles.length === 0) return true;
  if (!currentRole) return false;
  var normalizedRoles = roles.map(function (role) {
    return String(role).trim().toLowerCase();
  });
  return normalizedRoles.includes(currentRole);
};
var splitActions = function splitActions(actions) {
  return actions.reduce(function (acc, action) {
    if (action.placement === _types.ACTION_PLACEMENTS.SECONDARY) {
      acc.secondaryActions.push(action);
    } else {
      acc.primaryActions.push(action);
    }
    return acc;
  }, {
    primaryActions: [],
    secondaryActions: []
  });
};
var useGlobalHeader = function useGlobalHeader() {
  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},
    _ref$actions = _ref.actions,
    actions = _ref$actions === void 0 ? [] : _ref$actions,
    currentRole = _ref.currentRole,
    breadcrumbs = _ref.breadcrumbs;
  var normalizedRole = normalizeRole(currentRole);
  var visibleActions = (0, _react.useMemo)(function () {
    if (!Array.isArray(actions)) return [];
    return actions.filter(function (action) {
      return isActionVisible(action, normalizedRole);
    });
  }, [actions, normalizedRole]);
  var _useMemo = (0, _react.useMemo)(function () {
      return splitActions(visibleActions);
    }, [visibleActions]),
    primaryActions = _useMemo.primaryActions,
    secondaryActions = _useMemo.secondaryActions;
  var hasBreadcrumbs = Array.isArray(breadcrumbs) && breadcrumbs.length > 0;
  return {
    primaryActions: primaryActions,
    secondaryActions: secondaryActions,
    hasBreadcrumbs: hasBreadcrumbs
  };
};
var _default = exports.default = useGlobalHeader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3R5cGVzIiwibm9ybWFsaXplUm9sZSIsInJvbGUiLCJub3JtYWxpemVkIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibGVuZ3RoIiwiaXNBY3Rpb25WaXNpYmxlIiwiYWN0aW9uIiwiY3VycmVudFJvbGUiLCJpc1Zpc2libGUiLCJyb2xlcyIsIkFycmF5IiwiaXNBcnJheSIsIm5vcm1hbGl6ZWRSb2xlcyIsIm1hcCIsIlN0cmluZyIsImluY2x1ZGVzIiwic3BsaXRBY3Rpb25zIiwiYWN0aW9ucyIsInJlZHVjZSIsImFjYyIsInBsYWNlbWVudCIsIkFDVElPTl9QTEFDRU1FTlRTIiwiU0VDT05EQVJZIiwic2Vjb25kYXJ5QWN0aW9ucyIsInB1c2giLCJwcmltYXJ5QWN0aW9ucyIsInVzZUdsb2JhbEhlYWRlciIsIl9yZWYiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJfcmVmJGFjdGlvbnMiLCJicmVhZGNydW1icyIsIm5vcm1hbGl6ZWRSb2xlIiwidmlzaWJsZUFjdGlvbnMiLCJ1c2VNZW1vIiwiZmlsdGVyIiwiX3VzZU1lbW8iLCJoYXNCcmVhZGNydW1icyIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyJ1c2VHbG9iYWxIZWFkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZUdsb2JhbEhlYWRlciBIb29rXHJcbiAqIFNoYXJlZCBsb2dpYyBmb3IgR2xvYmFsSGVhZGVyIGNvbXBvbmVudFxyXG4gKiBGaWxlOiB1c2VHbG9iYWxIZWFkZXIuanNcclxuICovXHJcbmltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFDVElPTl9QTEFDRU1FTlRTIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG5jb25zdCBub3JtYWxpemVSb2xlID0gKHJvbGUpID0+IHtcclxuICBpZiAodHlwZW9mIHJvbGUgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDtcclxuICBjb25zdCBub3JtYWxpemVkID0gcm9sZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gbm9ybWFsaXplZC5sZW5ndGggPiAwID8gbm9ybWFsaXplZCA6IG51bGw7XHJcbn07XHJcblxyXG5jb25zdCBpc0FjdGlvblZpc2libGUgPSAoYWN0aW9uLCBjdXJyZW50Um9sZSkgPT4ge1xyXG4gIGlmICghYWN0aW9uIHx8IGFjdGlvbi5pc1Zpc2libGUgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XHJcbiAgY29uc3Qgcm9sZXMgPSBBcnJheS5pc0FycmF5KGFjdGlvbi5yb2xlcykgPyBhY3Rpb24ucm9sZXMgOiBbXTtcclxuICBpZiAocm9sZXMubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcclxuICBpZiAoIWN1cnJlbnRSb2xlKSByZXR1cm4gZmFsc2U7XHJcbiAgY29uc3Qgbm9ybWFsaXplZFJvbGVzID0gcm9sZXMubWFwKChyb2xlKSA9PiBTdHJpbmcocm9sZSkudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gIHJldHVybiBub3JtYWxpemVkUm9sZXMuaW5jbHVkZXMoY3VycmVudFJvbGUpO1xyXG59O1xyXG5cclxuY29uc3Qgc3BsaXRBY3Rpb25zID0gKGFjdGlvbnMpID0+IHtcclxuICByZXR1cm4gYWN0aW9ucy5yZWR1Y2UoXHJcbiAgICAoYWNjLCBhY3Rpb24pID0+IHtcclxuICAgICAgaWYgKGFjdGlvbi5wbGFjZW1lbnQgPT09IEFDVElPTl9QTEFDRU1FTlRTLlNFQ09OREFSWSkge1xyXG4gICAgICAgIGFjYy5zZWNvbmRhcnlBY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhY2MucHJpbWFyeUFjdGlvbnMucHVzaChhY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBhY2M7XHJcbiAgICB9LFxyXG4gICAgeyBwcmltYXJ5QWN0aW9uczogW10sIHNlY29uZGFyeUFjdGlvbnM6IFtdIH1cclxuICApO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdsb2JhbEhlYWRlciBob29rXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gSG9vayBvcHRpb25zXHJcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRpb25zLmFjdGlvbnNdIC0gQWN0aW9uIGRlZmluaXRpb25zXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5jdXJyZW50Um9sZV0gLSBDdXJyZW50IHVzZXIgcm9sZVxyXG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0aW9ucy5icmVhZGNydW1ic10gLSBCcmVhZGNydW1iIGl0ZW1zXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlciBzdGF0ZSBoZWxwZXJzXHJcbiAqL1xyXG5jb25zdCB1c2VHbG9iYWxIZWFkZXIgPSAoeyBhY3Rpb25zID0gW10sIGN1cnJlbnRSb2xlLCBicmVhZGNydW1icyB9ID0ge30pID0+IHtcclxuICBjb25zdCBub3JtYWxpemVkUm9sZSA9IG5vcm1hbGl6ZVJvbGUoY3VycmVudFJvbGUpO1xyXG5cclxuICBjb25zdCB2aXNpYmxlQWN0aW9ucyA9IHVzZU1lbW8oKCkgPT4ge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFjdGlvbnMpKSByZXR1cm4gW107XHJcbiAgICByZXR1cm4gYWN0aW9ucy5maWx0ZXIoKGFjdGlvbikgPT4gaXNBY3Rpb25WaXNpYmxlKGFjdGlvbiwgbm9ybWFsaXplZFJvbGUpKTtcclxuICB9LCBbYWN0aW9ucywgbm9ybWFsaXplZFJvbGVdKTtcclxuXHJcbiAgY29uc3QgeyBwcmltYXJ5QWN0aW9ucywgc2Vjb25kYXJ5QWN0aW9ucyB9ID0gdXNlTWVtbygoKSA9PiB7XHJcbiAgICByZXR1cm4gc3BsaXRBY3Rpb25zKHZpc2libGVBY3Rpb25zKTtcclxuICB9LCBbdmlzaWJsZUFjdGlvbnNdKTtcclxuXHJcbiAgY29uc3QgaGFzQnJlYWRjcnVtYnMgPSBBcnJheS5pc0FycmF5KGJyZWFkY3J1bWJzKSAmJiBicmVhZGNydW1icy5sZW5ndGggPiAwO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcHJpbWFyeUFjdGlvbnMsXHJcbiAgICBzZWNvbmRhcnlBY3Rpb25zLFxyXG4gICAgaGFzQnJlYWRjcnVtYnMsXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZUdsb2JhbEhlYWRlcjtcclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBRUEsSUFBTUUsYUFBYSxHQUFHLFNBQWhCQSxhQUFhQSxDQUFJQyxJQUFJLEVBQUs7RUFDOUIsSUFBSSxPQUFPQSxJQUFJLEtBQUssUUFBUSxFQUFFLE9BQU8sSUFBSTtFQUN6QyxJQUFNQyxVQUFVLEdBQUdELElBQUksQ0FBQ0UsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7RUFDNUMsT0FBT0YsVUFBVSxDQUFDRyxNQUFNLEdBQUcsQ0FBQyxHQUFHSCxVQUFVLEdBQUcsSUFBSTtBQUNsRCxDQUFDO0FBRUQsSUFBTUksZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUFJQyxNQUFNLEVBQUVDLFdBQVcsRUFBSztFQUMvQyxJQUFJLENBQUNELE1BQU0sSUFBSUEsTUFBTSxDQUFDRSxTQUFTLEtBQUssS0FBSyxFQUFFLE9BQU8sS0FBSztFQUN2RCxJQUFNQyxLQUFLLEdBQUdDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDTCxNQUFNLENBQUNHLEtBQUssQ0FBQyxHQUFHSCxNQUFNLENBQUNHLEtBQUssR0FBRyxFQUFFO0VBQzdELElBQUlBLEtBQUssQ0FBQ0wsTUFBTSxLQUFLLENBQUMsRUFBRSxPQUFPLElBQUk7RUFDbkMsSUFBSSxDQUFDRyxXQUFXLEVBQUUsT0FBTyxLQUFLO0VBQzlCLElBQU1LLGVBQWUsR0FBR0gsS0FBSyxDQUFDSSxHQUFHLENBQUMsVUFBQ2IsSUFBSTtJQUFBLE9BQUtjLE1BQU0sQ0FBQ2QsSUFBSSxDQUFDLENBQUNFLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQUEsRUFBQztFQUM5RSxPQUFPUyxlQUFlLENBQUNHLFFBQVEsQ0FBQ1IsV0FBVyxDQUFDO0FBQzlDLENBQUM7QUFFRCxJQUFNUyxZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBSUMsT0FBTyxFQUFLO0VBQ2hDLE9BQU9BLE9BQU8sQ0FBQ0MsTUFBTSxDQUNuQixVQUFDQyxHQUFHLEVBQUViLE1BQU0sRUFBSztJQUNmLElBQUlBLE1BQU0sQ0FBQ2MsU0FBUyxLQUFLQyx3QkFBaUIsQ0FBQ0MsU0FBUyxFQUFFO01BQ3BESCxHQUFHLENBQUNJLGdCQUFnQixDQUFDQyxJQUFJLENBQUNsQixNQUFNLENBQUM7SUFDbkMsQ0FBQyxNQUFNO01BQ0xhLEdBQUcsQ0FBQ00sY0FBYyxDQUFDRCxJQUFJLENBQUNsQixNQUFNLENBQUM7SUFDakM7SUFDQSxPQUFPYSxHQUFHO0VBQ1osQ0FBQyxFQUNEO0lBQUVNLGNBQWMsRUFBRSxFQUFFO0lBQUVGLGdCQUFnQixFQUFFO0VBQUcsQ0FDN0MsQ0FBQztBQUNILENBQUM7QUFVRCxJQUFNRyxlQUFlLEdBQUcsU0FBbEJBLGVBQWVBLENBQUEsRUFBd0Q7RUFBQSxJQUFBQyxJQUFBLEdBQUFDLFNBQUEsQ0FBQXhCLE1BQUEsUUFBQXdCLFNBQUEsUUFBQUMsU0FBQSxHQUFBRCxTQUFBLE1BQVAsQ0FBQyxDQUFDO0lBQUFFLFlBQUEsR0FBQUgsSUFBQSxDQUE3Q1YsT0FBTztJQUFQQSxPQUFPLEdBQUFhLFlBQUEsY0FBRyxFQUFFLEdBQUFBLFlBQUE7SUFBRXZCLFdBQVcsR0FBQW9CLElBQUEsQ0FBWHBCLFdBQVc7SUFBRXdCLFdBQVcsR0FBQUosSUFBQSxDQUFYSSxXQUFXO0VBQy9ELElBQU1DLGNBQWMsR0FBR2pDLGFBQWEsQ0FBQ1EsV0FBVyxDQUFDO0VBRWpELElBQU0wQixjQUFjLEdBQUcsSUFBQUMsY0FBTyxFQUFDLFlBQU07SUFDbkMsSUFBSSxDQUFDeEIsS0FBSyxDQUFDQyxPQUFPLENBQUNNLE9BQU8sQ0FBQyxFQUFFLE9BQU8sRUFBRTtJQUN0QyxPQUFPQSxPQUFPLENBQUNrQixNQUFNLENBQUMsVUFBQzdCLE1BQU07TUFBQSxPQUFLRCxlQUFlLENBQUNDLE1BQU0sRUFBRTBCLGNBQWMsQ0FBQztJQUFBLEVBQUM7RUFDNUUsQ0FBQyxFQUFFLENBQUNmLE9BQU8sRUFBRWUsY0FBYyxDQUFDLENBQUM7RUFFN0IsSUFBQUksUUFBQSxHQUE2QyxJQUFBRixjQUFPLEVBQUMsWUFBTTtNQUN6RCxPQUFPbEIsWUFBWSxDQUFDaUIsY0FBYyxDQUFDO0lBQ3JDLENBQUMsRUFBRSxDQUFDQSxjQUFjLENBQUMsQ0FBQztJQUZaUixjQUFjLEdBQUFXLFFBQUEsQ0FBZFgsY0FBYztJQUFFRixnQkFBZ0IsR0FBQWEsUUFBQSxDQUFoQmIsZ0JBQWdCO0VBSXhDLElBQU1jLGNBQWMsR0FBRzNCLEtBQUssQ0FBQ0MsT0FBTyxDQUFDb0IsV0FBVyxDQUFDLElBQUlBLFdBQVcsQ0FBQzNCLE1BQU0sR0FBRyxDQUFDO0VBRTNFLE9BQU87SUFDTHFCLGNBQWMsRUFBZEEsY0FBYztJQUNkRixnQkFBZ0IsRUFBaEJBLGdCQUFnQjtJQUNoQmMsY0FBYyxFQUFkQTtFQUNGLENBQUM7QUFDSCxDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFYWQsZUFBZSIsImlnbm9yZUxpc3QiOltdfQ==