{"version":3,"names":["_NativeAnimatedHelper","_interopRequireDefault","require","_RendererProxy","_flattenStyle","_AnimatedEvent","_AnimatedNode2","_AnimatedObject","_AnimatedStyle","_invariant","_Object$hasOwn","createAnimatedProps","inputProps","allowlist","nodeKeys","nodes","props","keys","Object","ii","length","key","value","staticValue","hasOwn","node","flatStyle","flattenStyle","AnimatedStyle","from","style","AnimatedNode","AnimatedObject","push","__DEV__","console","error","_callback","_classPrivateFieldLooseKey2","default","_nodeKeys","_nodes","_props","_target","_connectAnimatedView","_disconnectAnimatedView","AnimatedProps","exports","_AnimatedNode","callback","config","_this","_classCallCheck2","_callSuper2","defineProperty","_disconnectAnimatedView2","_connectAnimatedView2","writable","_createAnimatedProps","_createAnimatedProps2","_slicedToArray2","_classPrivateFieldLooseBase2","_inherits2","_createClass2","__getValue","AnimatedEvent","__getHandler","__getValueWithStaticProps","staticProps","assign","maybeNode","staticStyle","flatStaticStyle","mutableStyle","__replaceAnimatedNodeWithValues","__getValueForStyle","__getNativeAnimatedEventTuples","tuples","__isNative","__getAnimatedValue","__attach","__addChild","_superPropGet2","__detach","__removeChild","update","__makeNative","platformConfig","setNativeView","instance","_classPrivateFieldLoo","connectedViewTag","__restoreDefaultValues","NativeAnimatedHelper","API","restoreDefaultValues","__getNativeTag","__getNativeConfig","__getPlatformConfig","propsConfig","type","debugID","__getDebugID","target","invariant","viewTag","findNodeHandle","process","env","NODE_ENV","Error","connectAnimatedNodeToView","disconnectAnimatedNodeFromView","_hasOwnProp","prototype","hasOwnProperty","obj","prop","call"],"sources":["AnimatedProps.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\nimport type {PlatformConfig} from '../AnimatedPlatformConfig';\nimport type {AnimatedNodeConfig} from './AnimatedNode';\nimport type {AnimatedStyleAllowlist} from './AnimatedStyle';\n\nimport NativeAnimatedHelper from '../../../src/private/animated/NativeAnimatedHelper';\nimport {findNodeHandle} from '../../ReactNative/RendererProxy';\nimport flattenStyle from '../../StyleSheet/flattenStyle';\nimport {AnimatedEvent} from '../AnimatedEvent';\nimport AnimatedNode from './AnimatedNode';\nimport AnimatedObject from './AnimatedObject';\nimport AnimatedStyle from './AnimatedStyle';\nimport invariant from 'invariant';\n\nexport type AnimatedPropsAllowlist = $ReadOnly<{\n  style?: ?AnimatedStyleAllowlist,\n  [key: string]: true | AnimatedStyleAllowlist,\n}>;\n\ntype TargetView = {\n  +instance: TargetViewInstance,\n  connectedViewTag: ?number,\n};\ntype TargetViewInstance = React.ElementRef<React.ElementType>;\n\nfunction createAnimatedProps(\n  inputProps: {[string]: mixed},\n  allowlist: ?AnimatedPropsAllowlist,\n): [$ReadOnlyArray<string>, $ReadOnlyArray<AnimatedNode>, {[string]: mixed}] {\n  const nodeKeys: Array<string> = [];\n  const nodes: Array<AnimatedNode> = [];\n  const props: {[string]: mixed} = {};\n\n  const keys = Object.keys(inputProps);\n  for (let ii = 0, length = keys.length; ii < length; ii++) {\n    const key = keys[ii];\n    const value = inputProps[key];\n    let staticValue = value;\n\n    if (allowlist == null || hasOwn(allowlist, key)) {\n      let node;\n      if (key === 'style') {\n        // Ignore `style` if it is not an object (or array).\n        if (typeof value === 'object' && value != null) {\n          // Even if we do not find any `AnimatedNode` values in `style`, we\n          // still need to use the flattened `style` object because static\n          // values can shadow `AnimatedNode` values. We need to make sure that\n          // we propagate the flattened `style` object to the `props` object.\n          const flatStyle = flattenStyle(value as $FlowFixMe);\n          node = AnimatedStyle.from(flatStyle, allowlist?.style, value);\n          staticValue = flatStyle;\n        }\n      } else if (value instanceof AnimatedNode) {\n        node = value;\n      } else {\n        node = AnimatedObject.from(value);\n      }\n      if (node == null) {\n        props[key] = staticValue;\n      } else {\n        nodeKeys.push(key);\n        nodes.push(node);\n        props[key] = node;\n      }\n    } else {\n      if (__DEV__) {\n        // WARNING: This is a potentially expensive check that we should only\n        // do in development. Without this check in development, it might be\n        // difficult to identify which props need to be allowlisted.\n        if (AnimatedObject.from(inputProps[key]) != null) {\n          console.error(\n            `AnimatedProps: ${key} is not allowlisted for animation, but it ` +\n              'contains AnimatedNode values; props allowing animation: ',\n            allowlist,\n          );\n        }\n      }\n      props[key] = value;\n    }\n  }\n\n  return [nodeKeys, nodes, props];\n}\n\nexport default class AnimatedProps extends AnimatedNode {\n  #callback: () => void;\n  #nodeKeys: $ReadOnlyArray<string>;\n  #nodes: $ReadOnlyArray<AnimatedNode>;\n  #props: {[string]: mixed};\n  #target: ?TargetView = null;\n\n  constructor(\n    inputProps: {[string]: mixed},\n    callback: () => void,\n    allowlist?: ?AnimatedPropsAllowlist,\n    config?: ?AnimatedNodeConfig,\n  ) {\n    super(config);\n    const [nodeKeys, nodes, props] = createAnimatedProps(inputProps, allowlist);\n    this.#nodeKeys = nodeKeys;\n    this.#nodes = nodes;\n    this.#props = props;\n    this.#callback = callback;\n  }\n\n  __getValue(): Object {\n    const props: {[string]: mixed} = {};\n\n    const keys = Object.keys(this.#props);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const value = this.#props[key];\n\n      if (value instanceof AnimatedNode) {\n        props[key] = value.__getValue();\n      } else if (value instanceof AnimatedEvent) {\n        props[key] = value.__getHandler();\n      } else {\n        props[key] = value;\n      }\n    }\n\n    return props;\n  }\n\n  /**\n   * Creates a new `props` object that contains the same props as the supplied\n   * `staticProps` object, except with animated nodes for any props that were\n   * created by this `AnimatedProps` instance.\n   */\n  __getValueWithStaticProps(staticProps: Object): Object {\n    const props: {[string]: mixed} = {...staticProps};\n\n    const keys = Object.keys(staticProps);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const maybeNode = this.#props[key];\n\n      if (key === 'style') {\n        const staticStyle = staticProps.style;\n        const flatStaticStyle = flattenStyle(staticStyle);\n        if (maybeNode instanceof AnimatedStyle) {\n          const mutableStyle: {[string]: mixed} =\n            flatStaticStyle == null\n              ? {}\n              : flatStaticStyle === staticStyle\n                ? // Copy the input style, since we'll mutate it below.\n                  {...flatStaticStyle}\n                : // Reuse `flatStaticStyle` if it is a newly created object.\n                  flatStaticStyle;\n\n          maybeNode.__replaceAnimatedNodeWithValues(mutableStyle);\n          props[key] = maybeNode.__getValueForStyle(mutableStyle);\n        } else {\n          props[key] = flatStaticStyle;\n        }\n      } else if (maybeNode instanceof AnimatedNode) {\n        props[key] = maybeNode.__getValue();\n      } else if (maybeNode instanceof AnimatedEvent) {\n        props[key] = maybeNode.__getHandler();\n      }\n    }\n\n    return props;\n  }\n\n  __getNativeAnimatedEventTuples(): $ReadOnlyArray<[string, AnimatedEvent]> {\n    const tuples = [];\n\n    const keys = Object.keys(this.#props);\n    for (let ii = 0, length = keys.length; ii < length; ii++) {\n      const key = keys[ii];\n      const value = this.#props[key];\n\n      if (value instanceof AnimatedEvent && value.__isNative) {\n        tuples.push([key, value]);\n      }\n    }\n\n    return tuples;\n  }\n\n  __getAnimatedValue(): Object {\n    const props: {[string]: mixed} = {};\n\n    const nodeKeys = this.#nodeKeys;\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const key = nodeKeys[ii];\n      const node = nodes[ii];\n      props[key] = node.__getAnimatedValue();\n    }\n\n    return props;\n  }\n\n  __attach(): void {\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__addChild(this);\n    }\n    super.__attach();\n  }\n\n  __detach(): void {\n    if (this.__isNative && this.#target != null) {\n      this.#disconnectAnimatedView(this.#target);\n    }\n    this.#target = null;\n\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__removeChild(this);\n    }\n\n    super.__detach();\n  }\n\n  update(): void {\n    this.#callback();\n  }\n\n  __makeNative(platformConfig: ?PlatformConfig): void {\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const node = nodes[ii];\n      node.__makeNative(platformConfig);\n    }\n\n    if (!this.__isNative) {\n      this.__isNative = true;\n\n      // Since this does not call the super.__makeNative, we need to store the\n      // supplied platformConfig here, before calling #connectAnimatedView\n      // where it will be needed to traverse the graph of attached values.\n      super.__setPlatformConfig(platformConfig);\n\n      if (this.#target != null) {\n        this.#connectAnimatedView(this.#target);\n      }\n    }\n  }\n\n  setNativeView(instance: TargetViewInstance): void {\n    if (this.#target?.instance === instance) {\n      return;\n    }\n    this.#target = {instance, connectedViewTag: null};\n    if (this.__isNative) {\n      this.#connectAnimatedView(this.#target);\n    }\n  }\n\n  #connectAnimatedView(target: TargetView): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    let viewTag: ?number = findNodeHandle(target.instance);\n    if (viewTag == null) {\n      if (process.env.NODE_ENV === 'test') {\n        viewTag = -1;\n      } else {\n        throw new Error('Unable to locate attached view in the native tree');\n      }\n    }\n    NativeAnimatedHelper.API.connectAnimatedNodeToView(\n      this.__getNativeTag(),\n      viewTag,\n    );\n    target.connectedViewTag = viewTag;\n  }\n\n  #disconnectAnimatedView(target: TargetView): void {\n    invariant(this.__isNative, 'Expected node to be marked as \"native\"');\n    const viewTag = target.connectedViewTag;\n    if (viewTag == null) {\n      return;\n    }\n    NativeAnimatedHelper.API.disconnectAnimatedNodeFromView(\n      this.__getNativeTag(),\n      viewTag,\n    );\n    target.connectedViewTag = null;\n  }\n\n  __restoreDefaultValues(): void {\n    // When using the native driver, view properties need to be restored to\n    // their default values manually since react no longer tracks them. This\n    // is needed to handle cases where a prop driven by native animated is removed\n    // after having been changed natively by an animation.\n    if (this.__isNative) {\n      NativeAnimatedHelper.API.restoreDefaultValues(this.__getNativeTag());\n    }\n  }\n\n  __getNativeConfig(): Object {\n    const platformConfig = this.__getPlatformConfig();\n    const propsConfig: {[string]: number} = {};\n\n    const nodeKeys = this.#nodeKeys;\n    const nodes = this.#nodes;\n    for (let ii = 0, length = nodes.length; ii < length; ii++) {\n      const key = nodeKeys[ii];\n      const node = nodes[ii];\n      node.__makeNative(platformConfig);\n      propsConfig[key] = node.__getNativeTag();\n    }\n\n    return {\n      type: 'props',\n      props: propsConfig,\n      debugID: this.__getDebugID(),\n    };\n  }\n}\n\n// Supported versions of JSC do not implement the newer Object.hasOwn. Remove\n// this shim when they do.\n// $FlowIgnore[method-unbinding]\nconst _hasOwnProp = Object.prototype.hasOwnProperty;\nconst hasOwn: (obj: $ReadOnly<{...}>, prop: string) => boolean =\n  // $FlowIgnore[method-unbinding]\n  Object.hasOwn ?? ((obj, prop) => _hasOwnProp.call(obj, prop));\n"],"mappings":"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","ignoreList":[]}