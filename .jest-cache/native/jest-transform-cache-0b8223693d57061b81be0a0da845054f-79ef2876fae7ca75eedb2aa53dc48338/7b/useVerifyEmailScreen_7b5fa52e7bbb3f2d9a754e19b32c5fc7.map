{"version":3,"names":["useCallback","useMemo","useState","useRouter","useAuth","useI18n","useNetwork","cov_1l8xhjmyxq","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","useVerifyEmailScreen","_ref","router","_ref2","isOffline","_ref3","verifyEmail","clearError","isLoading","_ref4","_ref5","_slicedToArray","token","setToken","_ref6","_ref7","email","setEmail","_ref8","_ref9","isSubmitted","setIsSubmitted","errorMessage","canSubmit","Boolean","handleSubmit","_asyncToGenerator","payload","trim","undefined","result","succeeded","error","handleChangeToken","value","handleChangeEmail","handleGoToLogin","push"],"sources":["useVerifyEmailScreen.js"],"sourcesContent":["/**\r\n * useVerifyEmailScreen Hook\r\n * Shared behavior/logic for VerifyEmailScreen across all platforms.\r\n * File: useVerifyEmailScreen.js\r\n */\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useAuth, useI18n, useNetwork } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useVerifyEmailScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const { verifyEmail, clearError, isLoading, errorCode } = useAuth();\r\n  const [token, setToken] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [errorCode, t]\r\n  );\r\n\r\n  const canSubmit = useMemo(\r\n    () => Boolean(token) && !isLoading && !isOffline,\r\n    [isLoading, isOffline, token]\r\n  );\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    if (!canSubmit) return false;\r\n    clearError();\r\n    const payload = {\r\n      token: token.trim(),\r\n      email: email.trim() || undefined,\r\n    };\r\n    const result = await verifyEmail(payload);\r\n    const succeeded = !result?.error;\r\n    if (succeeded) {\r\n      setIsSubmitted(true);\r\n    }\r\n    return succeeded;\r\n  }, [canSubmit, clearError, email, token, verifyEmail]);\r\n\r\n  const handleChangeToken = useCallback((value) => {\r\n    setToken(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleChangeEmail = useCallback((value) => {\r\n    setEmail(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleGoToLogin = useCallback(() => {\r\n    router.push('/login');\r\n  }, [router]);\r\n\r\n  return {\r\n    token,\r\n    email,\r\n    isSubmitted,\r\n    errorMessage,\r\n    isLoading,\r\n    isOffline,\r\n    canSubmit,\r\n    handleSubmit,\r\n    handleChangeToken,\r\n    handleChangeEmail,\r\n    handleGoToLogin,\r\n  };\r\n};\r\n\r\nexport default useVerifyEmailScreen;\r\n\r\n"],"mappings":"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","ignoreList":[]}