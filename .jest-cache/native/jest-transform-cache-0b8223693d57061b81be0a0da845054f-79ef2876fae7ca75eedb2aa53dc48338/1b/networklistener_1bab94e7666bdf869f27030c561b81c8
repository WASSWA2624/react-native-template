424e44e2ba6b99ce13477f3142cda4b7
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.subscribe = exports.stopListening = exports.startListening = exports.getNetworkSnapshot = exports.getIsOnline = exports.default = exports.checkConnectivity = exports.__unsafeResetForTests = exports.__unsafeFlushPendingForTests = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _netinfo = _interopRequireDefault(require("@react-native-community/netinfo"));
var _logging = require("../logging");
var _networkQuality = require("../utils/networkQuality");
var DEFAULT_DEBOUNCE_MS = 300;
var LOW_QUALITY_DOWNLINK_MBPS = 1.5;
var networkState = {
  isOnline: true,
  quality: _networkQuality.NETWORK_QUALITY.UNKNOWN
};
var pendingState = null;
var debounceTimer = null;
var listeners = new Set();
var netInfoUnsubscribe = null;
var normalizeIsOnline = function normalizeIsOnline(state) {
  if (!state || state.isConnected == null) return false;
  if (state.isConnected === false) return false;
  if (state.isInternetReachable === false) return false;
  return true;
};
var resolveNetworkQuality = function resolveNetworkQuality(state, isOnline) {
  if (!isOnline) return _networkQuality.NETWORK_QUALITY.UNKNOWN;
  var details = (state == null ? void 0 : state.details) || {};
  var downlink = typeof details.downlink === 'number' ? details.downlink : null;
  var strength = typeof details.strength === 'number' ? details.strength : null;
  var generation = typeof details.cellularGeneration === 'string' ? details.cellularGeneration : null;
  if (strength !== null && strength >= 0 && strength <= 30) {
    return _networkQuality.NETWORK_QUALITY.LOW;
  }
  if (downlink !== null && downlink <= LOW_QUALITY_DOWNLINK_MBPS) {
    return _networkQuality.NETWORK_QUALITY.LOW;
  }
  if (generation === '2g' || generation === '3g') {
    return _networkQuality.NETWORK_QUALITY.LOW;
  }
  if (generation === '4g' || generation === '5g') {
    return _networkQuality.NETWORK_QUALITY.GOOD;
  }
  if (downlink !== null && downlink > LOW_QUALITY_DOWNLINK_MBPS) {
    return _networkQuality.NETWORK_QUALITY.GOOD;
  }
  if ((state == null ? void 0 : state.type) === 'wifi') {
    return _networkQuality.NETWORK_QUALITY.GOOD;
  }
  return _networkQuality.NETWORK_QUALITY.UNKNOWN;
};
var notify = function notify() {
  listeners.forEach(function (listener) {
    try {
      listener(networkState);
    } catch (_unused) {}
  });
};
var flushPending = function flushPending() {
  if (!pendingState) return;
  networkState = pendingState;
  pendingState = null;
  notify();
};
var scheduleFlush = function scheduleFlush() {
  if (debounceTimer) clearTimeout(debounceTimer);
  debounceTimer = setTimeout(function () {
    debounceTimer = null;
    flushPending();
  }, DEFAULT_DEBOUNCE_MS);
};
var applyState = function applyState(state) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$flush = _ref.flush,
    flush = _ref$flush === void 0 ? false : _ref$flush;
  var nextIsOnline = normalizeIsOnline(state);
  var nextQuality = resolveNetworkQuality(state, nextIsOnline);
  var nextState = {
    isOnline: nextIsOnline,
    quality: nextQuality
  };
  var didChange = networkState.isOnline !== nextIsOnline || networkState.quality !== nextQuality;
  if (!didChange) {
    return networkState;
  }
  if (flush) {
    if (debounceTimer) {
      clearTimeout(debounceTimer);
      debounceTimer = null;
    }
    pendingState = null;
    networkState = nextState;
    _logging.logger.info('Network status changed', nextState);
    notify();
    return networkState;
  }
  pendingState = nextState;
  _logging.logger.info('Network status changed', nextState);
  scheduleFlush();
  return nextState;
};
var checkConnectivity = exports.checkConnectivity = function () {
  var _ref2 = (0, _asyncToGenerator2.default)(function* () {
    var state = yield _netinfo.default.fetch();
    return applyState(state, {
      flush: true
    });
  });
  return function checkConnectivity() {
    return _ref2.apply(this, arguments);
  };
}();
var subscribe = exports.subscribe = function subscribe(listener) {
  listeners.add(listener);
  return function () {
    listeners.delete(listener);
  };
};
var startListening = exports.startListening = function startListening() {
  if (netInfoUnsubscribe) return netInfoUnsubscribe;
  netInfoUnsubscribe = _netinfo.default.addEventListener(function (state) {
    applyState(state);
  });
  return netInfoUnsubscribe;
};
var stopListening = exports.stopListening = function stopListening() {
  if (!netInfoUnsubscribe) return;
  try {
    netInfoUnsubscribe();
  } finally {
    netInfoUnsubscribe = null;
  }
};
var getIsOnline = exports.getIsOnline = function getIsOnline() {
  return networkState.isOnline;
};
var getNetworkSnapshot = exports.getNetworkSnapshot = function getNetworkSnapshot() {
  return Object.assign({}, networkState);
};
var __unsafeResetForTests = exports.__unsafeResetForTests = function __unsafeResetForTests() {
  stopListening();
  networkState = {
    isOnline: true,
    quality: _networkQuality.NETWORK_QUALITY.UNKNOWN
  };
  pendingState = null;
  if (debounceTimer) {
    clearTimeout(debounceTimer);
    debounceTimer = null;
  }
  listeners = new Set();
};
var __unsafeFlushPendingForTests = exports.__unsafeFlushPendingForTests = function __unsafeFlushPendingForTests() {
  flushPending();
};
var _default = exports.default = {
  checkConnectivity: checkConnectivity,
  subscribe: subscribe,
  startListening: startListening,
  stopListening: stopListening,
  getIsOnline: getIsOnline,
  getNetworkSnapshot: getNetworkSnapshot
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbmV0aW5mbyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2xvZ2dpbmciLCJfbmV0d29ya1F1YWxpdHkiLCJERUZBVUxUX0RFQk9VTkNFX01TIiwiTE9XX1FVQUxJVFlfRE9XTkxJTktfTUJQUyIsIm5ldHdvcmtTdGF0ZSIsImlzT25saW5lIiwicXVhbGl0eSIsIk5FVFdPUktfUVVBTElUWSIsIlVOS05PV04iLCJwZW5kaW5nU3RhdGUiLCJkZWJvdW5jZVRpbWVyIiwibGlzdGVuZXJzIiwiU2V0IiwibmV0SW5mb1Vuc3Vic2NyaWJlIiwibm9ybWFsaXplSXNPbmxpbmUiLCJzdGF0ZSIsImlzQ29ubmVjdGVkIiwiaXNJbnRlcm5ldFJlYWNoYWJsZSIsInJlc29sdmVOZXR3b3JrUXVhbGl0eSIsImRldGFpbHMiLCJkb3dubGluayIsInN0cmVuZ3RoIiwiZ2VuZXJhdGlvbiIsImNlbGx1bGFyR2VuZXJhdGlvbiIsIkxPVyIsIkdPT0QiLCJ0eXBlIiwibm90aWZ5IiwiZm9yRWFjaCIsImxpc3RlbmVyIiwiX3VudXNlZCIsImZsdXNoUGVuZGluZyIsInNjaGVkdWxlRmx1c2giLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiYXBwbHlTdGF0ZSIsIl9yZWYiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfcmVmJGZsdXNoIiwiZmx1c2giLCJuZXh0SXNPbmxpbmUiLCJuZXh0UXVhbGl0eSIsIm5leHRTdGF0ZSIsImRpZENoYW5nZSIsImxvZ2dlciIsImluZm8iLCJjaGVja0Nvbm5lY3Rpdml0eSIsImV4cG9ydHMiLCJfcmVmMiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsImRlZmF1bHQiLCJOZXRJbmZvIiwiZmV0Y2giLCJhcHBseSIsInN1YnNjcmliZSIsImFkZCIsImRlbGV0ZSIsInN0YXJ0TGlzdGVuaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0b3BMaXN0ZW5pbmciLCJnZXRJc09ubGluZSIsImdldE5ldHdvcmtTbmFwc2hvdCIsIk9iamVjdCIsImFzc2lnbiIsIl9fdW5zYWZlUmVzZXRGb3JUZXN0cyIsIl9fdW5zYWZlRmx1c2hQZW5kaW5nRm9yVGVzdHMiLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbIm5ldHdvcmsubGlzdGVuZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIE5ldHdvcmsgTGlzdGVuZXJcclxuICogTW9uaXRvcnMgbmV0d29yayBjb25uZWN0aXZpdHlcclxuICogRmlsZTogbmV0d29yay5saXN0ZW5lci5qc1xyXG4gKi9cclxuaW1wb3J0IE5ldEluZm8gZnJvbSAnQHJlYWN0LW5hdGl2ZS1jb21tdW5pdHkvbmV0aW5mbyc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0Bsb2dnaW5nJztcclxuaW1wb3J0IHsgTkVUV09SS19RVUFMSVRZIH0gZnJvbSAnQHV0aWxzL25ldHdvcmtRdWFsaXR5JztcclxuXHJcbmNvbnN0IERFRkFVTFRfREVCT1VOQ0VfTVMgPSAzMDA7XHJcbmNvbnN0IExPV19RVUFMSVRZX0RPV05MSU5LX01CUFMgPSAxLjU7XHJcblxyXG5sZXQgbmV0d29ya1N0YXRlID0ge1xyXG4gIGlzT25saW5lOiB0cnVlLFxyXG4gIHF1YWxpdHk6IE5FVFdPUktfUVVBTElUWS5VTktOT1dOLFxyXG59O1xyXG5sZXQgcGVuZGluZ1N0YXRlID0gbnVsbDtcclxubGV0IGRlYm91bmNlVGltZXIgPSBudWxsO1xyXG5sZXQgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG5sZXQgbmV0SW5mb1Vuc3Vic2NyaWJlID0gbnVsbDtcclxuXHJcbmNvbnN0IG5vcm1hbGl6ZUlzT25saW5lID0gKHN0YXRlKSA9PiB7XHJcbiAgaWYgKCFzdGF0ZSB8fCBzdGF0ZS5pc0Nvbm5lY3RlZCA9PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcbiAgaWYgKHN0YXRlLmlzQ29ubmVjdGVkID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xyXG4gIGlmIChzdGF0ZS5pc0ludGVybmV0UmVhY2hhYmxlID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuY29uc3QgcmVzb2x2ZU5ldHdvcmtRdWFsaXR5ID0gKHN0YXRlLCBpc09ubGluZSkgPT4ge1xyXG4gIGlmICghaXNPbmxpbmUpIHJldHVybiBORVRXT1JLX1FVQUxJVFkuVU5LTk9XTjtcclxuXHJcbiAgY29uc3QgZGV0YWlscyA9IHN0YXRlPy5kZXRhaWxzIHx8IHt9O1xyXG4gIGNvbnN0IGRvd25saW5rID0gdHlwZW9mIGRldGFpbHMuZG93bmxpbmsgPT09ICdudW1iZXInID8gZGV0YWlscy5kb3dubGluayA6IG51bGw7XHJcbiAgY29uc3Qgc3RyZW5ndGggPSB0eXBlb2YgZGV0YWlscy5zdHJlbmd0aCA9PT0gJ251bWJlcicgPyBkZXRhaWxzLnN0cmVuZ3RoIDogbnVsbDtcclxuICBjb25zdCBnZW5lcmF0aW9uID0gdHlwZW9mIGRldGFpbHMuY2VsbHVsYXJHZW5lcmF0aW9uID09PSAnc3RyaW5nJyA/IGRldGFpbHMuY2VsbHVsYXJHZW5lcmF0aW9uIDogbnVsbDtcclxuXHJcbiAgaWYgKHN0cmVuZ3RoICE9PSBudWxsICYmIHN0cmVuZ3RoID49IDAgJiYgc3RyZW5ndGggPD0gMzApIHtcclxuICAgIHJldHVybiBORVRXT1JLX1FVQUxJVFkuTE9XO1xyXG4gIH1cclxuXHJcbiAgaWYgKGRvd25saW5rICE9PSBudWxsICYmIGRvd25saW5rIDw9IExPV19RVUFMSVRZX0RPV05MSU5LX01CUFMpIHtcclxuICAgIHJldHVybiBORVRXT1JLX1FVQUxJVFkuTE9XO1xyXG4gIH1cclxuXHJcbiAgaWYgKGdlbmVyYXRpb24gPT09ICcyZycgfHwgZ2VuZXJhdGlvbiA9PT0gJzNnJykge1xyXG4gICAgcmV0dXJuIE5FVFdPUktfUVVBTElUWS5MT1c7XHJcbiAgfVxyXG5cclxuICBpZiAoZ2VuZXJhdGlvbiA9PT0gJzRnJyB8fCBnZW5lcmF0aW9uID09PSAnNWcnKSB7XHJcbiAgICByZXR1cm4gTkVUV09SS19RVUFMSVRZLkdPT0Q7XHJcbiAgfVxyXG5cclxuICBpZiAoZG93bmxpbmsgIT09IG51bGwgJiYgZG93bmxpbmsgPiBMT1dfUVVBTElUWV9ET1dOTElOS19NQlBTKSB7XHJcbiAgICByZXR1cm4gTkVUV09SS19RVUFMSVRZLkdPT0Q7XHJcbiAgfVxyXG5cclxuICBpZiAoc3RhdGU/LnR5cGUgPT09ICd3aWZpJykge1xyXG4gICAgcmV0dXJuIE5FVFdPUktfUVVBTElUWS5HT09EO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIE5FVFdPUktfUVVBTElUWS5VTktOT1dOO1xyXG59O1xyXG5cclxuY29uc3Qgbm90aWZ5ID0gKCkgPT4ge1xyXG4gIGxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcikgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgbGlzdGVuZXIobmV0d29ya1N0YXRlKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBMaXN0ZW5lciBlcnJvcnMgbXVzdCBub3QgYnJlYWsgdGhlIGdsb2JhbCBjb25uZWN0aXZpdHkgb2JzZXJ2ZXIuXHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBmbHVzaFBlbmRpbmcgPSAoKSA9PiB7XHJcbiAgaWYgKCFwZW5kaW5nU3RhdGUpIHJldHVybjtcclxuICBuZXR3b3JrU3RhdGUgPSBwZW5kaW5nU3RhdGU7XHJcbiAgcGVuZGluZ1N0YXRlID0gbnVsbDtcclxuICBub3RpZnkoKTtcclxufTtcclxuXHJcbmNvbnN0IHNjaGVkdWxlRmx1c2ggPSAoKSA9PiB7XHJcbiAgaWYgKGRlYm91bmNlVGltZXIpIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyKTtcclxuICBkZWJvdW5jZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBkZWJvdW5jZVRpbWVyID0gbnVsbDtcclxuICAgIGZsdXNoUGVuZGluZygpO1xyXG4gIH0sIERFRkFVTFRfREVCT1VOQ0VfTVMpO1xyXG59O1xyXG5cclxuY29uc3QgYXBwbHlTdGF0ZSA9IChzdGF0ZSwgeyBmbHVzaCA9IGZhbHNlIH0gPSB7fSkgPT4ge1xyXG4gIGNvbnN0IG5leHRJc09ubGluZSA9IG5vcm1hbGl6ZUlzT25saW5lKHN0YXRlKTtcclxuICBjb25zdCBuZXh0UXVhbGl0eSA9IHJlc29sdmVOZXR3b3JrUXVhbGl0eShzdGF0ZSwgbmV4dElzT25saW5lKTtcclxuICBjb25zdCBuZXh0U3RhdGUgPSB7IGlzT25saW5lOiBuZXh0SXNPbmxpbmUsIHF1YWxpdHk6IG5leHRRdWFsaXR5IH07XHJcbiAgY29uc3QgZGlkQ2hhbmdlID1cclxuICAgIG5ldHdvcmtTdGF0ZS5pc09ubGluZSAhPT0gbmV4dElzT25saW5lIHx8IG5ldHdvcmtTdGF0ZS5xdWFsaXR5ICE9PSBuZXh0UXVhbGl0eTtcclxuXHJcbiAgaWYgKCFkaWRDaGFuZ2UpIHtcclxuICAgIHJldHVybiBuZXR3b3JrU3RhdGU7XHJcbiAgfVxyXG5cclxuICBpZiAoZmx1c2gpIHtcclxuICAgIGlmIChkZWJvdW5jZVRpbWVyKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dChkZWJvdW5jZVRpbWVyKTtcclxuICAgICAgZGVib3VuY2VUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwZW5kaW5nU3RhdGUgPSBudWxsO1xyXG4gICAgbmV0d29ya1N0YXRlID0gbmV4dFN0YXRlO1xyXG4gICAgbG9nZ2VyLmluZm8oJ05ldHdvcmsgc3RhdHVzIGNoYW5nZWQnLCBuZXh0U3RhdGUpO1xyXG4gICAgbm90aWZ5KCk7XHJcbiAgICByZXR1cm4gbmV0d29ya1N0YXRlO1xyXG4gIH1cclxuXHJcbiAgcGVuZGluZ1N0YXRlID0gbmV4dFN0YXRlO1xyXG4gIGxvZ2dlci5pbmZvKCdOZXR3b3JrIHN0YXR1cyBjaGFuZ2VkJywgbmV4dFN0YXRlKTtcclxuICBzY2hlZHVsZUZsdXNoKCk7XHJcblxyXG4gIHJldHVybiBuZXh0U3RhdGU7XHJcbn07XHJcblxyXG4vKipcclxuICogRmV0Y2ggY3VycmVudCBjb25uZWN0aXZpdHkgZnJvbSBOZXRJbmZvIGFuZCB1cGRhdGUgaW50ZXJuYWwgc3RhdGUuXHJcbiAqIE5vdGlmaWVzIHN1YnNjcmliZXJzIG9ubHkgd2hlbiB0aGUgb25saW5lIHN0YXR1cyBjaGFuZ2VzLlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNoZWNrQ29ubmVjdGl2aXR5ID0gYXN5bmMgKCkgPT4ge1xyXG4gIGNvbnN0IHN0YXRlID0gYXdhaXQgTmV0SW5mby5mZXRjaCgpO1xyXG4gIHJldHVybiBhcHBseVN0YXRlKHN0YXRlLCB7IGZsdXNoOiB0cnVlIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFN1YnNjcmliZSB0byBvbmxpbmUtc3RhdHVzIGNoYW5nZXMuXHJcbiAqIFJldHVybnMgYW4gdW5zdWJzY3JpYmUgZnVuY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlID0gKGxpc3RlbmVyKSA9PiB7XHJcbiAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XHJcbiAgcmV0dXJuICgpID0+IHtcclxuICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gIH07XHJcbn07XHJcblxyXG4vKipcclxuICogU3RhcnQgbGlzdGVuaW5nIHRvIE5ldEluZm8gY2hhbmdlcy5cclxuICogSWRlbXBvdGVudDogc3Vic2VxdWVudCBjYWxscyByZXR1cm4gdGhlIHNhbWUgdW5zdWJzY3JpYmUgZnVuY3Rpb24uXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc3RhcnRMaXN0ZW5pbmcgPSAoKSA9PiB7XHJcbiAgaWYgKG5ldEluZm9VbnN1YnNjcmliZSkgcmV0dXJuIG5ldEluZm9VbnN1YnNjcmliZTtcclxuXHJcbiAgbmV0SW5mb1Vuc3Vic2NyaWJlID0gTmV0SW5mby5hZGRFdmVudExpc3RlbmVyKChzdGF0ZSkgPT4ge1xyXG4gICAgYXBwbHlTdGF0ZShzdGF0ZSk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBuZXRJbmZvVW5zdWJzY3JpYmU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc3RvcExpc3RlbmluZyA9ICgpID0+IHtcclxuICBpZiAoIW5ldEluZm9VbnN1YnNjcmliZSkgcmV0dXJuO1xyXG4gIHRyeSB7XHJcbiAgICBuZXRJbmZvVW5zdWJzY3JpYmUoKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgbmV0SW5mb1Vuc3Vic2NyaWJlID0gbnVsbDtcclxuICB9XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZ2V0SXNPbmxpbmUgPSAoKSA9PiBuZXR3b3JrU3RhdGUuaXNPbmxpbmU7XHJcbmV4cG9ydCBjb25zdCBnZXROZXR3b3JrU25hcHNob3QgPSAoKSA9PiAoeyAuLi5uZXR3b3JrU3RhdGUgfSk7XHJcblxyXG4vKipcclxuICogVGVzdGluZy1vbmx5IHJlc2V0IGhlbHBlciB0byBhdm9pZCBzdGF0ZSBsZWFraW5nIGFjcm9zcyB1bml0IHRlc3RzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IF9fdW5zYWZlUmVzZXRGb3JUZXN0cyA9ICgpID0+IHtcclxuICBzdG9wTGlzdGVuaW5nKCk7XHJcbiAgbmV0d29ya1N0YXRlID0geyBpc09ubGluZTogdHJ1ZSwgcXVhbGl0eTogTkVUV09SS19RVUFMSVRZLlVOS05PV04gfTtcclxuICBwZW5kaW5nU3RhdGUgPSBudWxsO1xyXG4gIGlmIChkZWJvdW5jZVRpbWVyKSB7XHJcbiAgICBjbGVhclRpbWVvdXQoZGVib3VuY2VUaW1lcik7XHJcbiAgICBkZWJvdW5jZVRpbWVyID0gbnVsbDtcclxuICB9XHJcbiAgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRlc3Rpbmctb25seSBoZWxwZXIgdG8gZmx1c2ggcGVuZGluZyBzdGF0ZSBzYWZlbHkuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgX191bnNhZmVGbHVzaFBlbmRpbmdGb3JUZXN0cyA9ICgpID0+IHtcclxuICBmbHVzaFBlbmRpbmcoKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBjaGVja0Nvbm5lY3Rpdml0eSxcclxuICBzdWJzY3JpYmUsXHJcbiAgc3RhcnRMaXN0ZW5pbmcsXHJcbiAgc3RvcExpc3RlbmluZyxcclxuICBnZXRJc09ubGluZSxcclxuICBnZXROZXR3b3JrU25hcHNob3QsXHJcbn07XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUYsT0FBQTtBQUVBLElBQU1HLG1CQUFtQixHQUFHLEdBQUc7QUFDL0IsSUFBTUMseUJBQXlCLEdBQUcsR0FBRztBQUVyQyxJQUFJQyxZQUFZLEdBQUc7RUFDakJDLFFBQVEsRUFBRSxJQUFJO0VBQ2RDLE9BQU8sRUFBRUMsK0JBQWUsQ0FBQ0M7QUFDM0IsQ0FBQztBQUNELElBQUlDLFlBQVksR0FBRyxJQUFJO0FBQ3ZCLElBQUlDLGFBQWEsR0FBRyxJQUFJO0FBQ3hCLElBQUlDLFNBQVMsR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztBQUN6QixJQUFJQyxrQkFBa0IsR0FBRyxJQUFJO0FBRTdCLElBQU1DLGlCQUFpQixHQUFHLFNBQXBCQSxpQkFBaUJBLENBQUlDLEtBQUssRUFBSztFQUNuQyxJQUFJLENBQUNBLEtBQUssSUFBSUEsS0FBSyxDQUFDQyxXQUFXLElBQUksSUFBSSxFQUFFLE9BQU8sS0FBSztFQUNyRCxJQUFJRCxLQUFLLENBQUNDLFdBQVcsS0FBSyxLQUFLLEVBQUUsT0FBTyxLQUFLO0VBQzdDLElBQUlELEtBQUssQ0FBQ0UsbUJBQW1CLEtBQUssS0FBSyxFQUFFLE9BQU8sS0FBSztFQUNyRCxPQUFPLElBQUk7QUFDYixDQUFDO0FBRUQsSUFBTUMscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUFxQkEsQ0FBSUgsS0FBSyxFQUFFVixRQUFRLEVBQUs7RUFDakQsSUFBSSxDQUFDQSxRQUFRLEVBQUUsT0FBT0UsK0JBQWUsQ0FBQ0MsT0FBTztFQUU3QyxJQUFNVyxPQUFPLEdBQUcsQ0FBQUosS0FBSyxvQkFBTEEsS0FB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