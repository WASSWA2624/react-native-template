{"version":3,"names":["_react","require","_i18n","_validator","_types","formatPhoneNumber","value","digits","replace","length","slice","useTextField","_ref","_ref$value","onChangeText","onChange","_ref$type","type","validate","_ref$required","required","maxLength","_ref$debounceMs","debounceMs","_ref$autoFormat","autoFormat","normalizedValue","_useState","useState","_useState2","_slicedToArray2","default","internalValue","setInternalValue","_useState3","VALIDATION_STATES","DEFAULT","_useState4","validationState","setValidationState","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","isFocused","setIsFocused","debounceTimerRef","useRef","useEffect","validateValue","useCallback","val","ERROR","tSync","max","isValidEmail","isValidUrl","result","valid","error","SUCCESS","handleChange","newValue","formattedValue","current","clearTimeout","setTimeout","target","handleFocus","handleBlur","characterCount","_default","exports"],"sources":["useTextField.js"],"sourcesContent":["/**\r\n * TextField Hook\r\n * Shared logic for TextField component (validation, formatting, debounce)\r\n * File: useTextField.js\r\n */\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { tSync } from '@i18n';\r\nimport { isValidEmail, isValidUrl } from '@utils/validator';\r\nimport { VALIDATION_STATES } from './types';\r\n\r\n/**\r\n * Format phone number (basic formatting)\r\n * @param {string} value - Phone number string\r\n * @returns {string} Formatted phone number\r\n */\r\nconst formatPhoneNumber = (value) => {\r\n  if (!value) return '';\r\n  // Remove all non-digit characters\r\n  const digits = value.replace(/\\D/g, '');\r\n  // Format as (XXX) XXX-XXXX for US numbers\r\n  if (digits.length <= 3) return digits;\r\n  if (digits.length <= 6) return `(${digits.slice(0, 3)}) ${digits.slice(3)}`;\r\n  return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6, 10)}`;\r\n};\r\n\r\n/**\r\n * Custom hook for TextField component logic\r\n * @param {Object} props - TextField props\r\n * @param {string} props.value - Input value\r\n * @param {Function} props.onChangeText - Change handler\r\n * @param {Function} props.onChange - Change handler (web)\r\n * @param {string} props.type - Input type\r\n * @param {Function} props.validate - Custom validation function\r\n * @param {boolean} props.required - Required field\r\n * @param {number} props.maxLength - Maximum length\r\n * @param {number} props.debounceMs - Debounce delay in milliseconds\r\n * @param {boolean} props.autoFormat - Enable auto-formatting\r\n * @returns {Object} TextField state and handlers\r\n */\r\nconst useTextField = ({\r\n  value = '',\r\n  onChangeText,\r\n  onChange,\r\n  type = 'text',\r\n  validate,\r\n  required = false,\r\n  maxLength,\r\n  debounceMs = 300,\r\n  autoFormat = false,\r\n}) => {\r\n  const normalizedValue = value == null ? '' : value;\r\n  const [internalValue, setInternalValue] = useState(normalizedValue);\r\n  const [validationState, setValidationState] = useState(VALIDATION_STATES.DEFAULT);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const debounceTimerRef = useRef(null);\r\n\r\n  // Sync internal value with external value\r\n  useEffect(() => {\r\n    setInternalValue(value == null ? '' : value);\r\n  }, [value]);\r\n\r\n  // Validate value\r\n  const validateValue = useCallback(\r\n    (val) => {\r\n      if (!val && !required) {\r\n        setValidationState(VALIDATION_STATES.DEFAULT);\r\n        setErrorMessage('');\r\n        return true;\r\n      }\r\n\r\n      if (required && !val) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.required'));\r\n        return false;\r\n      }\r\n\r\n      if (maxLength && val.length > maxLength) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.maxLength', { max: maxLength }));\r\n        return false;\r\n      }\r\n\r\n      // Type-specific validation\r\n      if (type === 'email' && val && !isValidEmail(val)) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.invalidEmail'));\r\n        return false;\r\n      }\r\n\r\n      if (type === 'url' && val && !isValidUrl(val)) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.invalidUrl'));\r\n        return false;\r\n      }\r\n\r\n      // Custom validation\r\n      if (validate) {\r\n        const result = validate(val);\r\n        if (typeof result === 'boolean') {\r\n          if (!result) {\r\n            setValidationState(VALIDATION_STATES.ERROR);\r\n            setErrorMessage(tSync('forms.validation.invalidValue'));\r\n            return false;\r\n          }\r\n        } else if (result && !result.valid) {\r\n          setValidationState(VALIDATION_STATES.ERROR);\r\n          setErrorMessage(result.error || tSync('forms.validation.invalidValue'));\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Success state if value is valid and not empty\r\n      if (val) {\r\n        setValidationState(VALIDATION_STATES.SUCCESS);\r\n      } else {\r\n        setValidationState(VALIDATION_STATES.DEFAULT);\r\n      }\r\n      setErrorMessage('');\r\n      return true;\r\n    },\r\n    [type, required, maxLength, validate]\r\n  );\r\n\r\n  // Handle value change with debounce\r\n  const handleChange = useCallback(\r\n    (newValue) => {\r\n      // Auto-format if enabled\r\n      let formattedValue = newValue;\r\n      if (autoFormat && type === 'tel') {\r\n        formattedValue = formatPhoneNumber(newValue);\r\n      }\r\n\r\n      setInternalValue(formattedValue);\r\n\r\n      // Clear existing debounce timer\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n\r\n      // Immediate validation for required fields\r\n      if (required && !formattedValue) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.required'));\r\n      } else {\r\n        setValidationState(VALIDATION_STATES.DEFAULT);\r\n        setErrorMessage('');\r\n      }\r\n\r\n      // Debounced validation and onChange\r\n      debounceTimerRef.current = setTimeout(() => {\r\n        validateValue(formattedValue);\r\n        if (onChangeText) {\r\n          onChangeText(formattedValue);\r\n        }\r\n        if (onChange) {\r\n          onChange({ target: { value: formattedValue } });\r\n        }\r\n      }, debounceMs);\r\n    },\r\n    [onChangeText, onChange, type, required, debounceMs, autoFormat, validateValue]\r\n  );\r\n\r\n  // Handle focus\r\n  const handleFocus = useCallback(() => {\r\n    setIsFocused(true);\r\n  }, []);\r\n\r\n  // Handle blur\r\n  const handleBlur = useCallback(() => {\r\n    setIsFocused(false);\r\n    validateValue(internalValue);\r\n  }, [internalValue, validateValue]);\r\n\r\n  // Cleanup debounce timer on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (debounceTimerRef.current) {\r\n        clearTimeout(debounceTimerRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    value: internalValue,\r\n    validationState,\r\n    errorMessage,\r\n    isFocused,\r\n    handleChange,\r\n    handleFocus,\r\n    handleBlur,\r\n    characterCount: internalValue ? internalValue.length : 0,\r\n  };\r\n};\r\n\r\nexport default useTextField;\r\n\r\n"],"mappings":"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","ignoreList":[]}