{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactRedux","_toolkit","_useShellBanners","_rootReducer","_network","_networkQuality","_jsxRuntime","createMockStore","preloadedState","arguments","length","undefined","configureStore","reducer","rootReducer","TestComponent","_ref","onResult","result","useShellBanners","maintenanceMode","React","useEffect","describe","beforeEach","jest","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","it","_asyncToGenerator2","default","store","network","isOnline","isSyncing","quality","NETWORK_QUALITY","UNKNOWN","render","jsx","Provider","children","value","waitFor","expect","some","banner","id","toBe","LOW","act","dispatch","networkActions","setOnline","advanceTimersByTime"],"sources":["useShellBanners.test.js"],"sourcesContent":["/**\r\n * useShellBanners Hook Tests\r\n * File: useShellBanners.test.js\r\n */\r\nimport React from 'react';\r\nimport { act, render, waitFor } from '@testing-library/react-native';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport useShellBanners from '@hooks/useShellBanners';\r\nimport rootReducer from '@store/rootReducer';\r\nimport { actions as networkActions } from '@store/slices/network.slice';\r\nimport { NETWORK_QUALITY } from '@utils/networkQuality';\r\n\r\nconst createMockStore = (preloadedState = {}) =>\r\n  configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState,\r\n  });\r\n\r\nconst TestComponent = ({ onResult }) => {\r\n  const result = useShellBanners({ maintenanceMode: false });\r\n\r\n  React.useEffect(() => {\r\n    onResult(result);\r\n  });\r\n\r\n  return null;\r\n};\r\n\r\ndescribe('useShellBanners', () => {\r\n  beforeEach(() => {\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.runOnlyPendingTimers();\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it('returns offline banner when offline', async () => {\r\n    const store = createMockStore({\r\n      network: { isOnline: false, isSyncing: false, quality: NETWORK_QUALITY.UNKNOWN },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.some((banner) => banner.id === 'offline')).toBe(true);\r\n    });\r\n  });\r\n\r\n  it('returns low quality banner when online with low quality', async () => {\r\n    const store = createMockStore({\r\n      network: { isOnline: true, isSyncing: false, quality: NETWORK_QUALITY.LOW },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.some((banner) => banner.id === 'low-quality')).toBe(true);\r\n    });\r\n  });\r\n\r\n  it('shows and hides the online banner after reconnect', async () => {\r\n    const store = createMockStore({\r\n      network: { isOnline: false, isSyncing: false, quality: NETWORK_QUALITY.UNKNOWN },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.some((banner) => banner.id === 'offline')).toBe(true);\r\n    });\r\n\r\n    act(() => {\r\n      store.dispatch(networkActions.setOnline(true));\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(result.some((banner) => banner.id === 'online')).toBe(true);\r\n    });\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(4000);\r\n    });\r\n\r\n    await waitFor(() => {\r\n      expect(result.some((banner) => banner.id === 'online')).toBe(false);\r\n    });\r\n  });\r\n});\r\n"],"mappings":";;AAIA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,gBAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,YAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AACA,IAAAO,eAAA,GAAAP,OAAA;AAAwD,IAAAQ,WAAA,GAAAR,OAAA;AAExD,IAAMS,eAAe,GAAG,SAAlBA,eAAeA,CAAA;EAAA,IAAIC,cAAc,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAAA,OAC1C,IAAAG,uBAAc,EAAC;IACbC,OAAO,EAAEC,oBAAW;IACpBN,cAAc,EAAdA;EACF,CAAC,CAAC;AAAA;AAEJ,IAAMO,aAAa,GAAG,SAAhBA,aAAaA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAC/B,IAAMC,MAAM,GAAG,IAAAC,wBAAe,EAAC;IAAEC,eAAe,EAAE;EAAM,CAAC,CAAC;EAE1DC,cAAK,CAACC,SAAS,CAAC,YAAM;IACpBL,QAAQ,CAACC,MAAM,CAAC;EAClB,CAAC,CAAC;EAEF,OAAO,IAAI;AACb,CAAC;AAEDK,QAAQ,CAAC,iBAAiB,EAAE,YAAM;EAChCC,UAAU,CAAC,YAAM;IACfC,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,SAAS,CAAC,YAAM;IACdF,IAAI,CAACG,oBAAoB,CAAC,CAAC;IAC3BH,IAAI,CAACI,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,qCAAqC,MAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;IACpD,IAAMC,KAAK,GAAG1B,eAAe,CAAC;MAC5B2B,OAAO,EAAE;QAAEC,QAAQ,EAAE,KAAK;QAAEC,SAAS,EAAE,KAAK;QAAEC,OAAO,EAAEC,+BAAe,CAACC;MAAQ;IACjF,CAAC,CAAC;IAEF,IAAIrB,MAAM;IACV,IAAAsB,mBAAM,EACJ,IAAAlC,WAAA,CAAAmC,GAAA,EAACzC,WAAA,CAAA0C,QAAQ;MAACT,KAAK,EAAEA,KAAM;MAAAU,QAAA,EACrB,IAAArC,WAAA,CAAAmC,GAAA,EAAC1B,aAAa;QAACE,QAAQ,EAAE,SAAVA,QAAQA,CAAG2B,KAAK;UAAA,OAAM1B,MAAM,GAAG0B,KAAK;QAAA;MAAE,CAAE;IAAC,CAChD,CACZ,CAAC;IAED,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,UAACC,MAAM;QAAA,OAAKA,MAAM,CAACC,EAAE,KAAK,SAAS;MAAA,EAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACrE,CAAC,CAAC;EACJ,CAAC,EAAC;EAEFpB,EAAE,CAAC,yDAAyD,MAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;IACxE,IAAMC,KAAK,GAAG1B,eAAe,CAAC;MAC5B2B,OAAO,EAAE;QAAEC,QAAQ,EAAE,IAAI;QAAEC,SAAS,EAAE,KAAK;QAAEC,OAAO,EAAEC,+BAAe,CAACa;MAAI;IAC5E,CAAC,CAAC;IAEF,IAAIjC,MAAM;IACV,IAAAsB,mBAAM,EACJ,IAAAlC,WAAA,CAAAmC,GAAA,EAACzC,WAAA,CAAA0C,QAAQ;MAACT,KAAK,EAAEA,KAAM;MAAAU,QAAA,EACrB,IAAArC,WAAA,CAAAmC,GAAA,EAAC1B,aAAa;QAACE,QAAQ,EAAE,SAAVA,QAAQA,CAAG2B,KAAK;UAAA,OAAM1B,MAAM,GAAG0B,KAAK;QAAA;MAAE,CAAE;IAAC,CAChD,CACZ,CAAC;IAED,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,UAACC,MAAM;QAAA,OAAKA,MAAM,CAACC,EAAE,KAAK,aAAa;MAAA,EAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACzE,CAAC,CAAC;EACJ,CAAC,EAAC;EAEFpB,EAAE,CAAC,mDAAmD,MAAAC,kBAAA,CAAAC,OAAA,EAAE,aAAY;IAClE,IAAMC,KAAK,GAAG1B,eAAe,CAAC;MAC5B2B,OAAO,EAAE;QAAEC,QAAQ,EAAE,KAAK;QAAEC,SAAS,EAAE,KAAK;QAAEC,OAAO,EAAEC,+BAAe,CAACC;MAAQ;IACjF,CAAC,CAAC;IAEF,IAAIrB,MAAM;IACV,IAAAsB,mBAAM,EACJ,IAAAlC,WAAA,CAAAmC,GAAA,EAACzC,WAAA,CAAA0C,QAAQ;MAACT,KAAK,EAAEA,KAAM;MAAAU,QAAA,EACrB,IAAArC,WAAA,CAAAmC,GAAA,EAAC1B,aAAa;QAACE,QAAQ,EAAE,SAAVA,QAAQA,CAAG2B,KAAK;UAAA,OAAM1B,MAAM,GAAG0B,KAAK;QAAA;MAAE,CAAE;IAAC,CAChD,CACZ,CAAC;IAED,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,UAACC,MAAM;QAAA,OAAKA,MAAM,CAACC,EAAE,KAAK,SAAS;MAAA,EAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACrE,CAAC,CAAC;IAEF,IAAAE,gBAAG,EAAC,YAAM;MACRnB,KAAK,CAACoB,QAAQ,CAACC,gBAAc,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC,CAAC;IAEF,MAAM,IAAAV,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,UAACC,MAAM;QAAA,OAAKA,MAAM,CAACC,EAAE,KAAK,QAAQ;MAAA,EAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IACpE,CAAC,CAAC;IAEF,IAAAE,gBAAG,EAAC,YAAM;MACR3B,IAAI,CAAC+B,mBAAmB,CAAC,IAAI,CAAC;IAChC,CAAC,CAAC;IAEF,MAAM,IAAAX,oBAAO,EAAC,YAAM;MAClBC,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,CAAC,UAACC,MAAM;QAAA,OAAKA,MAAM,CAACC,EAAE,KAAK,QAAQ;MAAA,EAAC,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC;IACrE,CAAC,CAAC;EACJ,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}