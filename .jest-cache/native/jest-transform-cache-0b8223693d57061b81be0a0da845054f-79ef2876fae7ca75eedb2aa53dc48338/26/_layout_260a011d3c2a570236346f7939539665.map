{"version":3,"names":["_react","_interopRequireWildcard","require","_expoRouter","_guards","_layouts","_GlobalFooter","_jsxRuntime","cov_giatckpvh","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","AuthLayout","router","useRouter","_ref","useAuthGuard","skipRedirect","authenticated","hasRedirected","useRef","useEffect","current","replace","jsx","AuthFrame","testID","footer","default","variant","FOOTER_VARIANTS","AUTH","children","Slot","_default","exports"],"sources":["_layout.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Slot, useRouter } from 'expo-router';\r\nimport { useAuthGuard } from '@navigation/guards';\r\nimport { AuthFrame } from '@platform/layouts';\r\nimport GlobalFooter, { FOOTER_VARIANTS } from '@platform/components/navigation/GlobalFooter';\r\n\r\n/**\r\n * Auth Group Layout\r\n * \r\n * Layout wrapper for authentication routes (login, register, etc.).\r\n * \r\n * Per app-router.mdc:\r\n * - Layouts use `_layout.jsx`, default exports, `<Slot />` for child routes\r\n * - Guard placement: guards in layouts, not screens\r\n * \r\n * This layout redirects authenticated users away from auth routes (e.g., login when already logged in).\r\n * Per Step 7.14: Uses useAuthGuard hook with skipRedirect option to get auth state,\r\n * then handles redirect of authenticated users to home route.\r\n */\r\nconst AuthLayout = () => {\r\n  const router = useRouter();\r\n  const { authenticated } = useAuthGuard({ skipRedirect: true });\r\n  \r\n  // Use ref to track if redirect has been performed to prevent multiple redirects\r\n  const hasRedirected = useRef(false);\r\n  \r\n  useEffect(() => {\r\n    // Redirect authenticated users to home route\r\n    if (authenticated && !hasRedirected.current) {\r\n      hasRedirected.current = true;\r\n      router.replace('/home');\r\n    } else if (!authenticated) {\r\n      // Reset redirect flag when unauthenticated\r\n      hasRedirected.current = false;\r\n    }\r\n  }, [authenticated, router]);\r\n  \r\n  return (\r\n    <AuthFrame\r\n      testID=\"auth-route-layout\"\r\n      footer={(\r\n        <GlobalFooter\r\n          variant={FOOTER_VARIANTS.AUTH}\r\n          testID=\"auth-footer\"\r\n        />\r\n      )}\r\n    >\r\n      <Slot />\r\n    </AuthFrame>\r\n  );\r\n};\r\n\r\nexport default AuthLayout;\r\n\r\n"],"mappings":";;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAL,uBAAA,CAAAC,OAAA;AAA6F,IAAAK,WAAA,GAAAL,OAAA;AAAA,SAAAM,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;IAAA;IAAAE,KAAA;MAAA;QAAAC,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAI,IAAA;QAAAC,IAAA;UAAAN,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAK,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;IAAA;IAAAO,SAAA;MAAA;QAAAD,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAD,IAAA;MAAA;MAAA;QAAAM,GAAA;UAAAP,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;QAAAO,IAAA;QAAAC,SAAA;UAAAV,KAAA;YAAAC,IAAA;YAAAC,MAAA;UAAA;UAAAC,GAAA;YAAAF,IAAA;YAAAC,MAAA;UAAA;QAAA;UAAAF,KAAA;YAAAC,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;UAAAR,GAAA;YAAAF,IAAA,EAAAU,SAAA;YAAAT,MAAA,EAAAS;UAAA;QAAA;QAAAV,IAAA;MAAA;IAAA;IAAAW,CAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,eAAA;IAAArB,IAAA;EAAA;EAAA,IAAAsB,QAAA,GAAArB,MAAA,CAAAE,GAAA,MAAAF,MAAA,CAAAE,GAAA;EAAA,KAAAmB,QAAA,CAAAvB,IAAA,KAAAuB,QAAA,CAAAvB,IAAA,EAAAC,IAAA,KAAAA,IAAA;IAAAsB,QAAA,CAAAvB,IAAA,IAAAK,YAAA;EAAA;EAAA,IAAAmB,cAAA,GAAAD,QAAA,CAAAvB,IAAA;EAAA;IAAAD,aAAA,YAAAA,CAAA;MAAA,OAAAyB,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAzB,aAAA;AAAAA,aAAA,GAAAoB,CAAA;AAe7F,IAAMM,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;EAAA1B,aAAA,GAAAqB,CAAA;EACvB,IAAMM,MAAM,IAAA3B,aAAA,GAAAoB,CAAA,OAAG,IAAAQ,qBAAS,EAAC,CAAC;EAC1B,IAAAC,IAAA,IAAA7B,aAAA,GAAAoB,CAAA,OAA0B,IAAAU,oBAAY,EAAC;MAAEC,YAAY,EAAE;IAAK,CAAC,CAAC;IAAtDC,aAAa,GAAAH,IAAA,CAAbG,aAAa;EAGrB,IAAMC,aAAa,IAAAjC,aAAA,GAAAoB,CAAA,OAAG,IAAAc,aAAM,EAAC,KAAK,CAAC;EAAClC,aAAA,GAAAoB,CAAA;EAEpC,IAAAe,gBAAS,EAAC,YAAM;IAAAnC,aAAA,GAAAqB,CAAA;IAAArB,aAAA,GAAAoB,CAAA;IAEd,IAAI,CAAApB,aAAA,GAAAsB,CAAA,UAAAU,aAAa,MAAAhC,aAAA,GAAAsB,CAAA,UAAI,CAACW,aAAa,CAACG,OAAO,GAAE;MAAApC,aAAA,GAAAsB,CAAA;MAAAtB,aAAA,GAAAoB,CAAA;MAC3Ca,aAAa,CAACG,OAAO,GAAG,IAAI;MAACpC,aAAA,GAAAoB,CAAA;MAC7BO,MAAM,CAACU,OAAO,CAAC,OAAO,CAAC;IACzB,CAAC,MAAM;MAAArC,aAAA,GAAAsB,CAAA;MAAAtB,aAAA,GAAAoB,CAAA;MAAA,IAAI,CAACY,aAAa,EAAE;QAAAhC,aAAA,GAAAsB,CAAA;QAAAtB,aAAA,GAAAoB,CAAA;QAEzBa,aAAa,CAACG,OAAO,GAAG,KAAK;MAC/B,CAAC;QAAApC,aAAA,GAAAsB,CAAA;MAAA;IAAD;EACF,CAAC,EAAE,CAACU,aAAa,EAAEL,MAAM,CAAC,CAAC;EAAC3B,aAAA,GAAAoB,CAAA;EAE5B,OACE,IAAArB,WAAA,CAAAuC,GAAA,EAACzC,QAAA,CAAA0C,SAAS;IACRC,MAAM,EAAC,mBAAmB;IAC1BC,MAAM,EACJ,IAAA1C,WAAA,CAAAuC,GAAA,EAACxC,aAAA,CAAA4C,OAAY;MACXC,OAAO,EAAEC,6BAAe,CAACC,IAAK;MAC9BL,MAAM,EAAC;IAAa,CACrB,CACD;IAAAM,QAAA,EAEF,IAAA/C,WAAA,CAAAuC,GAAA,EAAC3C,WAAA,CAAAoD,IAAI,IAAE;EAAC,CACC,CAAC;AAEhB,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAP,OAAA,GAEahB,UAAU","ignoreList":[]}