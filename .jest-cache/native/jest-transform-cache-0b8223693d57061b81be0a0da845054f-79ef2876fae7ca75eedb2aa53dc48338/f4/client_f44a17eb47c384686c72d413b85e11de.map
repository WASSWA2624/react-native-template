{"version":3,"names":["TIMEOUTS","handleError","attachAuthHeader","handleAuthError","cov_1arejjlc0i","s","apiClient","_ref","_asyncToGenerator","config","f","_ref2","url","_ref2$method","method","b","body","_ref2$headers","headers","_ref2$timeout","timeout","API_REQUEST","authConfig","controller","AbortController","timeoutId","setTimeout","abort","_response$headers","response","fetch","Object","assign","JSON","stringify","undefined","signal","clearTimeout","ok","error","status","statusText","message","contentType","get","hasJson","includes","data","json","name","Error","_x","apply","arguments"],"sources":["client.js"],"sourcesContent":["/**\r\n * API Client\r\n * Centralized fetch wrapper\r\n * File: client.js\r\n */\r\nimport { TIMEOUTS } from '@config';\r\nimport { handleError } from '@errors';\r\nimport { attachAuthHeader, handleAuthError } from './interceptors';\r\n\r\nconst apiClient = async (config) => {\r\n  const {\r\n    url,\r\n    method = 'GET',\r\n    body,\r\n    headers = {},\r\n    timeout = TIMEOUTS.API_REQUEST,\r\n  } = config;\r\n\r\n  // Attach auth header\r\n  const authConfig = await attachAuthHeader({ url, method, body, headers });\r\n\r\n  // Create abort controller for timeout\r\n  const controller = new AbortController();\r\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\r\n\r\n  try {\r\n    const response = await fetch(authConfig.url, {\r\n      method: authConfig.method,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        ...authConfig.headers,\r\n      },\r\n      body: authConfig.body ? JSON.stringify(authConfig.body) : undefined,\r\n      signal: controller.signal,\r\n    });\r\n\r\n    clearTimeout(timeoutId);\r\n\r\n    if (!response.ok) {\r\n      const error = {\r\n        status: response.status,\r\n        statusText: response.statusText,\r\n        message: `API request failed: ${response.statusText}`,\r\n      };\r\n      throw await handleAuthError(error);\r\n    }\r\n\r\n    const contentType = response.headers?.get?.('content-type') || '';\r\n    const hasJson = contentType.includes('application/json');\r\n    const data = hasJson ? await response.json() : null;\r\n    return { data, status: response.status };\r\n  } catch (error) {\r\n    clearTimeout(timeoutId);\r\n    if (error.name === 'AbortError') {\r\n      throw handleError(new Error('Request timeout'), { url });\r\n    }\r\n    throw await handleAuthError(error);\r\n  }\r\n};\r\n\r\nexport { apiClient };\r\n\r\n"],"mappings":"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","ignoreList":[]}