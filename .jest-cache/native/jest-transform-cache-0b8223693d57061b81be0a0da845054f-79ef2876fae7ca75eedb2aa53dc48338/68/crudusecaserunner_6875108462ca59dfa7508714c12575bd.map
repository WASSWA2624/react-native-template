{"version":3,"names":["runCrudUsecaseTests","exports","_ref","_ref2","list","get","create","update","remove","_ref$extraActions","extraActions","cov_a96o22ij3","b","queueRequestIfOffline","_ref2$payload","payload","name","_ref2$id","id","_ref2$listParams","listParams","page","f","s","it","_asyncToGenerator2","default","mockResolvedValue","expect","resolves","toBeDefined","action","fn","apply","_toConsumableArray2","args","toEqual","Object","assign","rejects"],"sources":["crud-usecase-runner.js"],"sourcesContent":["/**\r\n * CRUD Usecase Test Helpers\r\n * File: crud-usecase-runner.js\r\n */\r\nconst runCrudUsecaseTests = (\r\n  {\r\n    list,\r\n    get,\r\n    create,\r\n    update,\r\n    remove,\r\n    extraActions = [],\r\n  },\r\n  {\r\n    queueRequestIfOffline,\r\n    payload = { name: 'value' },\r\n    id = '1',\r\n    listParams = { page: 1 },\r\n  }\r\n) => {\r\n  it('runs online usecases', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(false);\r\n\r\n    if (list) {\r\n      await expect(list(listParams)).resolves.toBeDefined();\r\n      await expect(list()).resolves.toBeDefined();\r\n    }\r\n    if (get) {\r\n      await expect(get(id)).resolves.toBeDefined();\r\n    }\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toBeDefined();\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toBeDefined();\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toBeDefined();\r\n    }\r\n\r\n    for (const action of extraActions) {\r\n      await expect(action.fn(...(action.args || []))).resolves.toBeDefined();\r\n    }\r\n  });\r\n\r\n  it('queues offline writes', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(true);\r\n\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toEqual(payload);\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toEqual({ id, ...payload });\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toEqual({ id });\r\n    }\r\n  });\r\n\r\n  if (get) {\r\n    it('rejects invalid ids', async () => {\r\n      await expect(get(null)).rejects.toBeDefined();\r\n    });\r\n  }\r\n};\r\n\r\nexport { runCrudUsecaseTests };\r\n"],"mappings":"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","ignoreList":[]}