e81476e3ddcd95c2035e3840e1dbedc9
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
var FOCUSABLE_SELECTOR = 'a[href],button:not([disabled]),textarea,input,select,[tabindex]:not([tabindex="-1"])';
var getFocusableElements = function getFocusableElements(container) {
  if (!container) return [];
  return Array.from(container.querySelectorAll(FOCUSABLE_SELECTOR)).filter(function (element) {
    return !element.hasAttribute('disabled') && element.getAttribute('aria-hidden') !== 'true';
  });
};
var useFocusTrap = function useFocusTrap(containerRef, isActive) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var initialFocusRef = options.initialFocusRef;
  (0, _react.useEffect)(function () {
    if (!isActive || typeof document === 'undefined') return undefined;
    var container = containerRef == null ? void 0 : containerRef.current;
    if (!container) return undefined;
    var focusInitial = function focusInitial() {
      var focusTarget = (initialFocusRef == null ? void 0 : initialFocusRef.current) || getFocusableElements(container)[0];
      if (focusTarget && typeof focusTarget.focus === 'function') {
        focusTarget.focus();
      }
    };
    var handleKeyDown = function handleKeyDown(event) {
      if (event.key !== 'Tab') return;
      var focusableElements = getFocusableElements(container);
      if (focusableElements.length === 0) return;
      var firstElement = focusableElements[0];
      var lastElement = focusableElements[focusableElements.length - 1];
      var isShift = event.shiftKey;
      var activeElement = document.activeElement;
      if (isShift && activeElement === firstElement) {
        event.preventDefault();
        lastElement.focus();
      } else if (!isShift && activeElement === lastElement) {
        event.preventDefault();
        firstElement.focus();
      }
    };
    focusInitial();
    container.addEventListener('keydown', handleKeyDown);
    return function () {
      container.removeEventListener('keydown', handleKeyDown);
    };
  }, [containerRef, initialFocusRef, isActive]);
};
var _default = exports.default = useFocusTrap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiRk9DVVNBQkxFX1NFTEVDVE9SIiwiZ2V0Rm9jdXNhYmxlRWxlbWVudHMiLCJjb250YWluZXIiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmlsdGVyIiwiZWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsInVzZUZvY3VzVHJhcCIsImNvbnRhaW5lclJlZiIsImlzQWN0aXZlIiwib3B0aW9ucyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImluaXRpYWxGb2N1c1JlZiIsInVzZUVmZmVjdCIsImRvY3VtZW50IiwiY3VycmVudCIsImZvY3VzSW5pdGlhbCIsImZvY3VzVGFyZ2V0IiwiZm9jdXMiLCJoYW5kbGVLZXlEb3duIiwiZXZlbnQiLCJrZXkiLCJmb2N1c2FibGVFbGVtZW50cyIsImZpcnN0RWxlbWVudCIsImxhc3RFbGVtZW50IiwiaXNTaGlmdCIsInNoaWZ0S2V5IiwiYWN0aXZlRWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsidXNlRm9jdXNUcmFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiB1c2VGb2N1c1RyYXAgSG9va1xyXG4gKiBUcmFwcyBrZXlib2FyZCBmb2N1cyB3aXRoaW4gYSBjb250YWluZXIgd2hpbGUgYWN0aXZlLlxyXG4gKiBGaWxlOiB1c2VGb2N1c1RyYXAuanNcclxuICovXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmNvbnN0IEZPQ1VTQUJMRV9TRUxFQ1RPUiA9XHJcbiAgJ2FbaHJlZl0sYnV0dG9uOm5vdChbZGlzYWJsZWRdKSx0ZXh0YXJlYSxpbnB1dCxzZWxlY3QsW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJztcclxuXHJcbmNvbnN0IGdldEZvY3VzYWJsZUVsZW1lbnRzID0gKGNvbnRhaW5lcikgPT4ge1xyXG4gIGlmICghY29udGFpbmVyKSByZXR1cm4gW107XHJcbiAgcmV0dXJuIEFycmF5LmZyb20oY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoRk9DVVNBQkxFX1NFTEVDVE9SKSkuZmlsdGVyKChlbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpICE9PSAndHJ1ZSc7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCB1c2VGb2N1c1RyYXAgPSAoY29udGFpbmVyUmVmLCBpc0FjdGl2ZSwgb3B0aW9ucyA9IHt9KSA9PiB7XHJcbiAgY29uc3QgeyBpbml0aWFsRm9jdXNSZWYgfSA9IG9wdGlvbnM7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoIWlzQWN0aXZlIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJSZWY/LmN1cnJlbnQ7XHJcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuIHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdCBmb2N1c0luaXRpYWwgPSAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGZvY3VzVGFyZ2V0ID0gaW5pdGlhbEZvY3VzUmVmPy5jdXJyZW50IHx8IGdldEZvY3VzYWJsZUVsZW1lbnRzKGNvbnRhaW5lcilbMF07XHJcbiAgICAgIGlmIChmb2N1c1RhcmdldCAmJiB0eXBlb2YgZm9jdXNUYXJnZXQuZm9jdXMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBmb2N1c1RhcmdldC5mb2N1cygpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LmtleSAhPT0gJ1RhYicpIHJldHVybjtcclxuICAgICAgY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgPSBnZXRGb2N1c2FibGVFbGVtZW50cyhjb250YWluZXIpO1xyXG4gICAgICBpZiAoZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBmaXJzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1swXTtcclxuICAgICAgY29uc3QgbGFzdEVsZW1lbnQgPSBmb2N1c2FibGVFbGVtZW50c1tmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxXTtcclxuICAgICAgY29uc3QgaXNTaGlmdCA9IGV2ZW50LnNoaWZ0S2V5O1xyXG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcclxuXHJcbiAgICAgIGlmIChpc1NoaWZ0ICYmIGFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0RWxlbWVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGFzdEVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgfSBlbHNlIGlmICghaXNTaGlmdCAmJiBhY3RpdmVFbGVtZW50ID09PSBsYXN0RWxlbWVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZmlyc3RFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZm9jdXNJbml0aWFsKCk7XHJcbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xyXG5cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XHJcbiAgICB9O1xyXG4gIH0sIFtjb250YWluZXJSZWYsIGluaXRpYWxGb2N1c1JlZiwgaXNBY3RpdmVdKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZUZvY3VzVHJhcDtcclxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBRUEsSUFBTUMsa0JBQWtCLEdBQ3RCLHNGQUFzRjtBQUV4RixJQUFNQyxvQkFBb0IsR0FBRyxTQUF2QkEsb0JBQW9CQSxDQUFJQyxTQUFTLEVBQUs7RUFDMUMsSUFBSSxDQUFDQSxTQUFTLEVBQUUsT0FBTyxFQUFFO0VBQ3pCLE9BQU9DLEtBQUssQ0FBQ0MsSUFBSSxDQUFDRixTQUFTLENBQUNHLGdCQUFnQixDQUFDTCxrQkFBa0IsQ0FBQyxDQUFDLENBQUNNLE1BQU0sQ0FBQyxVQUFDQyxPQUFPLEVBQUs7SUFDcEYsT0FBTyxDQUFDQSxPQUFPLENBQUNDLFlBQVksQ0FBQyxVQUFVLENBQUMsSUFBSUQsT0FBTyxDQUFDRSxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssTUFBTTtFQUM1RixDQUFDLENBQUM7QUFDSixDQUFDO0FBRUQsSUFBTUMsWUFBWSxHQUFHLFNBQWZBLFlBQVlBLENBQUlDLFlBQVksRUFBRUMsUUFBUSxFQUFtQjtFQUFBLElBQWpCQyxPQUFPLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLENBQUMsQ0FBQztFQUN4RCxJQUFRRyxlQUFlLEdBQUtKLE9BQU8sQ0FBM0JJLGVBQWU7RUFFdkIsSUFBQUMsZ0JBQVMsRUFBQyxZQUFNO0lBQ2QsSUFBSSxDQUFDTixRQUFRLElBQUksT0FBT08sUUFBUSxLQUFLLFdBQVcsRUFBRSxPQUFPSCxTQUFTO0lBQ2xFLElBQU1kLFNBQVMsR0FBR1MsWUFBWSxvQkFBWkEsWUFBWSxDQUFFUyxPQUFPO0lBQ3ZDLElBQUksQ0FBQ2xCLFNBQVMsRUFBRSxPQUFPYyxTQUFTO0lBRWhDLElBQU1LLFlBQVksR0FBRyxTQUFmQSxZQUFZQSxDQUFBLEVBQVM7TUFDekIsSUFBTUMsV0FBVyxHQUFHLENBQUFMLGVBQWUsb0JBQWZBLGVBQWUsQ0FBRUcsT0FBTyxLQUFJbkIsb0JBQW9CLENBQUNDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNsRixJQUFJb0IsV0FBVyxJQUFJLE9BQU9BLFdBQVcsQ0FBQ0MsS0FBSyxLQUFLLFVBQVUsRUFBRTtRQUMxREQsV0FBVyxDQUFDQyxLQUFLLENBQUMsQ0FBQztNQUNyQjtJQUNGLENBQUM7SUFFRCxJQUFNQyxhQUFhLEdBQUcsU0FBaEJBLGFBQWFBLENBQUlDLEtBQUssRUFBSztNQUMvQixJQUFJQSxLQUFLLENBQUNDLEdBQUcsS0FBSyxLQUFLLEVBQUU7TUFDekIsSUFBTUMsaUJBQWlCLEdBQUcxQixvQkFBb0IsQ0FBQ0MsU0FBUyxDQUFDO01BQ3pELElBQUl5QixpQkFBaUIsQ0FBQ1osTUFBTSxLQUFLLENBQUMsRUFBRTtNQUVwQyxJQUFNYSxZQUFZLEdBQUdELGlCQUFpQixDQUFDLENBQUMsQ0FBQztNQUN6QyxJQUFNRSxXQUFXLEdBQUdGLGlCQUFpQixDQUFDQSxpQkFBaUIsQ0FBQ1osTUFBTSxHQUFHLENBQUMsQ0FBQztNQUNuRSxJQUFNZSxPQUFPLEdBQUdMLEtBQUssQ0FBQ00sUUFBUTtNQUM5QixJQUFNQyxhQUFhLEdBQUdiLFFBQVEsQ0FBQ2EsYUFBYTtNQUU1QyxJQUFJRixPQUFPLElBQUlFLGFBQWEsS0FBS0osWUFBWSxFQUFFO1FBQzdDSCxLQUFLLENBQUNRLGNBQWMsQ0FBQyxDQUFDO1FBQ3RCSixXQUFXLENBQUNOLEtBQUssQ0FBQyxDQUFDO01BQ3JCLENBQUMsTUFBTSxJQUFJLENBQUNPLE9BQU8sSUFBSUUsYUFBYSxLQUFLSCxXQUFXLEVBQUU7UUFDcERKLEtBQUssQ0FBQ1EsY0FBYyxDQUFDLENBQUM7UUFDdEJMLFlBQVksQ0FBQ0wsS0FBSyxDQUFDLENBQUM7TUFDdEI7SUFDRixDQUFDO0lBRURGLFlBQVksQ0FBQyxDQUFDO0lBQ2RuQixTQUFTLENBQUNnQyxnQkFBZ0IsQ0FBQyxTQUFTLEVBQUVWLGFBQWEsQ0FBQztJQUVwRCxPQUFPLFlBQU07TUFDWHRCLFNBQVMsQ0FBQ2lDLG1CQUFtQixDQUFDLFNBQVMsRUFBRVgsYUFBYSxDQUFDO0lBQ3pELENBQUM7RUFDSCxDQUFDLEVBQUUsQ0FBQ2IsWUFBWSxFQUFFTSxlQUFlLEVBQUVMLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLENBQUM7QUFBQyxJQUFBd0IsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFYTVCLFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=