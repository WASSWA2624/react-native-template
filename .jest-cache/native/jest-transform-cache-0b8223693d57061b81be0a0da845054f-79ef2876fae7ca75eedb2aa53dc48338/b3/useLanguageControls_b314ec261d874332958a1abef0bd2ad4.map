{"version":3,"names":["useCallback","useMemo","useDispatch","useSelector","createI18n","useI18n","selectLocale","actions","async","asyncStorage","LOCALE_LABEL_KEYS","LOCALE_STORAGE_KEY","cov_nihmnr4fr","s","getDefaultLocale","supportedLocales","f","b","isSupportedLocale","value","Array","isArray","includes","buildOptions","t","map","labelKey","label","useLanguageControls","_ref","dispatch","storedLocale","i18n","initialLocale","fallbackLocale","locale","options","setLocale","nextLocale","setItem"],"sources":["useLanguageControls.js"],"sourcesContent":["/**\r\n * useLanguageControls Hook\r\n * Language selection logic with persistence\r\n * File: useLanguageControls.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { createI18n } from '@i18n';\r\nimport { useI18n } from '@hooks';\r\nimport { selectLocale } from '@store/selectors';\r\nimport { actions } from '@store/slices/ui.slice';\r\nimport { async as asyncStorage } from '@services/storage';\r\nimport { LOCALE_LABEL_KEYS, LOCALE_STORAGE_KEY } from './types';\r\n\r\nconst getDefaultLocale = (supportedLocales) => supportedLocales?.[0] || 'en';\r\n\r\nconst isSupportedLocale = (value, supportedLocales) => {\r\n  if (!value || !Array.isArray(supportedLocales)) return false;\r\n  return supportedLocales.includes(value);\r\n};\r\n\r\nconst buildOptions = (supportedLocales, t) => {\r\n  if (!Array.isArray(supportedLocales)) return [];\r\n  return supportedLocales.map((value) => {\r\n    const labelKey = LOCALE_LABEL_KEYS[value] || `settings.language.options.${value}`;\r\n    return { value, label: t(labelKey) };\r\n  });\r\n};\r\n\r\nconst useLanguageControls = () => {\r\n  const { t } = useI18n();\r\n  const dispatch = useDispatch();\r\n  const storedLocale = useSelector(selectLocale);\r\n  const i18n = useMemo(() => createI18n({ initialLocale: storedLocale }), [storedLocale]);\r\n  const supportedLocales = i18n.supportedLocales;\r\n  const fallbackLocale = getDefaultLocale(supportedLocales);\r\n  const locale = isSupportedLocale(storedLocale, supportedLocales) ? storedLocale : fallbackLocale;\r\n\r\n  const options = useMemo(() => buildOptions(supportedLocales, t), [supportedLocales, t]);\r\n\r\n  const setLocale = useCallback(\r\n    (nextLocale) => {\r\n      if (!isSupportedLocale(nextLocale, supportedLocales)) return;\r\n      if (nextLocale === locale) return;\r\n      dispatch(actions.setLocale(nextLocale));\r\n      void asyncStorage.setItem(LOCALE_STORAGE_KEY, nextLocale);\r\n    },\r\n    [dispatch, locale, supportedLocales]\r\n  );\r\n\r\n  return {\r\n    locale,\r\n    options,\r\n    setLocale,\r\n  };\r\n};\r\n\r\nexport default useLanguageControls;\r\n"],"mappings":"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","ignoreList":[]}