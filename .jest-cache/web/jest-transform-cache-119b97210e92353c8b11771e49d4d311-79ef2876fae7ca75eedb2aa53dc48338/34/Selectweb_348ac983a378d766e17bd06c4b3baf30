b1356a115fc64f6f8663d2f03131236e
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = _interopRequireWildcard(require("react"));
var _hooks = require("../../../../hooks");
var _SelectWeb = require("./Select.web.styles");
var _useSelect2 = _interopRequireDefault(require("./useSelect"));
var _types = require("./types");
var _jsxRuntime = require("react/jsx-runtime");
var SelectWeb = function SelectWeb(_ref) {
  var label = _ref.label,
    placeholder = _ref.placeholder,
    _ref$options = _ref.options,
    options = _ref$options === void 0 ? [] : _ref$options,
    value = _ref.value,
    onValueChange = _ref.onValueChange,
    _ref$required = _ref.required,
    required = _ref$required === void 0 ? false : _ref$required,
    _ref$disabled = _ref.disabled,
    disabled = _ref$disabled === void 0 ? false : _ref$disabled,
    validationState = _ref.validationState,
    errorMessage = _ref.errorMessage,
    helperText = _ref.helperText,
    validate = _ref.validate,
    accessibilityLabel = _ref.accessibilityLabel,
    accessibilityHint = _ref.accessibilityHint,
    testID = _ref.testID,
    className = _ref.className,
    style = _ref.style,
    _ref$compact = _ref.compact,
    compact = _ref$compact === void 0 ? false : _ref$compact;
  var _useI18n = (0, _hooks.useI18n)(),
    t = _useI18n.t;
  var defaultPlaceholder = placeholder || t('common.selectPlaceholder');
  var _useSelect = (0, _useSelect2.default)({
      value: value,
      options: options,
      onValueChange: onValueChange,
      required: required,
      validate: validate
    }),
    open = _useSelect.open,
    isFocused = _useSelect.isFocused,
    internalValidationState = _useSelect.validationState,
    internalErrorMessage = _useSelect.errorMessage,
    selectedOption = _useSelect.selectedOption,
    openSelect = _useSelect.openSelect,
    closeSelect = _useSelect.closeSelect,
    toggleSelect = _useSelect.toggleSelect,
    handleFocus = _useSelect.handleFocus,
    handleBlur = _useSelect.handleBlur,
    handleSelect = _useSelect.handleSelect;
  var finalValidationState = validationState || (disabled ? _types.VALIDATION_STATES.DISABLED : internalValidationState);
  var finalErrorMessage = errorMessage || internalErrorMessage;
  var displayHelperText = finalErrorMessage || helperText;
  var rootRef = (0, _react.useRef)(null);
  var menuRef = (0, _react.useRef)(null);
  var _React$useState = _react.default.useState(-1),
    _React$useState2 = (0, _slicedToArray2.default)(_React$useState, 2),
    focusedIndex = _React$useState2[0],
    setFocusedIndex = _React$useState2[1];
  var helperId = (0, _react.useId)();
  var resolvedHelperId = testID ? `${testID}-helper` : helperId;
  (0, _react.useEffect)(function () {
    if (!open) return;
    var handleClickOutside = function handleClickOutside(event) {
      if (rootRef.current && !rootRef.current.contains(event.target)) {
        closeSelect();
      }
    };
    document.addEventListener('mousedown', handleClickOutside);
    return function () {
      return document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [closeSelect, open]);
  (0, _react.useEffect)(function () {
    if (open) {
      setFocusedIndex(-1);
    }
  }, [open]);
  (0, _react.useEffect)(function () {
    if (open && menuRef.current) {
      var firstOption = menuRef.current.querySelector('[role="option"]:not([aria-disabled="true"])');
      if (firstOption) {
        firstOption.focus();
      }
    }
  }, [open]);
  var handleTriggerKeyDown = function handleTriggerKeyDown(e) {
    if (disabled) return;
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleSelect();
    }
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      openSelect();
    }
    if (e.key === 'Escape') {
      e.preventDefault();
      closeSelect();
    }
  };
  var handleMenuKeyDown = function handleMenuKeyDown(e) {
    if (disabled) return;
    var enabledOptions = options.filter(function (opt) {
      return !opt.disabled;
    });
    var currentIndex = enabledOptions.findIndex(function (opt, idx) {
      var optionIndex = options.indexOf(opt);
      return optionIndex === focusedIndex;
    });
    if (e.key === 'ArrowDown') {
      e.preventDefault();
      var nextIndex = currentIndex < enabledOptions.length - 1 ? currentIndex + 1 : 0;
      var nextOption = enabledOptions[nextIndex];
      var nextOptionIndex = options.indexOf(nextOption);
      setFocusedIndex(nextOptionIndex);
      if (menuRef.current) {
        var optionElement = testID ? menuRef.current.querySelector(`[data-testid="${testID}-option-${nextOptionIndex}"]`) : menuRef.current.querySelectorAll('[role="option"]')[nextOptionIndex];
        if (optionElement) {
          optionElement.focus();
        }
      }
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      var prevIndex = currentIndex > 0 ? currentIndex - 1 : enabledOptions.length - 1;
      var prevOption = enabledOptions[prevIndex];
      var prevOptionIndex = options.indexOf(prevOption);
      setFocusedIndex(prevOptionIndex);
      if (menuRef.current) {
        var _optionElement = testID ? menuRef.current.querySelector(`[data-testid="${testID}-option-${prevOptionIndex}"]`) : menuRef.current.querySelectorAll('[role="option"]')[prevOptionIndex];
        if (_optionElement) {
          _optionElement.focus();
        }
      }
    } else if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      if (currentIndex >= 0 && currentIndex < enabledOptions.length) {
        handleSelect(enabledOptions[currentIndex].value);
      }
    } else if (e.key === 'Escape') {
      e.preventDefault();
      closeSelect();
      if (rootRef.current) {
        var trigger = rootRef.current.querySelector('[role="combobox"]');
        if (trigger) {
          trigger.focus();
        }
      }
    }
  };
  return (0, _jsxRuntime.jsxs)(_SelectWeb.StyledContainer, {
    ref: rootRef,
    style: style,
    className: className,
    $compact: compact,
    children: [label ? (0, _jsxRuntime.jsxs)(_SelectWeb.StyledLabelRow, {
      $compact: compact,
      children: [(0, _jsxRuntime.jsx)(_SelectWeb.StyledLabel, {
        children: label
      }), required ? (0, _jsxRuntime.jsx)(_SelectWeb.StyledRequired, {
        children: " *"
      }) : null]
    }) : null, (0, _jsxRuntime.jsxs)(_SelectWeb.StyledTrigger, {
      onClick: disabled ? undefined : toggleSelect,
      onFocus: handleFocus,
      onBlur: handleBlur,
      onKeyDown: handleTriggerKeyDown,
      disabled: disabled,
      $validationState: finalValidationState,
      $isFocused: isFocused,
      $compact: compact,
      role: "combobox",
      "aria-label": accessibilityLabel || label || defaultPlaceholder,
      "aria-describedby": displayHelperText ? resolvedHelperId : undefined,
      "aria-expanded": open,
      "aria-haspopup": "listbox",
      "aria-invalid": finalValidationState === 'error',
      "aria-required": required,
      "data-testid": testID,
      children: [(0, _jsxRuntime.jsx)(_SelectWeb.StyledTriggerText, {
        disabled: disabled,
        $isPlaceholder: !selectedOption,
        children: selectedOption ? selectedOption.label : defaultPlaceholder
      }), (0, _jsxRuntime.jsx)(_SelectWeb.StyledChevron, {
        "aria-hidden": "true",
        children: "\u25BE"
      })]
    }), open ? (0, _jsxRuntime.jsx)(_SelectWeb.StyledMenu, {
      ref: menuRef,
      role: "listbox",
      onKeyDown: handleMenuKeyDown,
      "data-testid": testID ? `${testID}-menu` : undefined,
      children: options.map(function (opt, index) {
        return (0, _jsxRuntime.jsx)(_SelectWeb.StyledOption, {
          disabled: !!opt.disabled,
          onClick: function onClick() {
            if (opt.disabled) return;
            handleSelect(opt.value);
          },
          onFocus: function onFocus() {
            return setFocusedIndex(index);
          },
          role: "option",
          "aria-selected": value === opt.value,
          "aria-disabled": opt.disabled,
          "aria-label": opt.label,
          tabIndex: opt.disabled ? -1 : index === 0 ? 0 : -1,
          "data-testid": testID ? `${testID}-option-${index}` : undefined,
          children: (0, _jsxRuntime.jsx)(_SelectWeb.StyledOptionText, {
            children: opt.label
          })
        }, `${String(opt.value)}-${index}`);
      })
    }) : null, displayHelperText ? (0, _jsxRuntime.jsx)(_SelectWeb.StyledHelperText, {
      $validationState: finalValidationState,
      id: resolvedHelperId,
      children: displayHelperText
    }) : null]
  });
};
var _default = exports.default = SelectWeb;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfaG9va3MiLCJfU2VsZWN0V2ViIiwiX3VzZVNlbGVjdDIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3R5cGVzIiwiX2pzeFJ1bnRpbWUiLCJTZWxlY3RXZWIiLCJfcmVmIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsIl9yZWYkb3B0aW9ucyIsIm9wdGlvbnMiLCJ2YWx1ZSIsIm9uVmFsdWVDaGFuZ2UiLCJfcmVmJHJlcXVpcmVkIiwicmVxdWlyZWQiLCJfcmVmJGRpc2FibGVkIiwiZGlzYWJsZWQiLCJ2YWxpZGF0aW9uU3RhdGUiLCJlcnJvck1lc3NhZ2UiLCJoZWxwZXJUZXh0IiwidmFsaWRhdGUiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhY2Nlc3NpYmlsaXR5SGludCIsInRlc3RJRCIsImNsYXNzTmFtZSIsInN0eWxlIiwiX3JlZiRjb21wYWN0IiwiY29tcGFjdCIsIl91c2VJMThuIiwidXNlSTE4biIsInQiLCJkZWZhdWx0UGxhY2Vob2xkZXIiLCJfdXNlU2VsZWN0IiwidXNlU2VsZWN0Iiwib3BlbiIsImlzRm9jdXNlZCIsImludGVybmFsVmFsaWRhdGlvblN0YXRlIiwiaW50ZXJuYWxFcnJvck1lc3NhZ2UiLCJzZWxlY3RlZE9wdGlvbiIsIm9wZW5TZWxlY3QiLCJjbG9zZVNlbGVjdCIsInRvZ2dsZVNlbGVjdCIsImhhbmRsZUZvY3VzIiwiaGFuZGxlQmx1ciIsImhhbmRsZVNlbGVjdCIsImZpbmFsVmFsaWRhdGlvblN0YXRlIiwiVkFMSURBVElPTl9TVEFURVMiLCJESVNBQkxFRCIsImZpbmFsRXJyb3JNZXNzYWdlIiwiZGlzcGxheUhlbHBlclRleHQiLCJyb290UmVmIiwidXNlUmVmIiwibWVudVJlZiIsIl9SZWFjdCR1c2VTdGF0ZSIsIlJlYWN0IiwidXNlU3RhdGUiLCJfUmVhY3QkdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsImZvY3VzZWRJbmRleCIsInNldEZvY3VzZWRJbmRleCIsImhlbHBlcklkIiwidXNlSWQiLCJyZXNvbHZlZEhlbHBlcklkIiwidXNlRWZmZWN0IiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiZXZlbnQiLCJjdXJyZW50IiwiY29udGFpbnMiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlyc3RPcHRpb24iLCJxdWVyeVNlbGVjdG9yIiwiZm9jdXMiLCJoYW5kbGVUcmlnZ2VyS2V5RG93biIsImUiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImhhbmRsZU1lbnVLZXlEb3duIiwiZW5hYmxlZE9wdGlvbnMiLCJmaWx0ZXIiLCJvcHQiLCJjdXJyZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJpZHgiLCJvcHRpb25JbmRleCIsImluZGV4T2YiLCJuZXh0SW5kZXgiLCJsZW5ndGgiLCJuZXh0T3B0aW9uIiwibmV4dE9wdGlvbkluZGV4Iiwib3B0aW9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcmV2SW5kZXgiLCJwcmV2T3B0aW9uIiwicHJldk9wdGlvbkluZGV4IiwidHJpZ2dlciIsImpzeHMiLCJTdHlsZWRDb250YWluZXIiLCJyZWYiLCIkY29tcGFjdCIsImNoaWxkcmVuIiwiU3R5bGVkTGFiZWxSb3ciLCJqc3giLCJTdHlsZWRMYWJlbCIsIlN0eWxlZFJlcXVpcmVkIiwiU3R5bGVkVHJpZ2dlciIsIm9uQ2xpY2siLCJ1bmRlZmluZWQiLCJvbkZvY3VzIiwib25CbHVyIiwib25LZXlEb3duIiwiJHZhbGlkYXRpb25TdGF0ZSIsIiRpc0ZvY3VzZWQiLCJyb2xlIiwiU3R5bGVkVHJpZ2dlclRleHQiLCIkaXNQbGFjZWhvbGRlciIsIlN0eWxlZENoZXZyb24iLCJTdHlsZWRNZW51IiwibWFwIiwiaW5kZXgiLCJTdHlsZWRPcHRpb24iLCJ0YWJJbmRleCIsIlN0eWxlZE9wdGlvblRleHQiLCJTdHJpbmciLCJTdHlsZWRIZWxwZXJUZXh0IiwiaWQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJTZWxlY3Qud2ViLmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU2VsZWN0IENvbXBvbmVudCAtIFdlYlxyXG4gKiBQaWNrZXIvZHJvcGRvd24gcHJpbWl0aXZlIGZvciBXZWIgcGxhdGZvcm0gKGtleWJvYXJkIGFjY2Vzc2libGUpXHJcbiAqIEZpbGU6IFNlbGVjdC53ZWIuanN4XHJcbiAqL1xyXG4vLyAxLiBFeHRlcm5hbCBkZXBlbmRlbmNpZXNcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlSWQsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuXHJcbi8vIDIuIFBsYXRmb3JtIGNvbXBvbmVudHMgKGZyb20gYmFycmVsIGZpbGUpIC0gTi9BIGZvciBTZWxlY3RcclxuXHJcbi8vIDMuIEhvb2tzIGFuZCB1dGlsaXRpZXMgKGFic29sdXRlIGltcG9ydHMgdmlhIGFsaWFzZXMpXHJcbmltcG9ydCB7IHVzZUkxOG4gfSBmcm9tICdAaG9va3MnO1xyXG5cclxuLy8gNC4gU3R5bGVzIChyZWxhdGl2ZSBpbXBvcnQgLSBwbGF0Zm9ybS1zcGVjaWZpYylcclxuaW1wb3J0IHtcclxuICBTdHlsZWRDb250YWluZXIsXHJcbiAgU3R5bGVkTGFiZWxSb3csXHJcbiAgU3R5bGVkTGFiZWwsXHJcbiAgU3R5bGVkUmVxdWlyZWQsXHJcbiAgU3R5bGVkVHJpZ2dlcixcclxuICBTdHlsZWRUcmlnZ2VyVGV4dCxcclxuICBTdHlsZWRDaGV2cm9uLFxyXG4gIFN0eWxlZE1lbnUsXHJcbiAgU3R5bGVkT3B0aW9uLFxyXG4gIFN0eWxlZE9wdGlvblRleHQsXHJcbiAgU3R5bGVkSGVscGVyVGV4dCxcclxufSBmcm9tICcuL1NlbGVjdC53ZWIuc3R5bGVzJztcclxuXHJcbi8vIDUuIENvbXBvbmVudC1zcGVjaWZpYyBob29rIChyZWxhdGl2ZSBpbXBvcnQpXHJcbmltcG9ydCB1c2VTZWxlY3QgZnJvbSAnLi91c2VTZWxlY3QnO1xyXG5cclxuLy8gNi4gVHlwZXMgYW5kIGNvbnN0YW50cyAocmVsYXRpdmUgaW1wb3J0KVxyXG5pbXBvcnQgeyBWQUxJREFUSU9OX1NUQVRFUyB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNlbGVjdE9wdGlvblxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGFiZWxcclxuICogQHByb3BlcnR5IHtzdHJpbmd8bnVtYmVyfSB2YWx1ZVxyXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkaXNhYmxlZF1cclxuICovXHJcblxyXG4vKipcclxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMubGFiZWxdXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMucGxhY2Vob2xkZXJdXHJcbiAqIEBwYXJhbSB7U2VsZWN0T3B0aW9uW119IHByb3BzLm9wdGlvbnNcclxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfG51bGx8dW5kZWZpbmVkfSBwcm9wcy52YWx1ZVxyXG4gKiBAcGFyYW0geyh2YWx1ZTogYW55KSA9PiB2b2lkfSBwcm9wcy5vblZhbHVlQ2hhbmdlXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Byb3BzLnJlcXVpcmVkXVxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcm9wcy5kaXNhYmxlZF1cclxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy52YWxpZGF0aW9uU3RhdGVdXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMuZXJyb3JNZXNzYWdlXVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BzLmhlbHBlclRleHRdXHJcbiAqIEBwYXJhbSB7KHZhbHVlOiBhbnkpID0+IGJvb2xlYW58e3ZhbGlkOiBib29sZWFuLCBlcnJvcj86IHN0cmluZ319IFtwcm9wcy52YWxpZGF0ZV1cclxuICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wcy5hY2Nlc3NpYmlsaXR5TGFiZWxdXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMuYWNjZXNzaWJpbGl0eUhpbnRdXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcHMudGVzdElEXVxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BzLmNsYXNzTmFtZV1cclxuICogQHBhcmFtIHtPYmplY3R9IFtwcm9wcy5zdHlsZV1cclxuICogQHBhcmFtIHtib29sZWFufSBbcHJvcHMuY29tcGFjdF1cclxuICovXHJcbmNvbnN0IFNlbGVjdFdlYiA9ICh7XHJcbiAgbGFiZWwsXHJcbiAgcGxhY2Vob2xkZXIsXHJcbiAgb3B0aW9ucyA9IFtdLFxyXG4gIHZhbHVlLFxyXG4gIG9uVmFsdWVDaGFuZ2UsXHJcbiAgcmVxdWlyZWQgPSBmYWxzZSxcclxuICBkaXNhYmxlZCA9IGZhbHNlLFxyXG4gIHZhbGlkYXRpb25TdGF0ZSxcclxuICBlcnJvck1lc3NhZ2UsXHJcbiAgaGVscGVyVGV4dCxcclxuICB2YWxpZGF0ZSxcclxuICBhY2Nlc3NpYmlsaXR5TGFiZWwsXHJcbiAgYWNjZXNzaWJpbGl0eUhpbnQsXHJcbiAgdGVzdElELFxyXG4gIGNsYXNzTmFtZSxcclxuICBzdHlsZSxcclxuICBjb21wYWN0ID0gZmFsc2UsXHJcbn0pID0+IHtcclxuICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcclxuICBjb25zdCBkZWZhdWx0UGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlciB8fCB0KCdjb21tb24uc2VsZWN0UGxhY2Vob2xkZXInKTtcclxuICBcclxuICBjb25zdCB7XHJcbiAgICBvcGVuLFxyXG4gICAgaXNGb2N1c2VkLFxyXG4gICAgdmFsaWRhdGlvblN0YXRlOiBpbnRlcm5hbFZhbGlkYXRpb25TdGF0ZSxcclxuICAgIGVycm9yTWVzc2FnZTogaW50ZXJuYWxFcnJvck1lc3NhZ2UsXHJcbiAgICBzZWxlY3RlZE9wdGlvbixcclxuICAgIG9wZW5TZWxlY3QsXHJcbiAgICBjbG9zZVNlbGVjdCxcclxuICAgIHRvZ2dsZVNlbGVjdCxcclxuICAgIGhhbmRsZUZvY3VzLFxyXG4gICAgaGFuZGxlQmx1cixcclxuICAgIGhhbmRsZVNlbGVjdCxcclxuICB9ID0gdXNlU2VsZWN0KHsgdmFsdWUsIG9wdGlvbnMsIG9uVmFsdWVDaGFuZ2UsIHJlcXVpcmVkLCB2YWxpZGF0ZSB9KTtcclxuXHJcbiAgY29uc3QgZmluYWxWYWxpZGF0aW9uU3RhdGUgPSB2YWxpZGF0aW9uU3RhdGUgfHwgKGRpc2FibGVkID8gVkFMSURBVElPTl9TVEFURVMuRElTQUJMRUQgOiBpbnRlcm5hbFZhbGlkYXRpb25TdGF0ZSk7XHJcbiAgY29uc3QgZmluYWxFcnJvck1lc3NhZ2UgPSBlcnJvck1lc3NhZ2UgfHwgaW50ZXJuYWxFcnJvck1lc3NhZ2U7XHJcbiAgY29uc3QgZGlzcGxheUhlbHBlclRleHQgPSBmaW5hbEVycm9yTWVzc2FnZSB8fCBoZWxwZXJUZXh0O1xyXG5cclxuICBjb25zdCByb290UmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IG1lbnVSZWYgPSB1c2VSZWYobnVsbCk7XHJcbiAgY29uc3QgW2ZvY3VzZWRJbmRleCwgc2V0Rm9jdXNlZEluZGV4XSA9IFJlYWN0LnVzZVN0YXRlKC0xKTtcclxuICBjb25zdCBoZWxwZXJJZCA9IHVzZUlkKCk7XHJcbiAgY29uc3QgcmVzb2x2ZWRIZWxwZXJJZCA9IHRlc3RJRCA/IGAke3Rlc3RJRH0taGVscGVyYCA6IGhlbHBlcklkO1xyXG5cclxuICAvLyBDbG9zZSBvbiBvdXRzaWRlIGNsaWNrXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmICghb3BlbikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IChldmVudCkgPT4ge1xyXG4gICAgICBpZiAocm9vdFJlZi5jdXJyZW50ICYmICFyb290UmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgIGNsb3NlU2VsZWN0KCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIHJldHVybiAoKSA9PiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xyXG4gIH0sIFtjbG9zZVNlbGVjdCwgb3Blbl0pO1xyXG5cclxuICAvLyBSZXNldCBmb2N1c2VkIGluZGV4IHdoZW4gbWVudSBvcGVucy9jbG9zZXNcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKG9wZW4pIHtcclxuICAgICAgc2V0Rm9jdXNlZEluZGV4KC0xKTtcclxuICAgIH1cclxuICB9LCBbb3Blbl0pO1xyXG5cclxuICAvLyBGb2N1cyBmaXJzdCBvcHRpb24gd2hlbiBtZW51IG9wZW5zXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChvcGVuICYmIG1lbnVSZWYuY3VycmVudCkge1xyXG4gICAgICBjb25zdCBmaXJzdE9wdGlvbiA9IG1lbnVSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKCdbcm9sZT1cIm9wdGlvblwiXTpub3QoW2FyaWEtZGlzYWJsZWQ9XCJ0cnVlXCJdKScpO1xyXG4gICAgICBpZiAoZmlyc3RPcHRpb24pIHtcclxuICAgICAgICBmaXJzdE9wdGlvbi5mb2N1cygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSwgW29wZW5dKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlVHJpZ2dlcktleURvd24gPSAoZSkgPT4ge1xyXG4gICAgaWYgKGRpc2FibGVkKSByZXR1cm47XHJcbiAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRvZ2dsZVNlbGVjdCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIG9wZW5TZWxlY3QoKTtcclxuICAgIH1cclxuICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBjbG9zZVNlbGVjdCgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1lbnVLZXlEb3duID0gKGUpID0+IHtcclxuICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGVuYWJsZWRPcHRpb25zID0gb3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIW9wdC5kaXNhYmxlZCk7XHJcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBlbmFibGVkT3B0aW9ucy5maW5kSW5kZXgoKG9wdCwgaWR4KSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gb3B0aW9ucy5pbmRleE9mKG9wdCk7XHJcbiAgICAgIHJldHVybiBvcHRpb25JbmRleCA9PT0gZm9jdXNlZEluZGV4O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCA8IGVuYWJsZWRPcHRpb25zLmxlbmd0aCAtIDEgPyBjdXJyZW50SW5kZXggKyAxIDogMDtcclxuICAgICAgY29uc3QgbmV4dE9wdGlvbiA9IGVuYWJsZWRPcHRpb25zW25leHRJbmRleF07XHJcbiAgICAgIGNvbnN0IG5leHRPcHRpb25JbmRleCA9IG9wdGlvbnMuaW5kZXhPZihuZXh0T3B0aW9uKTtcclxuICAgICAgc2V0Rm9jdXNlZEluZGV4KG5leHRPcHRpb25JbmRleCk7XHJcbiAgICAgIGlmIChtZW51UmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gdGVzdElEXHJcbiAgICAgICAgICA/IG1lbnVSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10ZXN0aWQ9XCIke3Rlc3RJRH0tb3B0aW9uLSR7bmV4dE9wdGlvbkluZGV4fVwiXWApXHJcbiAgICAgICAgICA6IG1lbnVSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yQWxsKCdbcm9sZT1cIm9wdGlvblwiXScpW25leHRPcHRpb25JbmRleF07XHJcbiAgICAgICAgaWYgKG9wdGlvbkVsZW1lbnQpIHtcclxuICAgICAgICAgIG9wdGlvbkVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1VwJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IHByZXZJbmRleCA9IGN1cnJlbnRJbmRleCA+IDAgPyBjdXJyZW50SW5kZXggLSAxIDogZW5hYmxlZE9wdGlvbnMubGVuZ3RoIC0gMTtcclxuICAgICAgY29uc3QgcHJldk9wdGlvbiA9IGVuYWJsZWRPcHRpb25zW3ByZXZJbmRleF07XHJcbiAgICAgIGNvbnN0IHByZXZPcHRpb25JbmRleCA9IG9wdGlvbnMuaW5kZXhPZihwcmV2T3B0aW9uKTtcclxuICAgICAgc2V0Rm9jdXNlZEluZGV4KHByZXZPcHRpb25JbmRleCk7XHJcbiAgICAgIGlmIChtZW51UmVmLmN1cnJlbnQpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gdGVzdElEXHJcbiAgICAgICAgICA/IG1lbnVSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10ZXN0aWQ9XCIke3Rlc3RJRH0tb3B0aW9uLSR7cHJldk9wdGlvbkluZGV4fVwiXWApXHJcbiAgICAgICAgICA6IG1lbnVSZWYuY3VycmVudC5xdWVyeVNlbGVjdG9yQWxsKCdbcm9sZT1cIm9wdGlvblwiXScpW3ByZXZPcHRpb25JbmRleF07XHJcbiAgICAgICAgaWYgKG9wdGlvbkVsZW1lbnQpIHtcclxuICAgICAgICAgIG9wdGlvbkVsZW1lbnQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFbnRlcicgfHwgZS5rZXkgPT09ICcgJykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPj0gMCAmJiBjdXJyZW50SW5kZXggPCBlbmFibGVkT3B0aW9ucy5sZW5ndGgpIHtcclxuICAgICAgICBoYW5kbGVTZWxlY3QoZW5hYmxlZE9wdGlvbnNbY3VycmVudEluZGV4XS52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY2xvc2VTZWxlY3QoKTtcclxuICAgICAgaWYgKHJvb3RSZWYuY3VycmVudCkge1xyXG4gICAgICAgIGNvbnN0IHRyaWdnZXIgPSByb290UmVmLmN1cnJlbnQucXVlcnlTZWxlY3RvcignW3JvbGU9XCJjb21ib2JveFwiXScpO1xyXG4gICAgICAgIGlmICh0cmlnZ2VyKSB7XHJcbiAgICAgICAgICB0cmlnZ2VyLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxTdHlsZWRDb250YWluZXIgcmVmPXtyb290UmVmfSBzdHlsZT17c3R5bGV9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSAkY29tcGFjdD17Y29tcGFjdH0+XHJcbiAgICAgIHtsYWJlbCA/IChcclxuICAgICAgICA8U3R5bGVkTGFiZWxSb3cgJGNvbXBhY3Q9e2NvbXBhY3R9PlxyXG4gICAgICAgICAgPFN0eWxlZExhYmVsPntsYWJlbH08L1N0eWxlZExhYmVsPlxyXG4gICAgICAgICAge3JlcXVpcmVkID8gPFN0eWxlZFJlcXVpcmVkPiAqPC9TdHlsZWRSZXF1aXJlZD4gOiBudWxsfVxyXG4gICAgICAgIDwvU3R5bGVkTGFiZWxSb3c+XHJcbiAgICAgICkgOiBudWxsfVxyXG5cclxuICAgICAgPFN0eWxlZFRyaWdnZXJcclxuICAgICAgICBvbkNsaWNrPXtkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IHRvZ2dsZVNlbGVjdH1cclxuICAgICAgICBvbkZvY3VzPXtoYW5kbGVGb2N1c31cclxuICAgICAgICBvbkJsdXI9e2hhbmRsZUJsdXJ9XHJcbiAgICAgICAgb25LZXlEb3duPXtoYW5kbGVUcmlnZ2VyS2V5RG93bn1cclxuICAgICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XHJcbiAgICAgICAgJHZhbGlkYXRpb25TdGF0ZT17ZmluYWxWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgJGlzRm9jdXNlZD17aXNGb2N1c2VkfVxyXG4gICAgICAgICRjb21wYWN0PXtjb21wYWN0fVxyXG4gICAgICAgIHJvbGU9XCJjb21ib2JveFwiXHJcbiAgICAgICAgYXJpYS1sYWJlbD17YWNjZXNzaWJpbGl0eUxhYmVsIHx8IGxhYmVsIHx8IGRlZmF1bHRQbGFjZWhvbGRlcn1cclxuICAgICAgICBhcmlhLWRlc2NyaWJlZGJ5PXtkaXNwbGF5SGVscGVyVGV4dCA/IHJlc29sdmVkSGVscGVySWQgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgYXJpYS1leHBhbmRlZD17b3Blbn1cclxuICAgICAgICBhcmlhLWhhc3BvcHVwPVwibGlzdGJveFwiXHJcbiAgICAgICAgYXJpYS1pbnZhbGlkPXtmaW5hbFZhbGlkYXRpb25TdGF0ZSA9PT0gJ2Vycm9yJ31cclxuICAgICAgICBhcmlhLXJlcXVpcmVkPXtyZXF1aXJlZH1cclxuICAgICAgICBkYXRhLXRlc3RpZD17dGVzdElEfVxyXG4gICAgICA+XHJcbiAgICAgICAgPFN0eWxlZFRyaWdnZXJUZXh0IGRpc2FibGVkPXtkaXNhYmxlZH0gJGlzUGxhY2Vob2xkZXI9eyFzZWxlY3RlZE9wdGlvbn0+XHJcbiAgICAgICAgICB7c2VsZWN0ZWRPcHRpb24gPyBzZWxlY3RlZE9wdGlvbi5sYWJlbCA6IGRlZmF1bHRQbGFjZWhvbGRlcn1cclxuICAgICAgICA8L1N0eWxlZFRyaWdnZXJUZXh0PlxyXG4gICAgICAgIDxTdHlsZWRDaGV2cm9uIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPuKWvjwvU3R5bGVkQ2hldnJvbj5cclxuICAgICAgPC9TdHlsZWRUcmlnZ2VyPlxyXG5cclxuICAgICAge29wZW4gPyAoXHJcbiAgICAgICAgPFN0eWxlZE1lbnVcclxuICAgICAgICAgIHJlZj17bWVudVJlZn1cclxuICAgICAgICAgIHJvbGU9XCJsaXN0Ym94XCJcclxuICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlTWVudUtleURvd259XHJcbiAgICAgICAgICBkYXRhLXRlc3RpZD17dGVzdElEID8gYCR7dGVzdElEfS1tZW51YCA6IHVuZGVmaW5lZH1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7b3B0aW9ucy5tYXAoKG9wdCwgaW5kZXgpID0+IChcclxuICAgICAgICAgICAgPFN0eWxlZE9wdGlvblxyXG4gICAgICAgICAgICAgIGtleT17YCR7U3RyaW5nKG9wdC52YWx1ZSl9LSR7aW5kZXh9YH1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17ISFvcHQuZGlzYWJsZWR9XHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdC5kaXNhYmxlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlU2VsZWN0KG9wdC52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiBzZXRGb2N1c2VkSW5kZXgoaW5kZXgpfVxyXG4gICAgICAgICAgICAgIHJvbGU9XCJvcHRpb25cIlxyXG4gICAgICAgICAgICAgIGFyaWEtc2VsZWN0ZWQ9e3ZhbHVlID09PSBvcHQudmFsdWV9XHJcbiAgICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD17b3B0LmRpc2FibGVkfVxyXG4gICAgICAgICAgICAgIGFyaWEtbGFiZWw9e29wdC5sYWJlbH1cclxuICAgICAgICAgICAgICB0YWJJbmRleD17b3B0LmRpc2FibGVkID8gLTEgOiBpbmRleCA9PT0gMCA/IDAgOiAtMX1cclxuICAgICAgICAgICAgICBkYXRhLXRlc3RpZD17dGVzdElEID8gYCR7dGVzdElEfS1vcHRpb24tJHtpbmRleH1gIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPFN0eWxlZE9wdGlvblRleHQ+e29wdC5sYWJlbH08L1N0eWxlZE9wdGlvblRleHQ+XHJcbiAgICAgICAgICAgIDwvU3R5bGVkT3B0aW9uPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgPC9TdHlsZWRNZW51PlxyXG4gICAgICApIDogbnVsbH1cclxuXHJcbiAgICAgIHtkaXNwbGF5SGVscGVyVGV4dCA/IChcclxuICAgICAgICA8U3R5bGVkSGVscGVyVGV4dFxyXG4gICAgICAgICAgJHZhbGlkYXRpb25TdGF0ZT17ZmluYWxWYWxpZGF0aW9uU3RhdGV9XHJcbiAgICAgICAgICBpZD17cmVzb2x2ZWRIZWxwZXJJZH1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7ZGlzcGxheUhlbHBlclRleHR9XHJcbiAgICAgICAgPC9TdHlsZWRIZWxwZXJUZXh0PlxyXG4gICAgICApIDogbnVsbH1cclxuICAgIDwvU3R5bGVkQ29udGFpbmVyPlxyXG4gICk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWxlY3RXZWI7XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBTUEsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBS0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBR0EsSUFBQUUsVUFBQSxHQUFBRixPQUFBO0FBZUEsSUFBQUcsV0FBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBR0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBQTRDLElBQUFNLFdBQUEsR0FBQU4sT0FBQTtBQTZCNUMsSUFBTU8sU0FBUyxHQUFHLFNBQVpBLFNBQVNBLENBQUFDLElBQUEsRUFrQlQ7RUFBQSxJQWpCSkMsS0FBSyxHQUFBRCxJQUFBLENBQUxDLEtBQUs7SUFDTEMsV0FBVyxHQUFBRixJQUFBLENB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