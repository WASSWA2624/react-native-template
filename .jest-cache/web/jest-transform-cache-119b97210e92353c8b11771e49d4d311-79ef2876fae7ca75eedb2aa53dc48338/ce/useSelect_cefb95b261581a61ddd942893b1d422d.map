{"version":3,"names":["_react","require","_i18n","_types","useSelect","_ref","arguments","length","undefined","value","_ref$options","options","onValueChange","_ref$required","required","validate","_useState","useState","_useState2","_slicedToArray2","default","open","setOpen","_useState3","VALIDATION_STATES","DEFAULT","_useState4","validationState","setValidationState","_useState5","_useState6","errorMessage","setErrorMessage","_useState7","_useState8","isFocused","setIsFocused","selectedOption","useMemo","find","o","validateValue","useCallback","val","ERROR","tSync","result","valid","error","SUCCESS","openSelect","closeSelect","toggleSelect","prev","handleFocus","handleBlur","handleSelect","nextValue","_default","exports"],"sources":["useSelect.js"],"sourcesContent":["/**\r\n * Select Hook\r\n * Shared logic for Select component (validation + open state)\r\n * File: useSelect.js\r\n */\r\n\r\nimport { useState, useMemo, useCallback } from 'react';\r\nimport { tSync } from '@i18n';\r\nimport { VALIDATION_STATES } from './types';\r\n\r\n/**\r\n * @typedef {Object} SelectOption\r\n * @property {string} label\r\n * @property {string|number} value\r\n * @property {boolean} [disabled]\r\n */\r\n\r\n/**\r\n * @param {Object} params\r\n * @param {string|number|null|undefined} params.value\r\n * @param {SelectOption[]} params.options\r\n * @param {Function} params.onValueChange\r\n * @param {boolean} params.required\r\n * @param {Function} params.validate\r\n */\r\nconst useSelect = ({\r\n  value,\r\n  options = [],\r\n  onValueChange,\r\n  required = false,\r\n  validate,\r\n} = {}) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [validationState, setValidationState] = useState(VALIDATION_STATES.DEFAULT);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [isFocused, setIsFocused] = useState(false);\r\n\r\n  const selectedOption = useMemo(() => {\r\n    if (value === null || value === undefined) return undefined;\r\n    return options.find((o) => o.value === value);\r\n  }, [options, value]);\r\n\r\n  const validateValue = useCallback(\r\n    (val) => {\r\n      if (!required && (val === null || val === undefined || val === '')) {\r\n        setValidationState(VALIDATION_STATES.DEFAULT);\r\n        setErrorMessage('');\r\n        return true;\r\n      }\r\n\r\n      if (required && (val === null || val === undefined || val === '')) {\r\n        setValidationState(VALIDATION_STATES.ERROR);\r\n        setErrorMessage(tSync('forms.validation.required'));\r\n        return false;\r\n      }\r\n\r\n      if (validate) {\r\n        const result = validate(val);\r\n        if (typeof result === 'boolean') {\r\n          if (!result) {\r\n            setValidationState(VALIDATION_STATES.ERROR);\r\n            setErrorMessage(tSync('forms.validation.invalidValue'));\r\n            return false;\r\n          }\r\n        } else if (result && !result.valid) {\r\n          setValidationState(VALIDATION_STATES.ERROR);\r\n          setErrorMessage(result.error || tSync('forms.validation.invalidValue'));\r\n          return false;\r\n        }\r\n      }\r\n\r\n      setValidationState(VALIDATION_STATES.SUCCESS);\r\n      setErrorMessage('');\r\n      return true;\r\n    },\r\n    [required, validate]\r\n  );\r\n\r\n  const openSelect = useCallback(() => setOpen(true), []);\r\n  const closeSelect = useCallback(() => setOpen(false), []);\r\n  const toggleSelect = useCallback(() => setOpen((prev) => !prev), []);\r\n\r\n  const handleFocus = useCallback(() => setIsFocused(true), []);\r\n  const handleBlur = useCallback(() => {\r\n    setIsFocused(false);\r\n    validateValue(value);\r\n  }, [validateValue, value]);\r\n\r\n  const handleSelect = useCallback(\r\n    (nextValue) => {\r\n      if (onValueChange) onValueChange(nextValue);\r\n      validateValue(nextValue);\r\n      closeSelect();\r\n    },\r\n    [closeSelect, onValueChange, validateValue]\r\n  );\r\n\r\n  return {\r\n    open,\r\n    isFocused,\r\n    validationState,\r\n    errorMessage,\r\n    selectedOption,\r\n    openSelect,\r\n    closeSelect,\r\n    toggleSelect,\r\n    handleFocus,\r\n    handleBlur,\r\n    handleSelect,\r\n  };\r\n};\r\n\r\nexport default useSelect;\r\n\r\n\r\n"],"mappings":";;;;;;AAMA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAiBA,IAAMG,SAAS,GAAG,SAAZA,SAASA,CAAA,EAMJ;EAAA,IAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAP,CAAC,CAAC;IALJG,KAAK,GAAAJ,IAAA,CAALI,KAAK;IAAAC,YAAA,GAAAL,IAAA,CACLM,OAAO;IAAPA,OAAO,GAAAD,YAAA,cAAG,EAAE,GAAAA,YAAA;IACZE,aAAa,GAAAP,IAAA,CAAbO,aAAa;IAAAC,aAAA,GAAAR,IAAA,CACbS,QAAQ;IAARA,QAAQ,GAAAD,aAAA,cAAG,KAAK,GAAAA,aAAA;IAChBE,QAAQ,GAAAV,IAAA,CAARU,QAAQ;EAER,IAAAC,SAAA,GAAwB,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAAC,OAAA,EAAAJ,SAAA;IAAhCK,IAAI,GAAAH,UAAA;IAAEI,OAAO,GAAAJ,UAAA;EACpB,IAAAK,UAAA,GAA8C,IAAAN,eAAQ,EAACO,wBAAiB,CAACC,OAAO,CAAC;IAAAC,UAAA,OAAAP,eAAA,CAAAC,OAAA,EAAAG,UAAA;IAA1EI,eAAe,GAAAD,UAAA;IAAEE,kBAAkB,GAAAF,UAAA;EAC1C,IAAAG,UAAA,GAAwC,IAAAZ,eAAQ,EAAC,EAAE,CAAC;IAAAa,UAAA,OAAAX,eAAA,CAAAC,OAAA,EAAAS,UAAA;IAA7CE,YAAY,GAAAD,UAAA;IAAEE,eAAe,GAAAF,UAAA;EACpC,IAAAG,UAAA,GAAkC,IAAAhB,eAAQ,EAAC,KAAK,CAAC;IAAAiB,UAAA,OAAAf,eAAA,CAAAC,OAAA,EAAAa,UAAA;IAA1CE,SAAS,GAAAD,UAAA;IAAEE,YAAY,GAAAF,UAAA;EAE9B,IAAMG,cAAc,GAAG,IAAAC,cAAO,EAAC,YAAM;IACnC,IAAI7B,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKD,SAAS,EAAE,OAAOA,SAAS;IAC3D,OAAOG,OAAO,CAAC4B,IAAI,CAAC,UAACC,CAAC;MAAA,OAAKA,CAAC,CAAC/B,KAAK,KAAKA,KAAK;IAAA,EAAC;EAC/C,CAAC,EAAE,CAACE,OAAO,EAAEF,KAAK,CAAC,CAAC;EAEpB,IAAMgC,aAAa,GAAG,IAAAC,kBAAW,EAC/B,UAACC,GAAG,EAAK;IACP,IAAI,CAAC7B,QAAQ,KAAK6B,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKnC,SAAS,IAAImC,GAAG,KAAK,EAAE,CAAC,EAAE;MAClEf,kBAAkB,CAACJ,wBAAiB,CAACC,OAAO,CAAC;MAC7CO,eAAe,CAAC,EAAE,CAAC;MACnB,OAAO,IAAI;IACb;IAEA,IAAIlB,QAAQ,KAAK6B,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAKnC,SAAS,IAAImC,GAAG,KAAK,EAAE,CAAC,EAAE;MACjEf,kBAAkB,CAACJ,wBAAiB,CAACoB,KAAK,CAAC;MAC3CZ,eAAe,CAAC,IAAAa,WAAK,EAAC,2BAA2B,CAAC,CAAC;MACnD,OAAO,KAAK;IACd;IAEA,IAAI9B,QAAQ,EAAE;MACZ,IAAM+B,MAAM,GAAG/B,QAAQ,CAAC4B,GAAG,CAAC;MAC5B,IAAI,OAAOG,MAAM,KAAK,SAAS,EAAE;QAC/B,IAAI,CAACA,MAAM,EAAE;UACXlB,kBAAkB,CAACJ,wBAAiB,CAACoB,KAAK,CAAC;UAC3CZ,eAAe,CAAC,IAAAa,WAAK,EAAC,+BAA+B,CAAC,CAAC;UACvD,OAAO,KAAK;QACd;MACF,CAAC,MAAM,IAAIC,MAAM,IAAI,CAACA,MAAM,CAACC,KAAK,EAAE;QAClCnB,kBAAkB,CAACJ,wBAAiB,CAACoB,KAAK,CAAC;QAC3CZ,eAAe,CAACc,MAAM,CAACE,KAAK,IAAI,IAAAH,WAAK,EAAC,+BAA+B,CAAC,CAAC;QACvE,OAAO,KAAK;MACd;IACF;IAEAjB,kBAAkB,CAACJ,wBAAiB,CAACyB,OAAO,CAAC;IAC7CjB,eAAe,CAAC,EAAE,CAAC;IACnB,OAAO,IAAI;EACb,CAAC,EACD,CAAClB,QAAQ,EAAEC,QAAQ,CACrB,CAAC;EAED,IAAMmC,UAAU,GAAG,IAAAR,kBAAW,EAAC;IAAA,OAAMpB,OAAO,CAAC,IAAI,CAAC;EAAA,GAAE,EAAE,CAAC;EACvD,IAAM6B,WAAW,GAAG,IAAAT,kBAAW,EAAC;IAAA,OAAMpB,OAAO,CAAC,KAAK,CAAC;EAAA,GAAE,EAAE,CAAC;EACzD,IAAM8B,YAAY,GAAG,IAAAV,kBAAW,EAAC;IAAA,OAAMpB,OAAO,CAAC,UAAC+B,IAAI;MAAA,OAAK,CAACA,IAAI;IAAA,EAAC;EAAA,GAAE,EAAE,CAAC;EAEpE,IAAMC,WAAW,GAAG,IAAAZ,kBAAW,EAAC;IAAA,OAAMN,YAAY,CAAC,IAAI,CAAC;EAAA,GAAE,EAAE,CAAC;EAC7D,IAAMmB,UAAU,GAAG,IAAAb,kBAAW,EAAC,YAAM;IACnCN,YAAY,CAAC,KAAK,CAAC;IACnBK,aAAa,CAAChC,KAAK,CAAC;EACtB,CAAC,EAAE,CAACgC,aAAa,EAAEhC,KAAK,CAAC,CAAC;EAE1B,IAAM+C,YAAY,GAAG,IAAAd,kBAAW,EAC9B,UAACe,SAAS,EAAK;IACb,IAAI7C,aAAa,EAAEA,aAAa,CAAC6C,SAAS,CAAC;IAC3ChB,aAAa,CAACgB,SAAS,CAAC;IACxBN,WAAW,CAAC,CAAC;EACf,CAAC,EACD,CAACA,WAAW,EAAEvC,aAAa,EAAE6B,aAAa,CAC5C,CAAC;EAED,OAAO;IACLpB,IAAI,EAAJA,IAAI;IACJc,SAAS,EAATA,SAAS;IACTR,eAAe,EAAfA,eAAe;IACfI,YAAY,EAAZA,YAAY;IACZM,cAAc,EAAdA,cAAc;IACda,UAAU,EAAVA,UAAU;IACVC,WAAW,EAAXA,WAAW;IACXC,YAAY,EAAZA,YAAY;IACZE,WAAW,EAAXA,WAAW;IACXC,UAAU,EAAVA,UAAU;IACVC,YAAY,EAAZA;EACF,CAAC;AACH,CAAC;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAvC,OAAA,GAEahB,SAAS","ignoreList":[]}