# Debug Log Files

Generated log files are written here by the scripts in `scripts/debug/`. All `*.log` files are gitignored.

## Log Files

- `expo-debug.log`: Captures Expo/Metro stdout and stderr. Generated by running `npm run debug:expo` (uses port 8082 to avoid prompts when 8081 is in use).
- `android-debug.log`: Captures adb logcat output. Generated by running `npm run debug:android`. **Requires a device/emulator connected** (`adb devices`) and the app running; otherwise only header lines are written.
- `ios-debug.log`: Captures iOS simulator log stream. Generated by running `npm run debug:ios`. (macOS only)
- `web-debug.log`: Captures browser console logs via HTTP POST, using `npm run debug:web` together with the web-console-logger.

## Commands

- `npm run debug:expo` — Start Expo with output teed to `expo-debug.log`
- `npm run debug:android` — Capture adb logcat to `android-debug.log`
- `npm run debug:ios` — Capture iOS simulator logs to `ios-debug.log` (macOS only)
- `npm run debug:web` — Start HTTP server for browser console capture
- `npm run debug:all` — Run expo + android + ios loggers in parallel

## Debugging Android when the app breaks

1. **Connect device or start emulator** and ensure `adb devices` shows the device.
2. **Start Android log capture** in a terminal:  
   `npm run debug:android`  
   This clears logcat, then streams only React Native / Expo / AndroidRuntime (and ExpoModulesCore) to the terminal and to `debug/android-debug.log`.
3. **Reproduce the break**: launch the app (e.g. from another terminal run `npx expo start --port 8082`, then open the app on the device/emulator) and trigger the crash or bad behavior.
4. **Inspect** `debug/android-debug.log` (or the terminal):
   - **ReactNativeJS** — JavaScript errors and console output (look for redbox stack traces).
   - **AndroidRuntime** — native crashes (FATAL EXCEPTION, stack traces).
   - **Expo / ExpoModulesCore** — Expo runtime and module messages.
5. **Optional**: run `npm run debug:all` to capture Expo + Android (and iOS on macOS) logs together while you reproduce the issue.

See `.cursor/rules/debug.mdc` for full details.

## Expo Go on Android not running

1. **Expo Go version**: This project uses **Expo SDK 54**. Install or update **Expo Go** from the Google Play Store so it supports SDK 54.
2. **Same network**: Phone and dev machine must be on the same Wi‑Fi (or use tunnel below). Disable VPN on either if it blocks LAN.
3. **Start dev server**: From project root run `npm start` (or `npx expo start`). In the terminal you’ll see a QR code and a URL.
4. **Open in Expo Go**: On the phone, open the **Expo Go** app and scan the QR code, or enter the URL manually. If it fails, try tunnel:
   - Run `npm run android:tunnel` (starts with `--tunnel`) and scan the new QR code. Tunnel works across different networks.
5. **Firewall**: Allow Node/Metro on your dev machine (e.g. port 8081, or the port shown in the terminal).
6. **USB debugging (optional)**: For `npm run android` to launch the app automatically, connect the device via USB, enable USB debugging, and ensure `adb devices` lists the device.
